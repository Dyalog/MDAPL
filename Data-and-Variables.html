
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3. Data and Variables &#8212; Mastering Dyalog APL</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Some Primitive Functions" href="Some-Primitive-Functions.html" />
    <link rel="prev" title="2. Getting Started" href="Getting-Started.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Mastering Dyalog APL</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Introduction.html">
   1. Introduction - Will You Play APL With Me?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Getting-Started.html">
   2. Getting Started
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   3. Data and Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Some-Primitive-Functions.html">
   4. Some Primitive Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="User-Defined-Functions.html">
   5. User-Defined Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="First-Aid-Kit.html">
   6. First-Aid Kit
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Execute-and-Format-Control.html">
   7. Execute &amp; Format Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Working-on-Data-Shape.html">
   8. Working on Data Shape
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Special-Syntax.html">
   9. Special Syntax
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Nested-Arrays-Continued.html">
   10. Nested Arrays (Continued)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Operators.html">
   11. Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Tacit-Programming.html">
   12. Tacit Programming
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendices.html">
   13. Appendices
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/Dyalog/MDAPL"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/Dyalog/MDAPL/edit/master/docs/Data-and-Variables.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/Data-and-Variables.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-numeric-values">
   3.1. Simple Numeric Values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#our-first-operations">
     3.1.1. Our First Operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variables">
     3.1.2. Variables
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operations-on-variables">
     3.1.3. Operations on Variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arrays-of-items">
   3.2. Arrays of Items
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-list-or-a-matrix">
     3.2.1. Create a List or a Matrix
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#special-cases-with-reshape">
     3.2.2. Special Cases with Reshape
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multi-dimensional-arrays">
     3.2.3. Multi-Dimensional Arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#shape-rank-and-vocabulary">
   3.3. Shape, Rank and Vocabulary
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#shape-and-rank">
     3.3.1. Shape and Rank
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scaling-down-the-ranks">
     3.3.2. Scaling Down the Ranks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vocabulary">
     3.3.3. Vocabulary
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#beware">
     3.3.4. Beware!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-shape-is-always-a-vector">
       3.3.4.1. The Shape is Always a Vector
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#do-not-rely-on-the-visual-aspect-of-a-variable">
       3.3.4.2. Do Not Rely on the Visual Aspect of a Variable
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#displaying-long-vectors">
       3.3.4.3. Displaying Long Vectors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-character-values">
   3.4. Simple Character Values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#character-vectors-and-scalars">
     3.4.1. Character Vectors and Scalars
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#character-arrays">
     3.4.2. Character Arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indexing">
   3.5. Indexing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#traditional-vector-indexing">
     3.5.1. Traditional Vector Indexing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-shape-of-the-result">
     3.5.2. The Shape of the Result
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#array-indexing">
     3.5.3. Array Indexing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convention">
     3.5.4. Convention
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#warnings">
     3.5.5. Warnings
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#shape-compatibility">
       3.5.5.1. Shape Compatibility
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#replace-or-obtain-all-the-values">
       3.5.5.2. Replace or Obtain All the Values
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pass-through-value">
       3.5.5.3. “Pass-Through” Value
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-index-function">
     3.5.6. The Index Function
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#even-more-indexing">
     3.5.7. Even More Indexing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mixed-and-nested-arrays">
   3.6. Mixed and Nested Arrays
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mixed-arrays">
     3.6.1. Mixed Arrays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#four-important-remarks">
     3.6.2. Four Important Remarks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#nested-arrays">
     3.6.3. Nested Arrays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#display">
     3.6.4. DISPLAY
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conventions">
       3.6.4.1. Conventions
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#examples">
       3.6.4.2. Examples
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#be-simple">
     3.6.5. Be Simple!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#that-s-not-all-folks">
     3.6.6. That’s
     <em>
      Not
     </em>
     All, Folks!
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#empty-arrays">
   3.7. Empty Arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workspaces-and-commands">
   3.8. Workspaces and Commands
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-active-workspace">
     3.8.1. The Active Workspace
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-libraries">
     3.8.2. The Libraries
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-a-ws">
     3.8.3. Load a WS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#file-extensions">
     3.8.4. File Extensions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#merge-workspaces">
     3.8.5. Merge Workspaces
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#protected-copy">
       3.8.5.1. Protected Copy
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#intentionally-destructive-copy">
       3.8.5.2. Intentionally Destructive Copy
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#evolution-of-your-code">
       3.8.5.3. Evolution of Your Code
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#active-ws-identification">
       3.8.5.4. Active WS Identification
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exiting-apl">
     3.8.6. Exiting APL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contents-of-a-ws">
     3.8.7. Contents of a WS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#our-first-system-commands">
     3.8.8. Our First System Commands
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   3.9. Exercises
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-specialist-s-section">
   3.10. The Specialist’s Section
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variable-names">
     3.10.1. Variable Names
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#representation-of-numbers">
     3.10.2. Representation of Numbers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-shape-of-the-result-of-indexing">
     3.10.3. The Shape of the Result of Indexing
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-ravel-to-preserve-a-dimension">
       3.10.3.1. Using Ravel to Preserve a Dimension
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multiple-usage-of-an-index">
     3.10.4. Multiple Usage of an Index
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-problem-with-using-reshape">
     3.10.5. A Problem With Using Reshape (
     <code class="docutils literal notranslate">
      <span class="pre">
       ⍴
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#monadic-index-or-materialise">
     3.10.6. Monadic Index, or Materialise (
     <code class="docutils literal notranslate">
      <span class="pre">
       ⌷
      </span>
     </code>
     )
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solutions">
   3.11. Solutions
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Data and Variables</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-numeric-values">
   3.1. Simple Numeric Values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#our-first-operations">
     3.1.1. Our First Operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variables">
     3.1.2. Variables
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operations-on-variables">
     3.1.3. Operations on Variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arrays-of-items">
   3.2. Arrays of Items
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-list-or-a-matrix">
     3.2.1. Create a List or a Matrix
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#special-cases-with-reshape">
     3.2.2. Special Cases with Reshape
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multi-dimensional-arrays">
     3.2.3. Multi-Dimensional Arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#shape-rank-and-vocabulary">
   3.3. Shape, Rank and Vocabulary
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#shape-and-rank">
     3.3.1. Shape and Rank
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scaling-down-the-ranks">
     3.3.2. Scaling Down the Ranks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vocabulary">
     3.3.3. Vocabulary
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#beware">
     3.3.4. Beware!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-shape-is-always-a-vector">
       3.3.4.1. The Shape is Always a Vector
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#do-not-rely-on-the-visual-aspect-of-a-variable">
       3.3.4.2. Do Not Rely on the Visual Aspect of a Variable
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#displaying-long-vectors">
       3.3.4.3. Displaying Long Vectors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-character-values">
   3.4. Simple Character Values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#character-vectors-and-scalars">
     3.4.1. Character Vectors and Scalars
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#character-arrays">
     3.4.2. Character Arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indexing">
   3.5. Indexing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#traditional-vector-indexing">
     3.5.1. Traditional Vector Indexing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-shape-of-the-result">
     3.5.2. The Shape of the Result
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#array-indexing">
     3.5.3. Array Indexing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convention">
     3.5.4. Convention
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#warnings">
     3.5.5. Warnings
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#shape-compatibility">
       3.5.5.1. Shape Compatibility
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#replace-or-obtain-all-the-values">
       3.5.5.2. Replace or Obtain All the Values
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pass-through-value">
       3.5.5.3. “Pass-Through” Value
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-index-function">
     3.5.6. The Index Function
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#even-more-indexing">
     3.5.7. Even More Indexing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mixed-and-nested-arrays">
   3.6. Mixed and Nested Arrays
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mixed-arrays">
     3.6.1. Mixed Arrays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#four-important-remarks">
     3.6.2. Four Important Remarks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#nested-arrays">
     3.6.3. Nested Arrays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#display">
     3.6.4. DISPLAY
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conventions">
       3.6.4.1. Conventions
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#examples">
       3.6.4.2. Examples
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#be-simple">
     3.6.5. Be Simple!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#that-s-not-all-folks">
     3.6.6. That’s
     <em>
      Not
     </em>
     All, Folks!
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#empty-arrays">
   3.7. Empty Arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workspaces-and-commands">
   3.8. Workspaces and Commands
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-active-workspace">
     3.8.1. The Active Workspace
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-libraries">
     3.8.2. The Libraries
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-a-ws">
     3.8.3. Load a WS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#file-extensions">
     3.8.4. File Extensions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#merge-workspaces">
     3.8.5. Merge Workspaces
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#protected-copy">
       3.8.5.1. Protected Copy
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#intentionally-destructive-copy">
       3.8.5.2. Intentionally Destructive Copy
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#evolution-of-your-code">
       3.8.5.3. Evolution of Your Code
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#active-ws-identification">
       3.8.5.4. Active WS Identification
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exiting-apl">
     3.8.6. Exiting APL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contents-of-a-ws">
     3.8.7. Contents of a WS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#our-first-system-commands">
     3.8.8. Our First System Commands
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   3.9. Exercises
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-specialist-s-section">
   3.10. The Specialist’s Section
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variable-names">
     3.10.1. Variable Names
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#representation-of-numbers">
     3.10.2. Representation of Numbers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-shape-of-the-result-of-indexing">
     3.10.3. The Shape of the Result of Indexing
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-ravel-to-preserve-a-dimension">
       3.10.3.1. Using Ravel to Preserve a Dimension
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multiple-usage-of-an-index">
     3.10.4. Multiple Usage of an Index
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-problem-with-using-reshape">
     3.10.5. A Problem With Using Reshape (
     <code class="docutils literal notranslate">
      <span class="pre">
       ⍴
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#monadic-index-or-materialise">
     3.10.6. Monadic Index, or Materialise (
     <code class="docutils literal notranslate">
      <span class="pre">
       ⌷
      </span>
     </code>
     )
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solutions">
   3.11. Solutions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="data-and-variables">
<span id="data-and-variables-data-and-variables"></span><h1><span class="section-number">3. </span>Data and Variables<a class="headerlink" href="#data-and-variables" title="Permalink to this headline">#</a></h1>
<p>When you use APL, you type an expression or a command into the session window, and the result of the expression (or a message resulting from the execution of the command) is displayed on the next line(s). So an APL “session” is a sequence of user input lines (expressions and/or commands) interleaved with the results of the expressions.</p>
<p>If you type these expressions and/or commands in the Dyalog APL software you installed, or on the <a class="reference external" href="https://tryapl.org">TryAPL</a>, you will see that APL initially positions the input cursor six spaces in from the left margin. Unless you deliberately move the cursor before you start typing, the expressions you enter into the system will therefore be indented; you can evaluate what you type by pressing <kbd>Enter</kbd>, which will make the result appear below what you typed and left aligned with the margin. This interactive session is commonly referred to as an <em>interpreter session</em> because some software is interpreting what you type and providing you with results on the fly.</p>
<p>This book, however, was written in Jupyter notebooks, which work in a slightly different way. In here, you can find blocks of text (like the one you are reading <em>right now</em>) interleaved with code blocks. Depending on where you are reading this, these code blocks may be static or they may be interactive, allowing you, the reader, to change them and run them at will. The expressions you enter go in the shaded rectangles (the <em>input cells</em>, preceded by a <code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[X]:</span></code>) and you can evaluate them by pressing <kbd>Ctrl</kbd>+<kbd>Enter</kbd>. The results of the expressions are then placed inside white rectangles (the <em>output cells</em>, preceded by the corresponding <code class="docutils literal notranslate"><span class="pre">Out[X]:</span></code>) which get updated when you re-evaluate the same <em>input cell</em>.</p>
<p>It is recommended that you go through this tutorial in front of your computer, and experiment by typing the expressions given below into the Dyalog APL interpreter session. Alternatively, if you are reading the book online in a dynamic format, you are encouraged to re-run the <em>input cells</em> for yourself. Either way, try changing the expressions, and observe the new results.</p>
<div class="section" id="simple-numeric-values">
<span id="data-and-variables-simple-numeric-values"></span><h2><span class="section-number">3.1. </span>Simple Numeric Values<a class="headerlink" href="#simple-numeric-values" title="Permalink to this headline">#</a></h2>
<div class="section" id="our-first-operations">
<span id="data-and-variables-our-first-operations"></span><h3><span class="section-number">3.1.1. </span>Our First Operations<a class="headerlink" href="#our-first-operations" title="Permalink to this headline">#</a></h3>
<p>Let’s try some simple expressions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">27</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">54</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">81
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1171</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">708</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">463
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">634</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">832</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯198
</span></div></div>
</div>
<p>Notice that APL uses a different symbol known as <em>high minus</em> (<code class="docutils literal notranslate"><span class="pre">¯</span></code>) to distinguish between a negative value and the function <em>subtract</em> (<code class="docutils literal notranslate"><span class="pre">-</span></code>). If you wish to enter a negative value, you can enter this special symbol by pressing <kbd>APL</kbd>+<kbd>2</kbd> (or by clicking the symbol in the <em>language bar</em>).</p>
<p>Let’s continue with some more expressions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">86</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">21.5
</span></div></div>
</div>
<p>The <em>divide</em> sign above is obtained by pressing <kbd>APL</kbd>+<kbd>=</kbd>. The <em>multiply</em> sign below is obtained with <kbd>APL</kbd>+<kbd>-</kbd>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">59</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">472
</span></div></div>
</div>
<p>If you are familiar with other programming languages, you may be accustomed to using a slash (<code class="docutils literal notranslate"><span class="pre">/</span></code>) for division, and a star (<code class="docutils literal notranslate"><span class="pre">*</span></code>) for multiplication. Let’s see what might happen if you mistakenly use <code class="docutils literal notranslate"><span class="pre">*</span></code> in APL:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">7</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">343
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">*</span></code> in APL means <em>power</em> so <code class="docutils literal notranslate"><span class="pre">7</span> <span class="pre">*</span> <span class="pre">3</span></code> means <code class="docutils literal notranslate"><span class="pre">7</span> <span class="pre">×</span> <span class="pre">7</span> <span class="pre">×</span> <span class="pre">7</span></code>.</p>
<p>The slash also has a different meaning in APL; we’ll get to that latter.</p>
</div>
<div class="section" id="variables">
<span id="data-and-variables-variables"></span><h3><span class="section-number">3.1.2. </span>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">#</a></h3>
<p>As in any other programming language, it is possible to create variables. Just choose a name and use the assignment arrow (<code class="docutils literal notranslate"><span class="pre">←</span></code>) to assign it to a value. The value can be a single item or several items separated by spaces. The assignment arrow can be entered by pressing <kbd>APL</kbd>+<kbd>[</kbd>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">discount</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0.15</span><span class="w"></span>
<span class="nv">years</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1952</span><span class="w"> </span><span class="m">1943</span><span class="w"> </span><span class="m">1956</span><span class="w"> </span><span class="m">2020</span><span class="w"></span>
<span class="nv">purchased</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">4000</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>You can read the first assignment above as “<em><code class="docutils literal notranslate"><span class="pre">discount</span></code> gets <code class="docutils literal notranslate"><span class="pre">0.15</span></code></em>”.</p>
<p>To obtain the value of a variable, just type its name and evaluate the expression, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">discount</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.15
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">years</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1952 1943 1956 2020
</span></div></div>
</div>
<p>Variable names are <strong>case sensitive</strong>. This means that APL considers a lower-case letter and an upper-case letter to be two different characters. So the three variables <code class="docutils literal notranslate"><span class="pre">YEARS</span></code>, <code class="docutils literal notranslate"><span class="pre">Years</span></code>, and <code class="docutils literal notranslate"><span class="pre">years</span></code> would be distinct, and could contain different values. If you misspell the name of a variable, an error message will be displayed if that name is unknown:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Discount</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VALUE ERROR: Undefined name: Discount
      Discount
      ∧
</pre></div>
</div>
</div>
</div>
<p>We typed an upper-case “D”, instead of “d”. The message <code class="docutils literal notranslate"><span class="pre">VALUE</span> <span class="pre">ERROR</span></code> means that the name <code class="docutils literal notranslate"><span class="pre">Discount</span></code> is currently undefined.</p>
<p>Variable names must follow certain rules:</p>
<ul class="simple">
<li><p>they must contain only letters, in lower or upper-case, including some accented letters (cf. below), and the digits (0 to 9);</p></li>
<li><p>the APL alphabet also includes the Greek letter Delta (<code class="docutils literal notranslate"><span class="pre">∆</span></code>), entered using <kbd>APL</kbd>+<kbd>h</kbd>, the Underscore sign (<code class="docutils literal notranslate"><span class="pre">_</span></code>), and also the Underscored Delta (<code class="docutils literal notranslate"><span class="pre">⍙</span></code>), entered using <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>.</kbd> (dot); and</p></li>
<li><p>they cannot start with a digit.</p></li>
</ul>
<p>The following variable names are valid:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">∆x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="nv">∆x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Fly⍙Airlines</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="nv">Fly⍙Airlines</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">My_car_is_green</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="nv">My_car_is_green</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Hote273</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="nv">Hote273</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span>Bétise_à_Caimbrai ← 5
Bétise_à_Caimbrai
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5
</span></div></div>
</div>
<p>But <code class="docutils literal notranslate"><span class="pre">5á7</span></code> is not valid, because it begins with a digit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span>5á7 ← 6
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SYNTAX ERROR
      5 á7←6
          ∧
</pre></div>
</div>
</div>
</div>
<p>In this document, most variable names will follow the “camelCase” casing convention. This means single-word variable names will be lower-case but compound names will then have the subsequent words capitalised. <code class="docutils literal notranslate"><span class="pre">camelCase</span></code> is an example name of a variable following the “camelCase” casing convention.</p>
<p>The letters that are allowed as part of variable names are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>0123456789
ABCDEFGHIJKLMNOPQRSTUVWXYZ_
abcdefghijklmnopqrstuvwxyz
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝẞ
àáâãäåæçèéêëìíîïðñòóôõöøùúûüþ
∆⍙
</pre></div>
</div>
<p>Additionally, variable names can contain underlined upper cases letters, which look something like <ins>ABCDEFGHIJKLMNOPQRSTUVWXYZ</ins>. It is strongly recommended that you do not use the underscored letters which are only included to support old applications. Today, underscored letters are regarded as an anachronism, and are deprecated in modern versions of APL. They are not part of the Unicode character set and we weren’t even able to include them here: the enumeration above is just styled like the underscored letters, it is not really those letters. When a standard Unicode font is used, the APL underscored letters correspond to the Unicode circled alphabet, which is displayed like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ⒶⒷⒸⒹⒺⒻⒼⒽⒾⒿⓀⓁⓂⓃⓄⓅⓆⓇⓈⓉⓊⓋⓌⓍⓎⓏ
</pre></div>
</div>
<p>Although it is permitted, the use of accented characters is also not recommended because some people may be unable to enter them using their normal keyboard.</p>
<p><code class="docutils literal notranslate"><span class="pre">∆</span></code> and <code class="docutils literal notranslate"><span class="pre">⍙</span></code> may also cause problems if you ever want to inter-operate with other software, and are best avoided.</p>
</div>
<div class="section" id="operations-on-variables">
<span id="data-and-variables-operations-on-variables"></span><h3><span class="section-number">3.1.3. </span>Operations on Variables<a class="headerlink" href="#operations-on-variables" title="Permalink to this headline">#</a></h3>
<p>Variables can be used in any expression or calculation. For example, if we want to calculate the amount of the discount applied to the things we purchased, we can write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">amount</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">purchased</span><span class="o">×</span><span class="nv">discount</span><span class="w"></span>
<span class="nv">amount</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">600
</span></div></div>
</div>
<p>When the result of an expression is assigned to a name, it is not displayed. This is why we have entered a second expression to have the value displayed. If the result of an operation is not assigned to a name, it is immediately displayed, but then the value of the result cannot be reused directly in another expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">purchased</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="nv">discount</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">600
</span></div></div>
</div>
<p>It is of course possible to change the contents of a variable. The previous value is then lost.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">discount</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0.185</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>It is possible to assign values to several variables in a single expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">g</span><span class="w"> </span><span class="nv">h</span><span class="w"> </span><span class="nv">j</span><span class="p">)</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="m">49</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">g</span></code> gets 30, <code class="docutils literal notranslate"><span class="pre">h</span></code> gets 51 and <code class="docutils literal notranslate"><span class="pre">j</span></code> gets 49.</p>
<p>This <em>multiple assignment</em> is an elegant way of allocating a set of values to some distinct variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">colette</span><span class="w"> </span><span class="nv">bernard</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">now</span><span class="p">)</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">years</span><span class="w"></span>
<span class="nv">colette</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1952
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">line</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1956
</span></div></div>
</div>
<p>Note that it is possible to write multiple assignments without parentheses on the left:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">g</span><span class="w"> </span><span class="nv">h</span><span class="w"> </span><span class="nv">j</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="m">49</span><span class="w"></span>
<span class="nv">colette</span><span class="w"> </span><span class="nv">bernard</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">years</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>However, this is highly discouraged.
Using parentheses indicates much more clearly the intent of performing <em>multiple assignment</em>, helps prevent some erroneous behaviour, and improves the compatibility with other APL systems.
The benefits to parenthesising <em>multiple assignment</em>/disadvantages of not parenthesising it will be discussed in more detail in <a class="reference internal" href="Special-Syntax.html#special-syntax-using-parentheses"><span class="std std-numref">Section 9.2.2</span></a>.</p>
</div>
</div>
<div class="section" id="arrays-of-items">
<span id="data-and-variables-arrays-of-items"></span><h2><span class="section-number">3.2. </span>Arrays of Items<a class="headerlink" href="#arrays-of-items" title="Permalink to this headline">#</a></h2>
<p>In APL, an <em>array</em> is a sequence of zero or more items. The variable <code class="docutils literal notranslate"><span class="pre">years</span></code> that we used in the previous section is an array of four items.</p>
<div class="section" id="create-a-list-or-a-matrix">
<span id="data-and-variables-create-a-list-or-a-matrix"></span><h3><span class="section-number">3.2.1. </span>Create a List or a Matrix<a class="headerlink" href="#create-a-list-or-a-matrix" title="Permalink to this headline">#</a></h3>
<p>To enter a short list of items, just type them one by one separated by spaces, and assign the list to a name. For example, here is the number of TV sets sold during the last ten days by a shopkeeper:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">sales</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>If you need to enter a very long list of items, which will not easily fit on a single line, please refer to the <a class="reference internal" href="Special-Syntax.html#special-syntax-modified-assignment"><span class="std std-numref">Section 9.1</span></a>, where a simple method is explained.</p>
<p>Imagine now that somebody has noted their income and expenses during the first six months of this year:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Month</p></th>
<th class="text-align:right head"><p>Income</p></th>
<th class="text-align:right head"><p>Expenses</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>January</p></td>
<td class="text-align:right"><p>4210</p></td>
<td class="text-align:right"><p>3121</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>February</p></td>
<td class="text-align:right"><p>4807</p></td>
<td class="text-align:right"><p>4284</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>March</p></td>
<td class="text-align:right"><p>3609</p></td>
<td class="text-align:right"><p>7543</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>April</p></td>
<td class="text-align:right"><p>5712</p></td>
<td class="text-align:right"><p>2601</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>May</p></td>
<td class="text-align:right"><p>2305</p></td>
<td class="text-align:right"><p>3364</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>June</p></td>
<td class="text-align:right"><p>4568</p></td>
<td class="text-align:right"><p>2784</p></td>
</tr>
</tbody>
</table>
<p>We shall see later how we can store the names of the months; for now, let us just try to store the numeric values from the table above in a variable.</p>
<p>To do this, we have to give two pieces of information to the computer:</p>
<ul class="simple">
<li><p>the <em>shape</em> of the array: in this case, six rows and two columns; and</p></li>
<li><p>the <em>contents</em> (or <em>items</em>) of the array, in row order.</p></li>
</ul>
<p>The function that organises a set of items into an array of a specified shape is known as <em>reshape</em> and is symbolised by the Greek letter Rho (<code class="docutils literal notranslate"><span class="pre">⍴</span></code>). It is easy to remember that <em>R</em>ho can be entered using <kbd>APL</kbd>+<kbd>r</kbd>.</p>
<p>The <em>reshape</em> function is used as follows: <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">←</span> <span class="pre">shape</span> <span class="pre">⍴</span> <span class="pre">contents</span></code>.</p>
<p>For example, to obtain a 6 by 2 array of items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">money</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">4210</span><span class="w"> </span><span class="m">3121</span><span class="w"> </span><span class="m">4807</span><span class="w"> </span><span class="m">4284</span><span class="w"> </span><span class="m">3609</span><span class="w"> </span><span class="m">7543</span><span class="w"> </span><span class="m">5712</span><span class="w"> </span><span class="m">2601</span><span class="w"> </span><span class="m">2305</span><span class="w"> </span><span class="m">3364</span><span class="w"> </span><span class="m">4568</span><span class="w"> </span><span class="m">2784</span><span class="w"></span>
<span class="nv">money</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4210 3121
4807 4284
3609 7543
5712 2601
2305 3364
4568 2784
</span></div></div>
</div>
</div>
<div class="section" id="special-cases-with-reshape">
<span id="data-and-variables-special-cases-with-reshape"></span><h3><span class="section-number">3.2.2. </span>Special Cases with Reshape<a class="headerlink" href="#special-cases-with-reshape" title="Permalink to this headline">#</a></h3>
<p>If there are too many items, the extra items are ignored:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">56</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">85</span><span class="w"> </span><span class="m">96</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">82</span><span class="w"> </span><span class="m">27</span><span class="w"></span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12 56 78
74 85 96
30 22 44
</span></div></div>
</div>
<p>Notice how the last three items (<code class="docutils literal notranslate"><span class="pre">66</span> <span class="pre">82</span> <span class="pre">27</span></code>) have been ignored when creating the matrix.</p>
<p>However, if there are fewer items than implied by the shape, the list of items is reused as many times as necessary to fill the array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12 56 78 74 85 96
30 22 44 66 82 27
12 56 78 74 85 96
30 22 44 66 82 27
</span></div></div>
</div>
<p>Notice how the <code class="docutils literal notranslate"><span class="pre">contents</span></code> variable is used twice to fill this 4 by 6 matrix, with the top two rows being the same as the bottom two rows.</p>
<p>This property is often used to create special patterns:</p>
<ul class="simple">
<li><p>fill an array with a single value:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0
0 0 0 0
0 0 0 0
</span></div></div>
</div>
<ul class="simple">
<li><p>repeat a pattern:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">30</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 5 0 0 1 5 0 0 1 5 0 0 1 5 0 0 1 5 0 0 1 5 0 0 1 5 0 0 1 5
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 4 6 8
2 4 6 8
2 4 6 8
</span></div></div>
</div>
<p>and</p>
<ul class="simple">
<li><p>shift values:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 0 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 0 1 0
0 0 0 0 1
</span></div></div>
</div>
</div>
<div class="section" id="multi-dimensional-arrays">
<span id="data-and-variables-multi-dimensional-arrays"></span><h3><span class="section-number">3.2.3. </span>Multi-Dimensional Arrays<a class="headerlink" href="#multi-dimensional-arrays" title="Permalink to this headline">#</a></h3>
<p>APL is not limited to arrays with 2 dimensions, it can handle arrays with 3, 4, indeed up to 15 dimensions.</p>
<p>Imagine that a company has stored the production of its assembly lines in a variable named <code class="docutils literal notranslate"><span class="pre">prod</span></code>.</p>
<p>The variable contains 5 years of production, on 2 assembly lines, and for 12 months per year. To represent the 3 dimensions on the screen, the array is displayed split into sub-arrays each representing a single year, as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕RL</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">73</span><span class="w"></span>
<span class="nv">prod</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">?</span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">12</span><span class="o">⍴</span><span class="m">50</span><span class="w"></span>
<span class="nv">prod</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 9 16 42 50  2  3 11 45 17 37 29 36
34 19 32 12 37 15 46 24 49 28 36  9

29  5 45 23 27  4 23 16 39 22 22  2
46 20 47 17 18 25 13 38 42 38 45 28

37 19  5 10 30 49 16 18 46 47 47  3
39 23 41 20  6 40 21 22 40 49 20  1

13 36 12 40 12 15 24 20 21 12 19 25
 8 48 22 37 33  1 39 30 50 50  8 35

38 31 24 40 23  7 20 34 35  6 19 27
41  1 14 50 17 42  6 35 12 48 30 29
</span></div></div>
</div>
<p>This array is organised in dimensions that represent 5 years, 2 lines, 12 months: it is a three dimensional array. We can also say that its <em>shape</em> is <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">2</span> <span class="pre">12</span></code>.</p>
</div>
</div>
<div class="section" id="shape-rank-and-vocabulary">
<span id="data-and-variables-shape-rank-and-vocabulary"></span><h2><span class="section-number">3.3. </span>Shape, Rank and Vocabulary<a class="headerlink" href="#shape-rank-and-vocabulary" title="Permalink to this headline">#</a></h2>
<div class="section" id="shape-and-rank">
<span id="data-and-variables-shape-and-rank"></span><h3><span class="section-number">3.3.1. </span>Shape and Rank<a class="headerlink" href="#shape-and-rank" title="Permalink to this headline">#</a></h3>
<p>The symbol <code class="docutils literal notranslate"><span class="pre">⍴</span></code>, which we introduced above, can be used to obtain the lengths of the dimensions, or the <em>shape</em>, of an array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="w"> </span><span class="nv">years</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<p>The code above can be read as “<em>shape</em> of <code class="docutils literal notranslate"><span class="pre">years</span></code>”. It then tells us that <code class="docutils literal notranslate"><span class="pre">years</span></code> has 4 items.</p>
<p>Similarly, we can see that <code class="docutils literal notranslate"><span class="pre">money</span></code> has 6 rows and 2 columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="w"> </span><span class="nv">money</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">6 2
</span></div></div>
</div>
<p>Slightly more involved is the shape of <code class="docutils literal notranslate"><span class="pre">prod</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">shape</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">⍴</span><span class="nv">prod</span><span class="w"></span>
<span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5 2 12
</span></div></div>
</div>
<p>Recall that <code class="docutils literal notranslate"><span class="pre">prod</span></code> has 5 sheets (or planes), each having 2 rows and 12 columns.</p>
<p>Now, what is the shape of <code class="docutils literal notranslate"><span class="pre">shape</span></code>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="w"> </span><span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<p>The shape of <code class="docutils literal notranslate"><span class="pre">shape</span></code> is 3 because <code class="docutils literal notranslate"><span class="pre">prod</span></code> has 3 dimensions.</p>
<p>The same result could have been obtained directly using the expression <code class="docutils literal notranslate"><span class="pre">⍴⍴</span> <span class="pre">prod</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴⍴</span><span class="w"> </span><span class="nv">prod</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">prod</span></code> has 3 dimensions; we say that its <em>rank</em> is 3, or that it is organised along 3 criteria which are: Years / Lines / Months.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴⍴</span><span class="w"> </span><span class="nv">money</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">money</span></code> has 2 dimensions; we say that its <em>rank</em> is 2, or that it is organised along 2 criteria which are: Months / Accounts.</p>
<div class="note admonition">
<p class="admonition-title">Definition</p>
<p>The <em>rank</em> of an array is the number of its dimensions. It can be obtained using the expression <code class="docutils literal notranslate"><span class="pre">⍴⍴</span> <span class="pre">array</span></code>.</p>
</div>
</div>
<div class="section" id="scaling-down-the-ranks">
<span id="data-and-variables-scaling-down-the-ranks"></span><h3><span class="section-number">3.3.2. </span>Scaling Down the Ranks<a class="headerlink" href="#scaling-down-the-ranks" title="Permalink to this headline">#</a></h3>
<p>Using that formula, we can see that:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Variable</p></th>
<th class="text-align:left head"><p></p></th>
<th class="text-align:left head"><p>Shape</p></th>
<th class="text-align:left head"><p></p></th>
<th class="text-align:left head"><p>Rank</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">prod</span></code></p></td>
<td class="text-align:left"><p>has a shape equal to</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">2</span> <span class="pre">12</span></code></p></td>
<td class="text-align:left"><p>and its rank is equal to …</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">money</span></code></p></td>
<td class="text-align:left"><p>has a shape equal to</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">6</span> <span class="pre">2</span></code></p></td>
<td class="text-align:left"><p>and its rank is equal to …</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">years</span></code></p></td>
<td class="text-align:left"><p>has a shape equal to</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td class="text-align:left"><p>and its rank is equal to …</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
</tbody>
</table>
<p>It seems consistent that some array must exist which has a rank equal to …… <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>Such arrays are single items, like 1573 or 36.29 or the variable <code class="docutils literal notranslate"><span class="pre">discount</span></code> used above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴⍴</span><span class="w"> </span><span class="nv">discount</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴⍴</span><span class="w"> </span><span class="m">36.29</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>We needed 3 numbers to express the shape of <code class="docutils literal notranslate"><span class="pre">prod</span></code>, 2 numbers to express the shape of <code class="docutils literal notranslate"><span class="pre">money</span></code>, and only 1 number to express the shape of <code class="docutils literal notranslate"><span class="pre">years</span></code>… hence to express the shape of <code class="docutils literal notranslate"><span class="pre">1573</span></code> or <code class="docutils literal notranslate"><span class="pre">discount</span></code>, we need <strong>no</strong> numbers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="w"> </span><span class="m">1573</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="w"> </span><span class="nv">discount</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<p>The answers display as a blank line: the shape of a single number is an empty array (0 items).</p>
</div>
<div class="section" id="vocabulary">
<span id="data-and-variables-vocabulary"></span><h3><span class="section-number">3.3.3. </span>Vocabulary<a class="headerlink" href="#vocabulary" title="Permalink to this headline">#</a></h3>
<p>In this book, we shall use the following terms:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Term</p></th>
<th class="text-align:left head"><p>Explanation</p></th>
<th class="text-align:left head"><p>Example variable</p></th>
<th class="text-align:left head"><p>Rank</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><em><strong>Array</strong></em></p></td>
<td class="text-align:left"><p>is a generic word for any sequence of items (possibly containing a single item, or no items at all)</p></td>
<td class="text-align:left"><p></p></td>
<td class="text-align:left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><em><strong>Scalar</strong></em></p></td>
<td class="text-align:left"><p>is a single item like</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">discount</span></code></p></td>
<td class="text-align:left"><p>0</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><em><strong>Vector</strong></em></p></td>
<td class="text-align:left"><p>is a list of items like</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">years</span></code></p></td>
<td class="text-align:left"><p>1</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><em><strong>Matrix</strong></em></p></td>
<td class="text-align:left"><p>is an array of rank 2 like</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">money</span></code></p></td>
<td class="text-align:left"><p>2</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><em><strong>Table</strong></em></p></td>
<td class="text-align:left"><p>is a common name for a matrix</p></td>
<td class="text-align:left"><p></p></td>
<td class="text-align:left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><em><strong>Cube</strong></em></p></td>
<td class="text-align:left"><p>is a common name for 3-D arrays like</p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">prod</span></code></p></td>
<td class="text-align:left"><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="beware">
<span id="data-and-variables-beware"></span><h3><span class="section-number">3.3.4. </span>Beware!<a class="headerlink" href="#beware" title="Permalink to this headline">#</a></h3>
<div class="section" id="the-shape-is-always-a-vector">
<span id="data-and-variables-the-shape-is-always-a-vector"></span><h4><span class="section-number">3.3.4.1. </span>The Shape is Always a Vector<a class="headerlink" href="#the-shape-is-always-a-vector" title="Permalink to this headline">#</a></h4>
<p>The shape of a value is <strong>always</strong> a vector, even if it contains only one item or even no items at all.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">shape</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">⍴</span><span class="nv">years</span><span class="w"></span>
<span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<p>The innocent 4 above looks like a scalar, but it is of rank 1 as we can verify here:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴⍴</span><span class="w"> </span><span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>So <code class="docutils literal notranslate"><span class="pre">shape</span></code> is a vector. It is a vector with only one item:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="w"> </span><span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>This shows, in particular, that <code class="docutils literal notranslate"><span class="pre">⍴</span> <span class="pre">years</span></code> does <em>not</em> return the length of the vector <code class="docutils literal notranslate"><span class="pre">years</span></code>. <code class="docutils literal notranslate"><span class="pre">⍴</span> <span class="pre">years</span></code> returns the shape of <code class="docutils literal notranslate"><span class="pre">years</span></code>, which is a 1-item vector with the number 4. The length of <code class="docutils literal notranslate"><span class="pre">years</span></code> (which is the scalar value 4) can be obtained with an appropriate primitive: the <em>tally</em> primitive <code class="docutils literal notranslate"><span class="pre">≢</span></code>, that you can type with <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>’</kbd>. Notice how <code class="docutils literal notranslate"><span class="pre">≢</span></code> returns the scalar value 4, instead of a 1-item vector with the value 4:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">length</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">≢</span><span class="nv">years</span><span class="w"></span>
<span class="nv">length</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">length</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>Having introduced <em>tally</em>, we can now use it to compute the rank of an array properly. The rank of an array should be a scalar, so instead of <code class="docutils literal notranslate"><span class="pre">⍴⍴array</span></code> we can use <code class="docutils literal notranslate"><span class="pre">≢⍴array</span></code>, which you can read as</p>
<blockquote>
<div><p>Tally the elements of the shape of <code class="docutils literal notranslate"><span class="pre">array</span></code></p>
</div></blockquote>
<p>As an example, let us verify that <code class="docutils literal notranslate"><span class="pre">years</span></code> has dimension 1 (i.e. it is a vector):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢⍴</span><span class="nv">years</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
</div>
<div class="section" id="do-not-rely-on-the-visual-aspect-of-a-variable">
<span id="data-and-variables-do-not-rely-on-the-visual-aspect-of-a-variable"></span><h4><span class="section-number">3.3.4.2. </span>Do Not Rely on the Visual Aspect of a Variable<a class="headerlink" href="#do-not-rely-on-the-visual-aspect-of-a-variable" title="Permalink to this headline">#</a></h4>
<p>Although scalars, vectors, and matrices may sometimes look the same when they are displayed, they should not be confused. Just look at the two variables <code class="docutils literal notranslate"><span class="pre">length</span></code> and <code class="docutils literal notranslate"><span class="pre">shape</span></code> above, they look the same but one is a scalar and the other is a vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">length</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢⍴</span><span class="nv">length</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>This tells us that <code class="docutils literal notranslate"><span class="pre">length</span></code> has 0 dimensions hence is a scalar. On the other hand…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢⍴</span><span class="nv">shape</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">shape</span></code> has 1 dimension and is thus a vector.</p>
<p>Scalars should not be confused with a 1-item vector, or 1-item matrix, or with any 1-item multi-dimensional array for that matter. Remember that the scalar has rank 0 while a multi-dimensional array will have rank greater than 0.</p>
<p>But confusion doesn’t arise only with scalars versus 1-item multi-dimensional arrays. Consider the variables <code class="docutils literal notranslate"><span class="pre">v</span></code> and <code class="docutils literal notranslate"><span class="pre">m</span></code> that we will introduce now, a vector and a 1-row matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">40</span><span class="w"></span>
<span class="nv">m</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">40</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>If we display their values, they look exactly the same:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">87 65 21 40
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">m</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">87 65 21 40
</span></div></div>
</div>
<p>But they cannot be easily added or multiplied together:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">m</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RANK ERROR: Mismatched left and right argument ranks
      v+m
       ∧
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="displaying-long-vectors">
<span id="data-and-variables-displaying-long-vectors"></span><h4><span class="section-number">3.3.4.3. </span>Displaying Long Vectors<a class="headerlink" href="#displaying-long-vectors" title="Permalink to this headline">#</a></h4>
<p>If a vector is too long to be displayed in a single line on your screen, the interpreter session will wrap it onto several lines. But to prevent possible confusion with the display of a matrix, the second line and the following lines will not be aligned at the left margin, but will be indented six characters to the right. To show you what we mean, the figure below contains a screenshot of the Windows IDE when we display the variable <code class="docutils literal notranslate"><span class="pre">bignum</span></code>; the vector is split in three lines and some of the values are only visible if you scroll right.</p>
<div class="figure align-default" id="bignum-output">
<span id="fig-bignum-output"></span><img alt="_images/Bignum_Output.png" src="_images/Bignum_Output.png" />
<p class="caption"><span class="caption-number">Fig. 3.1 </span><span class="caption-text">A long variable being wrapped in the Windows IDE.</span><a class="headerlink" href="#bignum-output" title="Permalink to this image">#</a></p>
</div>
<p>Depending on the format in which you are reading this book, you may or may not be able to see all the numbers and they may or may not be laid out in several lines. If they are, then the first line will also not be indented, like in the figure above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">bignum</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">446.19</span><span class="w"> </span><span class="m">231.12</span><span class="w"> </span><span class="m">253.59</span><span class="w"> </span><span class="m">115.56</span><span class="w"> </span><span class="m">262.15</span><span class="w"> </span><span class="m">271.78</span><span class="w"> </span><span class="m">1.07</span><span class="w"> </span><span class="m">180.83</span><span class="w"> </span><span class="m">166.92</span><span class="w"> </span><span class="m">318.86</span><span class="w"> </span><span class="m">240.75</span><span class="w"> </span><span class="m">44.94</span><span class="w"> </span><span class="m">240.75</span><span class="w"> </span><span class="m">90.95</span><span class="w"> </span><span class="m">317.79</span><span class="w"> </span><span class="m">285.69</span><span class="w"> </span><span class="m">4.28</span><span class="w"> </span><span class="m">368.08</span><span class="w"> </span><span class="m">295.32</span><span class="w"> </span><span class="m">379.85</span><span class="w"> </span><span class="m">324.21</span><span class="w"> </span><span class="m">77.04</span><span class="w"> </span><span class="m">77.04</span><span class="w"> </span><span class="m">415.16</span><span class="w"> </span><span class="m">447.26</span><span class="w"> </span><span class="m">33.17</span><span class="w"> </span><span class="m">415.16</span><span class="w"> </span><span class="m">285.69</span><span class="w"> </span><span class="m">202.23</span><span class="w"> </span><span class="m">126.26</span><span class="w"> </span><span class="m">180.83</span><span class="w"> </span><span class="m">81.32</span><span class="w"> </span><span class="m">134.82</span><span class="w"> </span><span class="m">261.08</span><span class="w"> </span><span class="m">343.47</span><span class="w"> </span><span class="m">157.29</span><span class="w"> </span><span class="m">335.98</span><span class="w"></span>
<span class="nv">bignum</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">446.19 231.12 253.59 115.56 262.15 271.78 1.07 180.83 166.92 318.86 240.75 44.94 240.75 90.95 317.79 285.69 4.28 368.08 295.32 379.85 324.21 77.04 77.04 415.16 447.26 33.17 415.16 285.69 202.23 126.26 180.83 81.32 134.82 261.08 343.47 157.29 335.98
</span></div></div>
</div>
</div>
</div>
</div>
<div class="section" id="simple-character-values">
<span id="data-and-variables-simple-character-values"></span><h2><span class="section-number">3.4. </span>Simple Character Values<a class="headerlink" href="#simple-character-values" title="Permalink to this headline">#</a></h2>
<div class="section" id="character-vectors-and-scalars">
<span id="data-and-variables-character-vectors-and-scalars"></span><h3><span class="section-number">3.4.1. </span>Character Vectors and Scalars<a class="headerlink" href="#character-vectors-and-scalars" title="Permalink to this headline">#</a></h3>
<p>Up to now, we have used only numeric values, but we can also create textual data known as a <em>character array</em>. To identify a string of characters as text, we start and end it with a single <em>quote</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">text</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;Today is August 7th, 2020&#39;</span><span class="w"></span>
<span class="nv">text</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Today is August 7th, 2020
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">text</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">25
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">trailer</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;I type 7 trailing blanks       &#39;</span><span class="w"></span>
<span class="nv">trailer</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">I type 7 trailing blanks       
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">trailer</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">31
</span></div></div>
</div>
<p>As these examples show:</p>
<ul class="simple">
<li><p>the quotes are <strong>not</strong> part of the text, they’re just there to delimit it;</p></li>
<li><p>text can include any character: letters, digits and punctuation;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text</span></code> and <code class="docutils literal notranslate"><span class="pre">trailer</span></code> are vectors. They are sometimes called <em>strings</em>;</p></li>
<li><p>APL does not recognize words; a character array is simply a set of characters; and</p></li>
<li><p>blank characters (spaces) are characters like any other character; they do not have any special meaning. However, when a character array is displayed any trailing blanks are most often invisible.</p></li>
</ul>
<p>A problem may occur when the text itself includes an apostrophe, for example in a sentence like “<em>It’s raining, isn’t it?</em>”.</p>
<p>When you enter apostrophes as part of the text, you must double them, as shown below, to distinguish them from the delimiters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">damned</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;It&#39;&#39;s raining, isn&#39;&#39;t it?&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>This is only a typing convention, but the doubled quotes are transformed into a single apostrophe, as you can see here:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">damned</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">It's raining, isn't it?
</span></div></div>
</div>
<p>As mentioned above, a character array can contain digits, but they are not considered to be numbers, and it is impossible to use them in a mathematical operation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">hundred</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;100&#39;</span><span class="w"></span>
<span class="nv">hundred</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">100
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">hundred</span></code> looks like a number, but it isn’t:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">hundred</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">hundred</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DOMAIN ERROR
      hundred+5
             ∧
</pre></div>
</div>
</div>
</div>
<p>Of course, a single character is a scalar:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">singleton</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;p&#39;</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">singleton</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<p>The result is a blank line because scalars have no dimensions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢⍴</span><span class="nv">singleton</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>And the confirmation above tells us that <code class="docutils literal notranslate"><span class="pre">singleton</span></code> has 0 dimensions.</p>
</div>
<div class="section" id="character-arrays">
<span id="data-and-variables-character-arrays"></span><h3><span class="section-number">3.4.2. </span>Character Arrays<a class="headerlink" href="#character-arrays" title="Permalink to this headline">#</a></h3>
<p>We saw, some pages ago, a list of months:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">January</span>
<span class="n">February</span>
<span class="n">March</span>
<span class="n">April</span>
<span class="n">May</span>
<span class="n">June</span>
</pre></div>
</div>
<p>We can think of this as a list of 6 words, or as a matrix of 6 rows and 8 columns (the width of “February”). Both representations are valid, and both can be used in APL; let us study them one after the other.</p>
<p>To enter the months as a 6 by 8 matrix, one must use the <em>reshape</em> (<code class="docutils literal notranslate"><span class="pre">⍴</span></code>) function:</p>
<ul class="simple">
<li><p>to the left of the function we must specify the shape of the matrix we want to build, which is <code class="docutils literal notranslate"><span class="pre">6</span> <span class="pre">8</span></code>; and</p></li>
<li><p>to the right of the function we must specify all of the characters (including any trailing blanks) that are necessary to fill each row to the proper length.</p></li>
</ul>
<p>Like so:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">monMat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="s1">&#39;January FebruaryMarch   April   May     June&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>No space was typed between <code class="docutils literal notranslate"><span class="pre">February</span></code> and <code class="docutils literal notranslate"><span class="pre">March</span></code>; do you see why?</p>
<p>Let us check the result:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">monMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">January 
February
March   
April   
May     
JuneJanu
</span></div></div>
</div>
<p>Oops! We forgot that when the right argument is too short, <code class="docutils literal notranslate"><span class="pre">⍴</span></code> reuses it from the beginning. That’s the reason why the last row is wrong. We must add 4 trailing blanks.</p>
<div class="tip admonition">
<p class="admonition-title">Tip</p>
<p>You do not have to re-type the entire expression.</p>
<p>If you are working in the interpreter session, just move your cursor up to the line where you defined <code class="docutils literal notranslate"><span class="pre">monMat</span></code>, add the missing blanks, and press the <kbd>Enter</kbd> key.</p>
<p>APL will then copy the modified line down to the end of your session and automatically restore the original line to its original state. As a consequence, the interpreter window always displays the sequence of expressions and results in the order in which you typed them.</p>
</div>
<p>If you are working with the Jupyter notebook version of this book, you can just go to the input cell where you made your mistake and correct it in place. Otherwise, just copy the cell and correct the mistake in the copied cell:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">monMat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="s1">&#39;January FebruaryMarch   April   May     June    &#39;</span><span class="w"></span>
<span class="nv">monMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">January 
February
March   
April   
May     
June    
</span></div></div>
</div>
<p>As expected, the shape of <code class="docutils literal notranslate"><span class="pre">monMat</span></code> shows it is a matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">monMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">6 8
</span></div></div>
</div>
<p>Now, to enter the months as 6 words, one must type each word between quotes, and check that each closing quote is separated from the next opening quote by at least one blank (otherwise it would be interpreted as an apostrophe - remember, the juxtaposition of two quotes in a character string is used to enter a single quote):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">monVec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;January&#39;</span><span class="w"> </span><span class="s1">&#39;February&#39;</span><span class="w"> </span><span class="s1">&#39;March&#39;</span><span class="w"> </span><span class="s1">&#39;April&#39;</span><span class="w"> </span><span class="s1">&#39;May&#39;</span><span class="w"> </span><span class="s1">&#39;June&#39;</span><span class="w"></span>
<span class="nv">monVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───────┬────────┬─────┬─────┬───┬────┐
│January│February│March│April│May│June│
└───────┴────────┴─────┴─────┴───┴────┘
</span></div></div>
</div>
<p>This, on the other hand, is a vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">monVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">6
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">monVec</span></code> is a vector of a kind that we have not seen before, the items of which are 6 sub-arrays. This kind of an array is called a <em>nested array</em> and is the reason why we see those black boxes around the months.</p>
<p>Be patient! We shall study nested arrays very soon in this very chapter.</p>
</div>
</div>
<div class="section" id="indexing">
<span id="data-and-variables-indexing"></span><h2><span class="section-number">3.5. </span>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">#</a></h2>
<div class="section" id="traditional-vector-indexing">
<span id="data-and-variables-traditional-vector-indexing"></span><h3><span class="section-number">3.5.1. </span>Traditional Vector Indexing<a class="headerlink" href="#traditional-vector-indexing" title="Permalink to this headline">#</a></h3>
<p>Our variable <code class="docutils literal notranslate"><span class="pre">contents</span></code> contains the following items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12 56 78 74 85 96 30 22 44 66 82 27
</span></div></div>
</div>
<p>To extract one of these items, you just have to specify its position, or <em>index</em>, between <em>square brackets</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">78
</span></div></div>
</div>
<p>Of course, an index must follow some obvious rules: it must be an integer numeric value and it may not be negative or greater than the size of the vector, otherwise an <code class="docutils literal notranslate"><span class="pre">INDEX</span> <span class="pre">ERROR</span></code> will be reported.</p>
<p>It is possible to extract several items in a single operation, in any order, and you can even select the same item more than once:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">12</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">78 30 12 78 78 27
</span></div></div>
</div>
<p>The same notation allows you to modify one or more items of the vector. The only condition is that you must provide as many replacement values as the number of items you select, or give a single replacement value to use for all the selected items.</p>
<p>Below, we use three values to replace three items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12 7 78 11 85 80 30 22 44 66 82 27
</span></div></div>
</div>
<p>Now we provide a single value to replace three items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="sr">[</span><span class="m">8</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">9999</span><span class="w"></span>
<span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12 7 78 11 85 80 30 9999 44 66 9999 9999
</span></div></div>
</div>
<p>This works exactly the same on character vectors:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;COMPUTER&#39;</span><span class="sr">[</span><span class="m">8</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">REPORT
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">text</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;BREAD&#39;</span><span class="w"></span>
<span class="nv">text</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;LN&#39;</span><span class="w"></span>
<span class="nv">text</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">BLEND
</span></div></div>
</div>
</div>
<div class="section" id="the-shape-of-the-result">
<span id="data-and-variables-the-shape-of-the-result"></span><h3><span class="section-number">3.5.2. </span>The Shape of the Result<a class="headerlink" href="#the-shape-of-the-result" title="Permalink to this headline">#</a></h3>
<p>The index may be a numeric array of any shape: scalar, vector, matrix, or an array of higher rank. To understand what happens, there is a simple rule.</p>
<div class="tip admonition">
<p class="admonition-title">Rule</p>
<p>When a vector is indexed by an array, the result has exactly the <b><i>same shape</i></b> as the index array, as if each item of the index had been replaced by the item it designates.</p>
</div>
<p>This rule is easy to verify. Let us restore the initial values of <code class="docutils literal notranslate"><span class="pre">contents</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">56</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">85</span><span class="w"> </span><span class="m">96</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">82</span><span class="w"> </span><span class="m">27</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>And let us create a matrix of indices:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">myIndex</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w"></span>
<span class="nv">myIndex</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 5  5 4  4  8
 6 12 6 11 12
10  6 1  4  9
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="sr">[</span><span class="nv">myIndex</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">85 85 74 74 22
96 27 96 82 27
66 96 12 74 44
</span></div></div>
</div>
<p>For example, you can see that the index in row 2, column 5 was 12. So, it has been replaced by the 12th item of <code class="docutils literal notranslate"><span class="pre">contents</span></code>, i.e. 27.</p>
<p>The rule remains true if the indexed vector is a character vector. For example, imagine that we have a matrix named <code class="docutils literal notranslate"><span class="pre">planning</span></code>, in which some tasks are planned (1) or not (0) over the next 12 months:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕RL</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">73</span><span class="w"></span>
<span class="nv">planning</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">¯1</span><span class="o">+?</span><span class="m">5</span><span class="w"> </span><span class="m">12</span><span class="o">⍴</span><span class="m">2</span><span class="w"></span>
<span class="nv">planning</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 1 1 1 1 1 0 0 0 0 0 0
1 1 0 1 0 1 1 0 0 0 1 1
1 0 1 1 0 0 0 0 0 0 1 1
0 1 0 1 1 1 1 1 1 0 0 1
0 0 1 0 1 1 1 0 1 0 0 1
</span></div></div>
</div>
<p>This is not very easy to interpret! Let us replace the inactive periods by “<code class="docutils literal notranslate"><span class="pre">-</span></code>“, and the busy periods by “<code class="docutils literal notranslate"><span class="pre">⎕</span></code>”. This beautiful character, named <em>quad</em>, can be entered by pressing <kbd>APL</kbd>+<kbd>l</kbd>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;-⎕&#39;</span><span class="sr">[</span><span class="nv">planning</span><span class="o">+</span><span class="m">1</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">-⎕⎕⎕⎕⎕------
⎕⎕-⎕-⎕⎕---⎕⎕
⎕-⎕⎕------⎕⎕
-⎕-⎕⎕⎕⎕⎕⎕--⎕
--⎕-⎕⎕⎕-⎕--⎕
</span></div></div>
</div>
<p>Isn’t it magic?</p>
<p>Do you understand why we added 1 to <code class="docutils literal notranslate"><span class="pre">planning</span></code>? Of course, the vector to be indexed was composed of only 2 characters, so the set of indices had to be composed only from the values 1 and 2 and that is why we used <code class="docutils literal notranslate"><span class="pre">planning+1</span></code> to index.</p>
<p>All the 0’s in <code class="docutils literal notranslate"><span class="pre">planning</span></code> have been replaced by the 1st item (<code class="docutils literal notranslate"><span class="pre">-</span></code>), and all the 1’s have been replaced by the 2nd item (<code class="docutils literal notranslate"><span class="pre">⎕</span></code>).</p>
</div>
<div class="section" id="array-indexing">
<span id="data-and-variables-array-indexing"></span><h3><span class="section-number">3.5.3. </span>Array Indexing<a class="headerlink" href="#array-indexing" title="Permalink to this headline">#</a></h3>
<p>Just to make some experiments, let us create a new variable, named <code class="docutils literal notranslate"><span class="pre">tests</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕RL</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">73</span><span class="w"></span>
<span class="nv">tests</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">?</span><span class="m">6</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">100</span><span class="w"></span>
<span class="nv">tests</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">73  16 42
50   2 67
11  81 37
93 100 98
83  32 76
51  37 15
</span></div></div>
</div>
<p>Indexing an array is very similar to the method we saw for vectors, but we now need one index for the row and one for the column; they must be separated by a <em>semi-colon</em>. For example, to get (or replace) the value 55 in row 4, column 3, one types:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">4</span><span class="sr">;</span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">98
</span></div></div>
</div>
<p>It is of course possible to select more than one row and more than one column. If so, one obtains all the values situated at the intersections of the specified rows and columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">73 42
83 76
51 15
</span></div></div>
</div>
<p>The result of indexing may sometimes be surprising. Let us extract 4 values from the first column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">;</span><span class="m">1</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">73 50 83 51
</span></div></div>
</div>
<p>You probably expected the result to be displayed like a column? Really sorry!</p>
<p>The result of this expression is a vector, and a vector is always displayed as a row on the screen.</p>
<p>We shall see later that it is possible, using a little trick, to cause the result to be displayed vertically.</p>
<p>When you use indexing, you must specify as many indices or sets of indices as the array’s rank. For a 3D array, you must specify 3 sets of indices, separated by two semi-colons.</p>
<p>For example, suppose that we would like to extract the production of the 2nd assembly line, for the first 6 months of the last 2 years, from the array <code class="docutils literal notranslate"><span class="pre">prod</span></code>. Let’s express that in order of the 3 dimensions: Years/Lines/Months:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>What we want</p></th>
<th class="text-align:left head"><p>Relevant indices</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>The last 2 years</p></td>
<td class="text-align:left"><p>4 5</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>The second assembly line</p></td>
<td class="text-align:left"><p>2</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>The first 6 months</p></td>
<td class="text-align:left"><p>1 2 3 4 5 6</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="sr">;</span><span class="m">2</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 8 48 22 37 33  1
41  1 14 50 17 42
</span></div></div>
</div>
<p>The result above is a matrix: 2 (years) by 6 (months).</p>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>Because we can select rows and columns, the semi-colon is necessary to tell them apart.</p>
</div>
<p>For example, the indexing below gives rows 1 and 2, and column 3:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">;</span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">42 67
</span></div></div>
</div>
<p>whereas</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="sr">;</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">16 42
</span></div></div>
</div>
<p>gives row 1, and columns 2 and 3.</p>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>It is also possible to select several items which are not at the intersections of the same rows or columns. To do so requires a special notation where the individual row/column indices of each item are embedded in parentheses. The reason for this syntax will become clear later, in the <a class="reference internal" href="#data-and-variables-mixed-and-nested-arrays"><span class="std std-numref">Section 3.6</span></a>.</p>
</div>
<p>For example, let us select <code class="docutils literal notranslate"><span class="pre">tests[2;3]</span></code> together with <code class="docutils literal notranslate"><span class="pre">tests[5;1]</span></code> and <code class="docutils literal notranslate"><span class="pre">tests[1;2]</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">67 83 16
</span></div></div>
</div>
</div>
<div class="section" id="convention">
<span id="data-and-variables-convention"></span><h3><span class="section-number">3.5.4. </span>Convention<a class="headerlink" href="#convention" title="Permalink to this headline">#</a></h3>
<p>To specify <em>all</em> items of a dimension, you just omit the index for that dimension, but you must not omit the semi-colon attached to it.</p>
<p>In the previous example, to obtain both assembly lines we could have typed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">13 36 12 40 12 15
 8 48 22 37 33  1

38 31 24 40 23  7
41  1 14 50 17 42
</span></div></div>
</div>
<p>But it is shorter to type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="sr">;;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">13 36 12 40 12 15
 8 48 22 37 33  1

38 31 24 40 23  7
41  1 14 50 17 42
</span></div></div>
</div>
<p>The omitted index means “all the assembly lines”.</p>
<p>In the same way, omitting the last index means “all the months”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="sr">;</span><span class="m">2</span><span class="sr">;]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 8 48 22 37 33  1 39 30 50 50  8 35
41  1 14 50 17 42  6 35 12 48 30 29
</span></div></div>
</div>
<p>And finally, omitting the first and second indices means “all years and lines”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[;;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 9 16 42
34 19 32

29  5 45
46 20 47

37 19  5
39 23 41

13 36 12
 8 48 22

38 31 24
41  1 14
</span></div></div>
</div>
<p>This convention also applies to <em>replacing</em> specific items. For example, to change all the items in the last row of <code class="docutils literal notranslate"><span class="pre">tests</span></code>, we could type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">6</span><span class="sr">;]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="nv">tests</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">73  16 42
50   2 67
11  81 37
93 100 98
83  32 76
60  70 80
</span></div></div>
</div>
</div>
<div class="section" id="warnings">
<span id="data-and-variables-warnings"></span><h3><span class="section-number">3.5.5. </span>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">#</a></h3>
<p>We would like to draw your attention to some delicate details now.</p>
<div class="section" id="shape-compatibility">
<span id="data-and-variables-shape-compatibility"></span><h4><span class="section-number">3.5.5.1. </span>Shape Compatibility<a class="headerlink" href="#shape-compatibility" title="Permalink to this headline">#</a></h4>
<p>To replace several items in an array, the replacement array must have exactly the <strong>same shape</strong> as the array of indices they replace.</p>
<p>For example, suppose that we would like to replace the four “corners” of <code class="docutils literal notranslate"><span class="pre">tests</span></code> with the values 11, 22, 33, and 44, respectively.</p>
<p>We <strong>cannot</strong> successfully execute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">44</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LENGTH ERROR
      tests[1 6;1 3]←11 22 33 44
           ∧
</pre></div>
</div>
</div>
</div>
<p>Notice the <code class="docutils literal notranslate"><span class="pre">LENGTH</span> <span class="pre">ERROR</span></code> that was issued (note that this is a “<strong>shape</strong> error”).</p>
<p>If we had extracted these four values, the result would have been a 2 by 2 matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">73 42
60 80
</span></div></div>
</div>
<p>So, to replace them, we cannot use a vector, as we have just tried to do. Instead we must organise the replacement array into a 2 by 2 matrix, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">44</span><span class="w"></span>
<span class="nv">tests</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">11  16 22
50   2 67
11  81 37
93 100 98
83  32 76
33  70 44
</span></div></div>
</div>
<p>Notice the corners have the new values.</p>
</div>
<div class="section" id="replace-or-obtain-all-the-values">
<span id="data-and-variables-replace-or-obtain-all-the-values"></span><h4><span class="section-number">3.5.5.2. </span>Replace or Obtain All the Values<a class="headerlink" href="#replace-or-obtain-all-the-values" title="Permalink to this headline">#</a></h4>
<p>To replace <strong>all</strong> of the values in an array with a single value, it is necessary to use brackets in which the indices of all the dimensions have been removed.</p>
<p>For example, imagine that we would like to reset all the values of <code class="docutils literal notranslate"><span class="pre">tests</span></code> to zero.</p>
<p><code class="docutils literal notranslate"><span class="pre">tests</span> <span class="pre">←</span> <span class="pre">0</span></code> would be <strong>wrong</strong>, because that would replace the matrix by a scalar.</p>
<p>The correct solution is</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tests2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">tests</span><span class="w"></span>
<span class="nv">tests2</span><span class="sr">[;]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="nv">tests2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0
0 0 0
0 0 0
0 0 0
0 0 0
0 0 0
</span></div></div>
</div>
<p>For a vector, like <code class="docutils literal notranslate"><span class="pre">contents</span></code>, we would write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">contents</span><span class="sr">[]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">123</span><span class="w"></span>
<span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">123 123 123 123 123 123 123 123 123 123 123 123
</span></div></div>
</div>
<p>to replace all the items with 123.</p>
</div>
<div class="section" id="pass-through-value">
<span id="data-and-variables-pass-through-value"></span><h4><span class="section-number">3.5.5.3. </span>“Pass-Through” Value<a class="headerlink" href="#pass-through-value" title="Permalink to this headline">#</a></h4>
<p>Imagine that we have a vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">vec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">31</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>We replace some items and assign the result to another variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">vec</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">50</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>What do we get in <code class="docutils literal notranslate"><span class="pre">res</span></code>? Is it <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">←</span> <span class="pre">vec[2</span> <span class="pre">4</span> <span class="pre">6]</span></code>, or is it <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">←</span> <span class="pre">50</span></code>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">50
</span></div></div>
</div>
<p>In fact, we get <code class="docutils literal notranslate"><span class="pre">50</span></code>. We say that <code class="docutils literal notranslate"><span class="pre">50</span></code> is a <em>pass-through</em> value.</p>
</div>
</div>
<div class="section" id="the-index-function">
<span id="data-and-variables-the-index-function"></span><h3><span class="section-number">3.5.6. </span>The Index Function<a class="headerlink" href="#the-index-function" title="Permalink to this headline">#</a></h3>
<p>In APL, nearly all of the built-in functions (known as <em>primitive functions</em>) are represented by a single symbol: <code class="docutils literal notranslate"><span class="pre">+</span></code> <code class="docutils literal notranslate"><span class="pre">×</span></code> <code class="docutils literal notranslate"><span class="pre">⍴</span></code> <code class="docutils literal notranslate"><span class="pre">÷</span></code> etc. Bracket indexing, as we introduced above, is an exception: it is represented by two non-contiguous symbols, <code class="docutils literal notranslate"><span class="pre">[</span></code> and <code class="docutils literal notranslate"><span class="pre">]</span></code>. This is one of the reasons why modern versions of APL also include an <em>index</em> function.</p>
<p>It is represented by the symbol <code class="docutils literal notranslate"><span class="pre">⌷</span></code>. <strong>Beware</strong>: this is <strong>not</strong> the symbol <em>quad</em> used in our planning example a few pages ago! In fact, it looks like a <em>quad</em> which has been <em>squished</em>, hence its name: <em>squish-quad</em>, or <em>squad</em> for short. The <em>squad</em> is obtained with <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>L</kbd>. When applied to a vector, <em>index</em> takes a single number on its left:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="o">⌷</span><span class="w"> </span><span class="nv">contents</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">123
</span></div></div>
</div>
<p>The above is equivalent to <code class="docutils literal notranslate"><span class="pre">contents[3]</span></code>.</p>
<p>For now, we shall not try to extract more than one item from a vector; we need additional knowledge to do that.</p>
<p>For a matrix, <em>index</em> takes a pair of values (row/column) on its left.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⌷</span><span class="w"> </span><span class="nv">tests</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">100
</span></div></div>
</div>
<p>The above is equivalent to <code class="docutils literal notranslate"><span class="pre">tests[4;2]</span></code>.</p>
<p>It is possible to select several rows and several columns, using a special notation that will be explained in subsequent sections. The left argument of <em>Index</em> is now made of a list of rows followed by a list of columns, both parenthesised:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">⌷</span><span class="nv">tests</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">11 22
11 37
33 44
</span></div></div>
</div>
<p>This is equivalent to <code class="docutils literal notranslate"><span class="pre">tests[1</span> <span class="pre">3</span> <span class="pre">6;1</span> <span class="pre">3]</span></code>.</p>
</div>
<div class="section" id="even-more-indexing">
<span id="data-and-variables-even-more-indexing"></span><h3><span class="section-number">3.5.7. </span>Even More Indexing<a class="headerlink" href="#even-more-indexing" title="Permalink to this headline">#</a></h3>
<p>APL provides other syntaxes and functions that allow you to index into arrays.
They will be introduced later in <a class="reference internal" href="Nested-Arrays-Continued.html#nested-arrays-continued-choose-indexing"><span class="std std-numref">Section 10.2</span></a>, <a class="reference internal" href="Nested-Arrays-Continued.html#nested-arrays-continued-reach-indexing"><span class="std std-numref">Section 10.11</span></a>, and <a class="reference internal" href="Nested-Arrays-Continued.html#nested-arrays-continued-pick"><span class="std std-numref">Section 10.10</span></a>.
You do not need to rush to those sections to learn about this right now, this is only to let you know that you will learn more techniques when the time comes.</p>
</div>
</div>
<div class="section" id="mixed-and-nested-arrays">
<span id="data-and-variables-mixed-and-nested-arrays"></span><h2><span class="section-number">3.6. </span>Mixed and Nested Arrays<a class="headerlink" href="#mixed-and-nested-arrays" title="Permalink to this headline">#</a></h2>
<p>Up to now we have dealt only with homogeneous arrays: scalars, vectors or higher rank arrays containing only numbers or only characters. An array was a collection of what we call <em>simple</em> scalars. In the early 1980’s enhanced versions of APL started to appear. They accepted a mixture of numbers and characters within the same array (so-called <em>mixed arrays</em>), and arrays could contain sub-arrays as items (so-called <em>nested arrays</em>).</p>
<p>In this chapter, we shall explore only some basic properties of <em>mixed</em> and <em>nested arrays</em>, just to help you understand what might otherwise appear to be unusual behaviour or unexpected error messages. We shall not go any further for now; the <a class="reference internal" href="Nested-Arrays-Continued.html"><span class="doc std std-doc">“Nested Arrays (continued)” chapter</span></a> will be entirely dedicated to an extensive study of nested arrays.</p>
<p>Note that with the current widespread use of <em>nested arrays</em>, it is now very common to refer to an “old-fashioned” array that is not <em>nested</em> as a <em>simple array</em>.</p>
<div class="section" id="mixed-arrays">
<span id="data-and-variables-mixed-arrays"></span><h3><span class="section-number">3.6.1. </span>Mixed Arrays<a class="headerlink" href="#mixed-arrays" title="Permalink to this headline">#</a></h3>
<p>An array is described as a <em>mixed array</em> if it contains a mixture of scalar numbers and scalar characters.</p>
<p>It is easy to create such an array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mixVec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="s1">&#39;K&#39;</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="w"> </span><span class="s1">&#39;g&#39;</span><span class="w"> </span><span class="m">46.3</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">mixVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">9
</span></div></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">mixVec</span></code> is a vector. Check how it looks like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mixVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">44 87 K 12 29 Bag 46.3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mixMat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="nv">mixVec</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">mixMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 5
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mixMat</span></code> is a matrix and looks like</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mixMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">44 87 K 12   29
 B  a g 46.3 44
</span></div></div>
</div>
</div>
<div class="section" id="four-important-remarks">
<span id="data-and-variables-four-important-remarks"></span><h3><span class="section-number">3.6.2. </span>Four Important Remarks<a class="headerlink" href="#four-important-remarks" title="Permalink to this headline">#</a></h3>
<ol class="simple">
<li><p>In a vector like <code class="docutils literal notranslate"><span class="pre">mixVec</span></code>, each letter must be entered as a scalar: embedded within quotes, and separated from the next one by at least one blank space.</p></li>
</ol>
<p>If the space is omitted, for example, if we type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;B&#39;&#39;a&#39;&#39;g&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">B'a'g
</span></div></div>
</div>
<p>APL interprets the doubled quotes as apostrophes, which yields <code class="docutils literal notranslate"><span class="pre">B'a'g</span></code>. This is not a sequence of 3 scalars, but a 5-item vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="w"> </span><span class="s1">&#39;B&#39;&#39;a&#39;&#39;g&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5
</span></div></div>
</div>
<p>If we insert the proper spacing, we get a vector with 3 items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="w"> </span><span class="s1">&#39;g&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<ol class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">mixVec</span></code> is displayed (see above), the three letters <code class="docutils literal notranslate"><span class="pre">Bag</span></code> are joined together, like the letters in any vector of characters.</p></li>
</ol>
<p>This presentation might be confused with an array of 7 items, whose 6th item is the vector <code class="docutils literal notranslate"><span class="pre">'Bag'</span></code>. That would be a <em>nested array</em>. We will soon learn how to investigate the structure of an array.</p>
<ol class="simple">
<li><p>This confusion disappears in <code class="docutils literal notranslate"><span class="pre">mixMat</span></code>. Because the items of the matrix must be aligned in columns, “B” is placed under 44, “a” under 87, and “g” under “K”. Here you can easily see that the three letters <code class="docutils literal notranslate"><span class="pre">Bag</span></code> are really three independent scalars.</p></li>
<li><p>A <em>mixed</em> array is made up only of simple scalars (numbers or characters); <strong>it is not</strong> a <em>nested array</em>.</p></li>
</ol>
</div>
<div class="section" id="nested-arrays">
<span id="data-and-variables-nested-arrays"></span><h3><span class="section-number">3.6.3. </span>Nested Arrays<a class="headerlink" href="#nested-arrays" title="Permalink to this headline">#</a></h3>
<p>An array is said to be <em>generalised</em> or <em>nested</em> when one or more of its items are not <em>simple</em> scalars, but are scalars which contain other arrays. The latter may be simple arrays of any shape or rank (vectors, matrices, arrays), or they may themselves be <em>nested arrays</em>.</p>
<p>A nested array can be created in a number of ways; we shall begin with the simplest one, known as <em>vector notation</em>, or <em>strand notation</em>. In strand notation, the items of an array are just juxtaposed side by side, and each can be identified as an item because it is:</p>
<ul class="simple">
<li><p>either separated from its neighbours by <strong>blanks</strong>;</p></li>
<li><p>embedded within <strong>quotes</strong>;</p></li>
<li><p>an expression embedded within <strong>parentheses</strong>; or</p></li>
<li><p>a <strong>variable name</strong>.</p></li>
</ul>
<p>Just to demonstrate how it works, let us create a nested vector and a nested matrix.</p>
<p>We start with two simple arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">one</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="nv">two</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;Hello&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Which will now be used to create more involved arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nesVec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="s1">&#39;John&#39;</span><span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="p">(</span><span class="m">78</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">23</span><span class="p">)</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="m">69</span><span class="w"></span>
<span class="o">≢</span><span class="nv">nesVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8
</span></div></div>
</div>
<p>The length of <code class="docutils literal notranslate"><span class="pre">nesVec</span></code> is 8 because we have juxtaposed 8 items.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nesVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──┬──┬────┬──┬────────┬──┬───┬──┐
│87│24│John│51│78 45 23│95│8 6│69│
│  │  │    │  │        │  │2 4│  │
└──┴──┴────┴──┴────────┴──┴───┴──┘
</span></div></div>
</div>
<p>The Jupyter notebook puts boxes around the items of the vector to make it easier to interpret the result. If the expression above were to be run in the Dyalog APL interpreter session, the result would be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">87</span> <span class="mi">24</span>  <span class="n">John</span>  <span class="mi">51</span>  <span class="mi">78</span> <span class="mi">45</span> <span class="mi">23</span>  <span class="mi">95</span>  <span class="mi">8</span> <span class="mi">6</span>  <span class="mi">69</span>
                               <span class="mi">2</span> <span class="mi">4</span>    
</pre></div>
</div>
<p>which is a bit difficult to read and interpret.</p>
<p>And now, a matrix!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nesMat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="s1">&#39;Dyalog&#39;</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────┬───┬─────┐
│Dyalog│44 │Hello│
├──────┼───┼─────┤
│27    │8 6│1 2 0│
│      │2 4│0 0 5│
└──────┴───┴─────┘
</span></div></div>
</div>
<p>Again, the notebook boxes the items of the matrix so we have an easier time interpreting the result. In the interpreter session the output would be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Dyalog</span>   <span class="mi">44</span>  <span class="n">Hello</span> 
     <span class="mi">27</span>  <span class="mi">8</span> <span class="mi">6</span>  <span class="mi">1</span> <span class="mi">2</span> <span class="mi">0</span> 
         <span class="mi">2</span> <span class="mi">4</span>  <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span> 
</pre></div>
</div>
<p>To obtain this kind of boxed presentation in the interpreter session, execute the following command (remember that a command begins by a closing parenthesis):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">Util</span><span class="w"> </span><span class="nv">DISP</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">C:\Program Files\Dyalog\Dyalog APL-64 18.2 Unicode\ws\Util.dws saved Fri Mar 18 10:04:24 2022
</span></div></div>
</div>
<p>Then execute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISP</span><span class="w"> </span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────┬───┬─────┐
│Dyalog│44 │Hello│
├──────┼───┼─────┤
│  27  │8 6│1 2 0│
│      │2 4│0 0 5│
└──────┴───┴─────┘
</span></div></div>
</div>
<p>If you want this kind of boxing to be permanent, you can go to your session and type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="nv">ON</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON
</span></div></div>
</div>
<p>which, on your interpreter session, should actually print <code class="docutils literal notranslate"><span class="pre">Was</span> <span class="pre">OFF</span></code>, meaning that automatic boxing of nested arrays was OFF and <em>now</em> is ON. Because Jupyter notebooks have this option ON by default, typing <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">ON</span></code> tells the option was already ON.</p>
<p>For demonstration purposes, we will turn the automatic boxing OFF to compare the results of viewing <code class="docutils literal notranslate"><span class="pre">nesMat</span></code> without having to use the <code class="docutils literal notranslate"><span class="pre">DISP</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────┬───┬─────┐
│Dyalog│44 │Hello│
├──────┼───┼─────┤
│27    │8 6│1 2 0│
│      │2 4│0 0 5│
└──────┴───┴─────┘
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="nv">OFF</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> Dyalog   44  Hello 
     27  8 6  1 2 0 
         2 4  0 0 5 
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISP</span><span class="w"> </span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────┬───┬─────┐
│Dyalog│44 │Hello│
├──────┼───┼─────┤
│  27  │8 6│1 2 0│
│      │2 4│0 0 5│
└──────┴───┴─────┘
</span></div></div>
</div>
<p>You probably remember the mixed vector <code class="docutils literal notranslate"><span class="pre">mixVec</span></code>, which contained three adjacent scalars, “B”, “a”, and “g”. Let us compare the <em>unboxed</em> display of <code class="docutils literal notranslate"><span class="pre">mixVec</span></code> with a seven item nested vector, whose sixth item contains the word “Bag”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">44</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="s1">&#39;K&#39;</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="s1">&#39;Bag&#39;</span><span class="w"> </span><span class="m">46.3</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">44 87 K 12 29  Bag  46.3
</span></div></div>
</div>
<p>Now we look at <code class="docutils literal notranslate"><span class="pre">mixVec</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mixVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">44 87 K 12 29 Bag 46.3
</span></div></div>
</div>
<p>If you look closely you will have observed that, in the nested array, the sub-vector <code class="docutils literal notranslate"><span class="pre">Bag</span></code> is separated from its neighbours not by a single space, but by two spaces: this should alert an experienced APLer that it is a nested array. However, this difference is so small that the APL community, all over the world, uses a utility program, named <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code>, to draw boxes around arrays (nested or not) to make things clear. Let us examine it in the next section.</p>
<p>Notice that because <code class="docutils literal notranslate"><span class="pre">mixVec</span></code> is <strong>not</strong> nested it has no boxes around its items.</p>
</div>
<div class="section" id="display">
<span id="data-and-variables-display"></span><h3><span class="section-number">3.6.4. </span>DISPLAY<a class="headerlink" href="#display" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> is provided with Dyalog APL in a library workspace which itself is named <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code>. Because this library is by default on the <em>Workspace Search Path</em> of APL, you can easily add the DISPLAY function to your active workspace by typing the command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">DISPLAY</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">C:\Program Files\Dyalog\Dyalog APL-64 18.2 Unicode\ws\DISPLAY.dws saved Fri Mar 18 10:04:14 2022
</span></div></div>
</div>
<p>This command copies the entire <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> workspace into your current session, but it contains only one single function: <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code>.</p>
<p>As you can see, applied to a simple scalar, <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> already produces slight differences:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">37</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">37
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">37</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  
37

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;K&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">K
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="s1">&#39;K&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 
K
-
</span></div></div>
</div>
<p>We see that the display results are centered in a three row area; for numerical simple scalars the top and bottom rows are empty, which creates the white region around the <code class="docutils literal notranslate"><span class="pre">37</span></code> you can see above. For character simple scalars, the bottom row underlines the character and the top row is left empty.</p>
<p>However, applied to a vector, <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> will provide more information:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">73</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────┐
│54 73 19│
└~───────┘
</span></div></div>
</div>
<p>In the example above we can see that the default presentation uses line-drawing characters to draw the box. This means in the Windows IDE, in RIDE, and in the Jupyter notebooks you should see a continuous frame around the vector. However, if you are reading this book online the framing might look “broken”.</p>
<p>The second, rougher, form of presentation is provided for use in circumstances where the line-drawing symbols in the APL font are not displayed or printed as intended. This will depend upon your version of the Operating System and on the display and printer drivers you are using.</p>
<div class="section" id="conventions">
<span id="data-and-variables-conventions"></span><h4><span class="section-number">3.6.4.1. </span>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">#</a></h4>
<p>The upper-left corner of the box provides information about the <em>shape</em> of the displayed value:</p>
<ul class="simple">
<li><p>a single horizontal arrow for a vector;</p></li>
<li><p>two (or more) arrows for a matrix or higher rank arrays; and</p></li>
<li><p>no arrow at all for scalars containing nested values (a concept we haven’t seen up to now).</p></li>
</ul>
<p>The bottom-left corner of the box provides information about the <em>contents</em> of the array:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code> means that the array contains only numeric values;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code> (which actually goes unnoticed) means that the array contains only characters;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code> is used for mixed arrays; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">∊</span></code> means that the array contains other arrays: it is a nested array.</p></li>
</ul>
</div>
<div class="section" id="examples">
<span id="data-and-variables-examples"></span><h4><span class="section-number">3.6.4.2. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>numeric (<code class="docutils literal notranslate"><span class="pre">~</span></code>) vector (<code class="docutils literal notranslate"><span class="pre">→</span></code>):</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">12</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────┐
│78 45 12│
└~───────┘
</span></div></div>
</div>
<ul class="simple">
<li><p>matrix (<code class="docutils literal notranslate"><span class="pre">→</span></code> <code class="docutils literal notranslate"><span class="pre">→</span></code>); because of its two arrows, this matrix cannot be confused with the vector shown above.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">12</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────┐
↓78 45 12│
└~───────┘
</span></div></div>
</div>
<ul class="simple">
<li><p>character (<code class="docutils literal notranslate"><span class="pre">-</span></code>) matrix (<code class="docutils literal notranslate"><span class="pre">→</span></code> <code class="docutils literal notranslate"><span class="pre">→</span></code>); because of the line-drawing characters, the bottom-left corner of this matrix looks like it doesn’t even have information on the type of the values the matrix contains.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="s1">&#39;Sunny Summer&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─────┐
↓Sunny │
│Summer│
└──────┘
</span></div></div>
</div>
<ul class="simple">
<li><p>numeric (<code class="docutils literal notranslate"><span class="pre">~</span></code>) array with three dimensions (<code class="docutils literal notranslate"><span class="pre">→</span></code> <code class="docutils literal notranslate"><span class="pre">→</span></code> <code class="docutils literal notranslate"><span class="pre">→</span></code>):</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="nv">prod</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">;;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→───────┐
↓↓ 9 42  2│
││34 32 37│
││        │
││29 45 27│
││46 47 18│
└└~───────┘
</span></div></div>
</div>
<p>Mixed arrays are sometimes more complex to understand. For example, here is a</p>
<ul class="simple">
<li><p>mixed (<code class="docutils literal notranslate"><span class="pre">+</span></code>) vector (<code class="docutils literal notranslate"><span class="pre">→</span></code>):</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="s1">&#39;G&#39;</span><span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="s1">&#39;U&#39;</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─────────────┐
│54 G 61 U 7 19│
└+─────────────┘
</span></div></div>
</div>
<p>Here is another vector with the same <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> structure, but where the type of each item is harder to identify:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="s1">&#39;G&#39;</span><span class="w"> </span><span class="s1">&#39;U&#39;</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─────────────┐
│54 3 GU 7 3 19│
└+─────────────┘
</span></div></div>
</div>
<p>Note that in the example above it is impossible to distinguish between the numeric value <code class="docutils literal notranslate"><span class="pre">3</span></code> and the character value <code class="docutils literal notranslate"><span class="pre">'3'</span></code>. The <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> function actually tries to help us by underlining all character values, but unfortunately this coincides with the bottom border of the box. When the array being displayed becomes more complex, you will see this underlining, as the next example shows.</p>
<p>The two adjacent scalars <code class="docutils literal notranslate"><span class="pre">'G'</span></code> and <code class="docutils literal notranslate"><span class="pre">'U'</span></code> are displayed side by side; a vector <code class="docutils literal notranslate"><span class="pre">'GU'</span></code> would have given a nested array, with a different representation, as you can see below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="s1">&#39;GU&#39;</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─────────────────┐
│      ┌→─┐        │
│ 54 3 │GU│ 7 3 19 │
│      └──┘   -    │
└∊─────────────────┘
</span></div></div>
</div>
<p>Notice that, because one of the items of this array contains a vector, the array is <em>nested</em>, hence the <code class="docutils literal notranslate"><span class="pre">∊</span></code> sign at the bottom-left corner. Now the underlining of <code class="docutils literal notranslate"><span class="pre">'3'</span></code> is visible, so it is easy to see that it is a character. Since <code class="docutils literal notranslate"><span class="pre">7</span></code> is not underlined it is a number.</p>
<p>We shall discover more about <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> in <code class="xref std std-numref docutils literal notranslate"><span class="pre">Nested-Arrays-Continued-More-About-DISPLAY</span></code> when we study nested arrays in detail, but we can already use it to show the structure of the arrays that we have been working with. For example, our nested matrix <code class="docutils literal notranslate"><span class="pre">nesMat</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────────────────────┐
↓ ┌→─────┐       ┌→────┐ │
│ │Dyalog│ 44    │Hello│ │
│ └──────┘       └─────┘ │
│          ┌→──┐ ┌→────┐ │
│ 27       ↓8 6│ ↓1 2 0│ │
│          │2 4│ │0 0 5│ │
│          └~──┘ └~────┘ │
└∊───────────────────────┘
</span></div></div>
</div>
<p>You can see that all the sub-arrays contained in <code class="docutils literal notranslate"><span class="pre">nesMat</span></code> are individually represented with the same conventions, making the interpretation easy.</p>
</div>
</div>
<div class="section" id="be-simple">
<span id="data-and-variables-be-simple"></span><h3><span class="section-number">3.6.5. </span>Be Simple!<a class="headerlink" href="#be-simple" title="Permalink to this headline">#</a></h3>
<p>Up to now, the nested arrays we have met contained only “simple” items (scalars, vectors, matrices). Here is a completely weird matrix, which itself contains a small nested array made of the first two columns of <code class="docutils literal notranslate"><span class="pre">nesMat</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">weird</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">456</span><span class="w"> </span><span class="p">(</span><span class="nv">nesMat</span><span class="sr">[;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">17</span><span class="w"> </span><span class="m">51</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Twisted&#39;</span><span class="w"></span>
<span class="nv">weird</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   456   Dyalog   44  
             27  8 6  
                 2 4  
 17 51  Twisted       
</span></div></div>
</div>
<p>Notice how the default presentation makes it difficult to interpret the contents of <code class="docutils literal notranslate"><span class="pre">weird</span></code>. We can use <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> to make things clearer:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="nv">weird</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────────────────────────┐
↓         ┌→───────────────┐ │
│ 456     ↓ ┌→─────┐       │ │
│         │ │Dyalog│ 44    │ │
│         │ └──────┘       │ │
│         │          ┌→──┐ │ │
│         │ 27       ↓8 6│ │ │
│         │          │2 4│ │ │
│         │          └~──┘ │ │
│         └∊───────────────┘ │
│ ┌→────┐ ┌→──────┐          │
│ │17 51│ │Twisted│          │
│ └~────┘ └───────┘          │
└∊───────────────────────────┘
</span></div></div>
</div>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>Of course, even if APL <strong>can</strong> handle arrays as unusual as the one above, it is <strong>not advisable</strong> to build such arrays! Most nested arrays have a clear and straightforward structure.</p>
</div>
<p>Remember that earlier we had a list of month names to store, and we had the choice between storing them in a matrix or in a vector of vectors (that is to say, a nested vector).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">monVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> January  February  March  April  May  June 
</span></div></div>
</div>
<p>Because its contents are homogeneous (made up only of vectors), this array has a simple structure that is clear and easy to interpret. <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> shows it like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="nv">monVec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────────────────────────────────────────────────┐
│ ┌→──────┐ ┌→───────┐ ┌→────┐ ┌→────┐ ┌→──┐ ┌→───┐ │
│ │January│ │February│ │March│ │April│ │May│ │June│ │
│ └───────┘ └────────┘ └─────┘ └─────┘ └───┘ └────┘ │
└∊──────────────────────────────────────────────────┘
</span></div></div>
</div>
<p>Imagine now that we want to store the ages of the children of five families; we could enter them like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">children</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">35</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">21</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">7</span><span class="w"> </span><span class="m">7</span><span class="p">)</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="m">19</span><span class="w"> </span><span class="m">14</span><span class="p">)</span><span class="w"></span>
<span class="nv">children</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 6 2  35 33 26 21  7 7  3  19 14 
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">DISPLAY</span><span class="w"> </span><span class="nv">children</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→────────────────────────────────────┐
│ ┌→──┐ ┌→──────────┐ ┌→──┐   ┌→────┐ │
│ │6 2│ │35 33 26 21│ │7 7│ 3 │19 14│ │
│ └~──┘ └~──────────┘ └~──┘   └~────┘ │
└∊────────────────────────────────────┘
</span></div></div>
</div>
<p>This array is not homogeneous; it is made of vectors mixed with a scalar. However, its structure is simple, and consistent. Together with the previous example, it is a pertinent usage of nested arrays.</p>
</div>
<div class="section" id="that-s-not-all-folks">
<span id="data-and-variables-thats-not-all-folks"></span><h3><span class="section-number">3.6.6. </span>That’s <em>Not</em> All, Folks!<a class="headerlink" href="#that-s-not-all-folks" title="Permalink to this headline">#</a></h3>
<p>In this section we have only described some basic things about nested arrays. APL provides a number of functions designed specifically to manipulate nested arrays, but it would be premature to introduce these now until we have fully explored all of the basic capabilities.
Nevertheless, if you want to learn a bit more on the subject, just skip to <a class="reference internal" href="Nested-Arrays-Continued.html"><span class="doc std std-doc">the chapter on nested arrays</span></a>.</p>
</div>
</div>
<div class="section" id="empty-arrays">
<span id="data-and-variables-empty-arrays"></span><h2><span class="section-number">3.7. </span>Empty Arrays<a class="headerlink" href="#empty-arrays" title="Permalink to this headline">#</a></h2>
<p>An array is an <em>empty array</em> if the length of one or more of its dimensions is zero. Hence, it is possible to meet many different kinds of empty arrays: vectors, matrices, arrays of any rank or type.</p>
<p>Here are some examples:</p>
<ul class="simple">
<li><p>empty numeric vector:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<ul class="simple">
<li><p>empty numeric vector (because nothing was typed between the quotes):</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<p>However, the following is <strong>not</strong> an empty vector, given that we typed a blank character. Though invisible, it is a character just like <code class="docutils literal notranslate"><span class="pre">'B'</span></code> or <code class="docutils literal notranslate"><span class="pre">'z'</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 
</span></div></div>
</div>
<ul class="simple">
<li><p>empty character matrix with 0 rows and 3 columns:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">&#39;&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>empty numeric matrix with 5 rows and 0 columns:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">




</span></div></div>
</div>
<p>Notice how the empty vector with 5 rows (but 0 columns) took up more vertical space than the empty vector with 0 rows (and 3 columns).</p>
<ul class="simple">
<li><p>empty numeric array of rank 3:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">7</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">             

</span></div></div>
</div>
<p>There are many ways to create empty arrays, as we shall discover in the following chapters.</p>
<p>We shall see later that empty arrays, which you may find surprising, are extremely useful in solving a large number of business problems. In fact, they are often used as the starting point (initial value) for variables that will grow by the iterative addition of new items.</p>
<p>The empty numeric vector is probably the most frequently used of all empty arrays. For that reason, a special symbol has been designed to represent it: <code class="docutils literal notranslate"><span class="pre">⍬</span></code> (entered by pressing <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>]</kbd>).
Because this symbol is made of a zero with a tilde on top of it, it is called <em>zilde</em>.</p>
<p>Let us conclude this topic with a rather comforting statement. We start with an empty vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">emptiness</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="no">⍬</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Now we create a text vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">presence</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;Friendly&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>We then give <code class="docutils literal notranslate"><span class="pre">presence</span></code> the shape of <code class="docutils literal notranslate"><span class="pre">emptiness</span></code>…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">emptiness</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="nv">presence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">F
</span></div></div>
</div>
<p>And it works!</p>
<p>This proves that a friendly presence can fill up emptiness! That’s good! But can we explain it? Let’s try…</p>
<p>In the last expression, the <em>reshape</em> function (<code class="docutils literal notranslate"><span class="pre">⍴</span></code>) returns an array with the shape specified in its left argument <code class="docutils literal notranslate"><span class="pre">emptiness</span></code>.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">emptiness</span></code> is an empty vector (<code class="docutils literal notranslate"><span class="pre">⍬</span></code>), <em>reshape</em> will return an array having an empty shape. Such an array is a scalar, so we know that the result of the expression will be a scalar.</p>
<p><em>Reshape</em> will also fill the scalar with a value, taken from the right argument <code class="docutils literal notranslate"><span class="pre">presence</span></code>. <code class="docutils literal notranslate"><span class="pre">presence</span></code> contains the character vector <code class="docutils literal notranslate"><span class="pre">'Friendly'</span></code>, but since we only need one item to fill a scalar, we can only use the <code class="docutils literal notranslate"><span class="pre">'F'</span></code>. The rest of the character vector <code class="docutils literal notranslate"><span class="pre">'Friendly'</span></code> is not used.</p>
<p>In fact, the expression <code class="docutils literal notranslate"><span class="pre">⍬⍴array</span></code> is widely used to return the first item of an array as a scalar, and in particular to convert a 1-item vector into a scalar.</p>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>Though they both are invisible when displayed, a numeric empty vector (<code class="docutils literal notranslate"><span class="pre">⍬</span></code>) is different from a character empty vector (<code class="docutils literal notranslate"><span class="pre">''</span></code>).</p>
</div>
</div>
<div class="section" id="workspaces-and-commands">
<span id="data-and-variables-workspaces-and-commands"></span><h2><span class="section-number">3.8. </span>Workspaces and Commands<a class="headerlink" href="#workspaces-and-commands" title="Permalink to this headline">#</a></h2>
<p>You have nearly finished this chapter and, naturally, you would like to save the variables you have created. If you are using the Windows IDE you have two graphical ways of doing so:</p>
<ul class="simple">
<li><p>in the “File” menu, select “Save” or “Save as”, and use the normal procedure for saving a file (highlighted in red below); or</p></li>
<li><p>you can click, in the toolbar, on the icon of a diskette (also highlighted in red below; who still knows what a diskette is?), which is equivalent, in APL, to “Save as”.</p></li>
</ul>
<div class="figure align-default" id="interpreter-toolbar-save">
<span id="fig-interpreter-toolbar-save"></span><img alt="_images/Interpreter_Toolbar_Save.png" src="_images/Interpreter_Toolbar_Save.png" />
<p class="caption"><span class="caption-number">Fig. 3.2 </span><span class="caption-text">Windows IDE toolbar with the “Save” toolbar shortcut and the “File” menu highlighted.</span><a class="headerlink" href="#interpreter-toolbar-save" title="Permalink to this image">#</a></p>
</div>
<p>If you are using RIDE or if you don’t like clicking menu buttons,</p>
<ul class="simple">
<li><p>there is also a built-in method in APL, which may be activated through a special save command or function, as will be described later in this Section.</p></li>
</ul>
<p>An explanation of how APL manages your data in the interpreter session is given below.</p>
<div class="section" id="the-active-workspace">
<span id="data-and-variables-the-active-workspace"></span><h3><span class="section-number">3.8.1. </span>The Active Workspace<a class="headerlink" href="#the-active-workspace" title="Permalink to this headline">#</a></h3>
<p>When you start a working session with APL, you are allotted an empty portion of memory, which is called a <em>workspace</em>, or <em>WS</em> for short. This WS is called the <em>active WS</em>, because it is the area of memory in which you work. You gradually fill it with variables and functions<sup>2</sup> as you create them.</p>
<p><small>² In APL we try to design a computer <em>program</em>, not as a single monolithic procedure, but rather as a set of inter-connecting units known as <em>functions</em> (or <em>user-defined functions</em> to distinguish them from <em>primitive</em> or built-in functions). Each function is ideally small, self-contained, and performs a single specific task.</small></p>
<p>You can ask the system to give you the list of your variables and functions. To do that, you use a <em>system command</em>: a special word which is recognised by the APL system because its first character is a <em>closing parenthesis</em>: <code class="docutils literal notranslate"><span class="pre">)</span></code>. Some Swedish APLers call that a “banana”.</p>
<p>The names of system commands are not case sensitive; they can be typed in mixture of upper and lower-case characters.</p>
<p>Let’s obtain a list of our variable names, using the command <code class="docutils literal notranslate"><span class="pre">)vars</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">vars</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Bétise_à_Caimbrai       Fly⍙Airlines    Hote273 My_car_is_green amount  bernard bignum  children        colette contents
damned  discount        emptiness       g       h       hundred j       length  line    m       mixMat  mixVec  monMat  
monVec  money   myIndex nesMat  nesVec  now     one     planning        presence        prod    purchased       res     
sales   shape   singleton       tests   tests2  text    trailer two     v       vec     weird   years   ∆x      
</span></div></div>
</div>
<p>The variables are listed in alphabetic order, but beware, the lower-case alphabet is ordered after the upper-case one.</p>
<p>If some of these variables are no longer useful, we can delete them with the following command, in which the variable (and function) names can be listed in any order:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">erase</span><span class="w"> </span><span class="nv">tests</span><span class="w"> </span><span class="nv">contents</span><span class="w"> </span><span class="nv">nesmat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">not found nesmat
</span></div></div>
</div>
<p>We misspelled the name of one of our variables; the system erased the other ones, and gave us a warning. We can re-issue a command to erase the variable <code class="docutils literal notranslate"><span class="pre">nesMat</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">erase</span><span class="w"> </span><span class="nv">nesMat</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>This example underlines the fact that although the command <em>name</em> (“erase”) itself is not case sensitive, the names that it is instructed to work on are of course still case sensitive.</p>
<p>If you had developed functions, you could list them using the command <code class="docutils literal notranslate"><span class="pre">)fns</span></code> (pronounced “funs”):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">fns</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">DISP    DISPLAY 
</span></div></div>
</div>
<p>Because we developed no functions we only see the functions we loaded earlier on.</p>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>One can erase everything from the active workspace (all variables and all functions etc.) and revert to the original “clear” active workspace, by issuing the command <code class="docutils literal notranslate"><span class="pre">)clear</span></code>.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">clear</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">clear ws
</span></div></div>
</div>
<p>Now all variables are gone:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">vars</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>and so are all the functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">fns</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>This is a bit brutal: all of the contents of the WS are deleted, and no warning message is issued to notify the user of the consequence before the execution of the command. You should avoid using this command, and instead use the “Clear” button on the interpreter toolbar (highlighted in red below), which asks for confirmation. It is safer.</p>
<div class="figure align-default" id="interpreter-toolbar-clear">
<span id="fig-interpreter-toolbar-clear"></span><img alt="_images/Interpreter_Toolbar_Clear.png" src="_images/Interpreter_Toolbar_Clear.png" />
<p class="caption"><span class="caption-number">Fig. 3.3 </span><span class="caption-text">Windows IDE with the “Clear” toolbar shortcut highlighted.</span><a class="headerlink" href="#interpreter-toolbar-clear" title="Permalink to this image">#</a></p>
</div>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>In many languages, programs must be stored (saved) independently, one after the other, and variables do not exist on their own: they live only during the execution of a program which creates, uses and destroys them.</p>
<p>In APL, things are different:</p>
<ul class="simple">
<li><p>variables can have an independent existence, outside of any program execution; you have seen that it is possible to create variables and manipulate them, at will, without writing any programs. This is similar to the interpreter sessions of some other languages, like Python or MATLAB; and</p></li>
<li><p>there may be a permanent interaction between programs and variables. Saving only any part of them would be nonsense: one must save the whole context; in other words, one must save the whole <em>active workspace</em>.</p></li>
</ul>
<p>This is what we shall discover now.</p>
</div>
</div>
<div class="section" id="the-libraries">
<span id="data-and-variables-the-libraries"></span><h3><span class="section-number">3.8.2. </span>The Libraries<a class="headerlink" href="#the-libraries" title="Permalink to this headline">#</a></h3>
<p>Like in most other software environments:</p>
<ul class="simple">
<li><p>when you save a WS for the first time, you must give it a name; and</p></li>
<li><p>once it has been saved you need not re-specify its name when you re-save it.</p></li>
</ul>
<p>Furthermore, we advise you to not re-specify the name when you want to re-save your work, because, if you misspell it, your WS will be saved with the wrong name without you being aware of it.</p>
<p>To save a WS, just issue the command <code class="docutils literal notranslate"><span class="pre">)save</span></code> followed, if this is the first time, by a file name. Let us create a simple variable and recreate the <code class="docutils literal notranslate"><span class="pre">prod</span></code> variable and then save them in an example workspace:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">text</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;The quick brown fox jumps over the lazy dog.&#39;</span><span class="w"></span>
<span class="nf">⎕RL</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">73</span><span class="w"></span>
<span class="nv">prod</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">?</span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">12</span><span class="o">⍴</span><span class="m">50</span><span class="w"></span>
<span class="p">)</span><span class="nv">save</span><span class="w"> </span><span class="nv">MyPreciousWS</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">MyPreciousWS.dws saved Wed Apr  6 21:06:06 2022
</span></div></div>
</div>
<p>A confirmation message appears, specifying where it has been saved, and the date and time of the operation.</p>
<p>Of course, you can specify any path in your command, to save your WS wherever you like, but if you want to specify a full path, it is often more convenient to use the “Save” button in the toolbar, and browse through your folders.</p>
<p>You can have dozens of workspaces saved in various folders, according to your needs; they represent your private library.</p>
<p>You can also use public workspaces provided by Dyalog Ltd. as part of the APL system, workspaces downloaded from web sites, or workspaces provided by third-party developers.</p>
<p>You can list your workspaces using the command <code class="docutils literal notranslate"><span class="pre">)lib</span></code>.</p>
<p>Used alone, the command explores only the folders specified in your configuration parameters, which can be modified using the interpreter menu: “Options” ⇨ “Configure…” ⇨ “Workspace” ⇨ “Workspace search path”.</p>
<p>You can also specify explicitly in which folder the command should search:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">lib</span><span class="w"> </span><span class="na">.</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">MyPreciousWS.dws        
</span></div></div>
</div>
<p>Only one workspace was found in the same folder as this notebook.</p>
</div>
<div class="section" id="load-a-ws">
<span id="data-and-variables-load-a-ws"></span><h3><span class="section-number">3.8.3. </span>Load a WS<a class="headerlink" href="#load-a-ws" title="Permalink to this headline">#</a></h3>
<p>Once a WS has been saved, it may be used again in various ways:</p>
<ul class="simple">
<li><p>you can double-click on the WS name in your operating system’s file explorer;</p></li>
<li><p>you can use the menu “File” ⇨ “Open”;</p></li>
<li><p>you can click on the “Open” icon in the toolbar (highlighted in red below); or</p></li>
<li><p>you can issue the system command <code class="docutils literal notranslate"><span class="pre">)load</span></code></p></li>
</ul>
<div class="figure align-default" id="interpreter-toolbar-load">
<span id="fig-interpreter-toolbar-load"></span><img alt="_images/Interpreter_Toolbar_Load.png" src="_images/Interpreter_Toolbar_Load.png" />
<p class="caption"><span class="caption-number">Fig. 3.4 </span><span class="caption-text">Windows IDE with the “Load” toolbar shortcut highlighted.</span><a class="headerlink" href="#interpreter-toolbar-load" title="Permalink to this image">#</a></p>
</div>
<p>In all these cases, you will see the familiar file search box, in which you can browse to and select the workspace file you would like to open (or load).</p>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">)load</span></code> command followed by a WS name:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">load</span><span class="w"> </span><span class="nv">MyPreciousWS</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">.\MyPreciousWS.dws saved Wed Apr  6 21:06:06 2022
</span></div></div>
</div>
<p>In this case APL will search for your workspace in the folders specified in your <em>workspace search path</em> as explained above, unless you specify a full path name. If the path name includes blank characters, you <strong>must</strong> place the whole expression between double quotes, as in the first example below:</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="p">)</span><span class="nv">load</span><span class="w"> </span><span class="s2">&quot;d:/my documents/sixteen tons/coal&quot;</span><span class="w"> </span><span class="c1">⍝ double quotes are mandatory.</span><span class="w"></span>
<span class="w">      </span><span class="p">)</span><span class="nv">load</span><span class="w"> </span><span class="nv">e</span><span class="bp">:</span><span class="na">/</span><span class="nv">freezer</span><span class="na">/</span><span class="nv">mummies</span><span class="na">/</span><span class="nv">ramses2</span><span class="w">          </span><span class="c1">⍝ double quotes are not needed.</span><span class="w"></span>
</pre></div>
</div>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>When a WS is loaded, <strong>it replaces the active WS in memory</strong> and becomes the new active WS. If you have not saved the variables and functions you were working on, they are definitely lost! There is no warning message.</p>
<p>You must be aware of this because in this respect, APL differs from most software environments, in which each new file you open is opened in a separate window.</p>
</div>
<div class="tip admonition">
<p class="admonition-title">Remark</p>
<p>When a WS is loaded, a confirmation message appears, like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span>\<span class="n">MyPreciousWS</span><span class="o">.</span><span class="n">dws</span> <span class="n">saved</span> <span class="n">Sat</span> <span class="n">Oct</span>  <span class="mi">3</span> <span class="mi">19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">42</span> <span class="mi">2020</span>
</pre></div>
</div>
<p>Note that the date and time reported is the date and time when the WS was last saved.</p>
</div>
</div>
<div class="section" id="file-extensions">
<span id="data-and-variables-file-extensions"></span><h3><span class="section-number">3.8.4. </span>File Extensions<a class="headerlink" href="#file-extensions" title="Permalink to this headline">#</a></h3>
<p>The default extension of an APL WS depends on the APL system you use. For Dyalog APL, the extension is <code class="docutils literal notranslate"><span class="pre">dws</span></code>, an acronym for Dyalog WorkSpace.</p>
<p>This is only a default extension. When you save a WS, you can give it a different extension, like “old”, “std” or “dev”.</p>
<p>If you do so, you must be aware that when you load a WS using the <code class="docutils literal notranslate"><span class="pre">)load</span></code> command, and omit the extension, the command will only search for files with a <code class="docutils literal notranslate"><span class="pre">dws</span></code> extension.</p>
<p>Imagine that you have saved a WS under the name <code class="docutils literal notranslate"><span class="pre">weekly.old</span></code>. This WS will not be found if you just issue the command <code class="docutils literal notranslate"><span class="pre">)load</span> <span class="pre">weekly</span></code>. You must specify the extension: <code class="docutils literal notranslate"><span class="pre">)load</span> <span class="pre">weekly.old</span></code>.</p>
<p>All these considerations are not mandatory knowledge, since you can navigate through the file search dialog box, or through your operating system’s file explorer.</p>
</div>
<div class="section" id="merge-workspaces">
<span id="data-and-variables-merge-workspaces"></span><h3><span class="section-number">3.8.5. </span>Merge Workspaces<a class="headerlink" href="#merge-workspaces" title="Permalink to this headline">#</a></h3>
<p>Suppose that you would like to use some functions or variables stored in another WS that has previously been saved. You can import them into your active WS using the command <code class="docutils literal notranslate"><span class="pre">)copy</span></code>, followed by the name of the WS and then the names of the functions and variables you want to import.</p>
<p>For example, imagine that you need <code class="docutils literal notranslate"><span class="pre">Screwdriver</span></code>, <code class="docutils literal notranslate"><span class="pre">Hammer</span></code> and <code class="docutils literal notranslate"><span class="pre">Saw</span></code>, all stored in a WS named <code class="docutils literal notranslate"><span class="pre">Toolbox</span></code>. You can issue the command</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">Toolbox</span><span class="w"> </span><span class="nv">Screwdriver</span><span class="w"> </span><span class="nv">Hammer</span><span class="w"> </span><span class="nv">Saw</span><span class="w"></span>
</pre></div>
</div>
<p>The WS name must be the first (under Microsoft Windows it is not case sensitive) and the names of the functions and variables must follow, but beware, these are always case sensitive.</p>
<p>If you specify only the workspace name, all its contents are imported. Be sure that all that stuff is really useful to you.</p>
<p>When the copy is complete, a confirmation message is issued. Like the message issued by a <code class="docutils literal notranslate"><span class="pre">)load</span></code> command, it tells you when the WS was last saved.</p>
<p>Of course, you can specify a path in the command; otherwise the WS is searched for in the <em>workspace search path</em> defined in your configuration. Once again, use double quotes if necessary:</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="s2">&quot;d:/my documents/recipes/ratatouille&quot;</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="protected-copy">
<span id="data-and-variables-protected-copy"></span><h4><span class="section-number">3.8.5.1. </span>Protected Copy<a class="headerlink" href="#protected-copy" title="Permalink to this headline">#</a></h4>
<p>When you import the entire contents of another WS, there is a risk that it contains an object (variable or function) which has the same name, but not the same value, as an existing object in your active WS. If so, the imported object <strong>replaces</strong> the current one. Danger!</p>
<p>You can avoid this by using the <code class="docutils literal notranslate"><span class="pre">)pcopy</span></code> command, with the P standing for “Protected”. If there is a name conflict, the object in the active WS is not overwritten, and a message tells you which objects haven’t been copied. Let’s demonstrate this. First we clear our current WS to simulate a fresh start:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">clear</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">clear ws
</span></div></div>
</div>
<p>Now we define some variables that are useful for our calculations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">text</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;This is just some text.&#39;</span><span class="w"></span>
<span class="o">≢</span><span class="nv">text</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">23
</span></div></div>
</div>
<p>And now we import the contents of the auxiliary WS because we need it as well:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">pcopy</span><span class="w"> </span><span class="nv">MyPreciousWS</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">.\MyPreciousWS.dws saved Wed Apr  6 21:06:06 2022
not copied text
</span></div></div>
</div>
<p>Notice how <code class="docutils literal notranslate"><span class="pre">text</span></code> was <strong>not</strong> copied from the auxiliary WS because we have defined our own <code class="docutils literal notranslate"><span class="pre">text</span></code> above.</p>
</div>
<div class="section" id="intentionally-destructive-copy">
<span id="data-and-variables-intentionally-destructive-copy"></span><h4><span class="section-number">3.8.5.2. </span>Intentionally Destructive Copy<a class="headerlink" href="#intentionally-destructive-copy" title="Permalink to this headline">#</a></h4>
<p>We saw that an imported object may overwrite an object in the active WS. This is sometimes useful!</p>
<p>Imagine that you loaded the WS:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">load</span><span class="w"> </span><span class="nv">MyPreciousWS</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">.\MyPreciousWS.dws saved Wed Apr  6 21:06:06 2022
</span></div></div>
</div>
<p>Then you spend some hours adding new functions and variables, changing things here and there, and suddenly, you discover that you made inappropriate changes to <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p>
<p>You can retrieve the original variable, still present in the saved version of <code class="docutils literal notranslate"><span class="pre">MyPreciousWS</span></code>, with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">MyPreciousWS</span><span class="w"> </span><span class="nv">text</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">.\MyPreciousWS.dws saved Wed Apr  6 21:06:06 2022
</span></div></div>
</div>
<p>When imported, the original version of <code class="docutils literal notranslate"><span class="pre">text</span></code> will override the version you mistakenly altered. Your active workspace will be correct again, and you will be able to go on with your work (but don’t forget to save it!).</p>
<p>Of course this becomes more helpful if you have many more variables in your workspace. If you had made some useful changes to <code class="docutils literal notranslate"><span class="pre">text</span></code> you wouldn’t want to copy the whole workspace into your active workspace, hence the usefulness of the command demonstrated above.</p>
</div>
<div class="section" id="evolution-of-your-code">
<span id="data-and-variables-evolution-of-your-code"></span><h4><span class="section-number">3.8.5.3. </span>Evolution of Your Code<a class="headerlink" href="#evolution-of-your-code" title="Permalink to this headline">#</a></h4>
<p>Imagine that you have imported into your active WS a function named <code class="docutils literal notranslate"><span class="pre">Compute</span></code>, copied from a WS named <code class="docutils literal notranslate"><span class="pre">Utilities</span></code>. When you save your active WS, for example under the name <code class="docutils literal notranslate"><span class="pre">Budget</span></code>, the function <code class="docutils literal notranslate"><span class="pre">Compute</span></code> will be saved with it.</p>
<p>But now, imagine that the original version of the function <code class="docutils literal notranslate"><span class="pre">Compute</span></code> contained in <code class="docutils literal notranslate"><span class="pre">Utilities</span></code> is modified, or enhanced; what happens? The copy saved with <code class="docutils literal notranslate"><span class="pre">Budget</span></code> is still the old version, and <code class="docutils literal notranslate"><span class="pre">Budget</span></code> may therefore be outdated.</p>
<p>This is a reason why APL allows a dynamic copy of what you need from a known reference WS. This technique will be explained in <span class="xref myst">the chapter on system interfaces</span>.</p>
</div>
<div class="section" id="active-ws-identification">
<span id="data-and-variables-active-ws-identification"></span><h4><span class="section-number">3.8.5.4. </span>Active WS Identification<a class="headerlink" href="#active-ws-identification" title="Permalink to this headline">#</a></h4>
<p>You can obtain the name of your current WS by issuing the command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">wsid</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">is .\MyPreciousWS.dws
</span></div></div>
</div>
<p>Do not be misled by the name that is reported: it just means that the contents of your active WS had initially been loaded from that WS, or have recently been saved under that name. But since it was loaded or saved, your current WS may have been modified, and may no longer be identical to the original copy stored in the library.</p>
<p>In the same way, if you see instead the message <code class="docutils literal notranslate"><span class="pre">&quot;is</span> <span class="pre">CLEAR</span> <span class="pre">WS&quot;</span></code>, it does not mean that your WS is clear (empty; contains nothing), but that is has not been saved yet, and hence has no name.</p>
</div>
</div>
<div class="section" id="exiting-apl">
<span id="data-and-variables-exiting-apl"></span><h3><span class="section-number">3.8.6. </span>Exiting APL<a class="headerlink" href="#exiting-apl" title="Permalink to this headline">#</a></h3>
<p>You can close an APL session using three traditional Windows methods, and two APL system commands:</p>
<ul class="simple">
<li><p>you can click on the “Close” cross at the top-right corner of your APL window;</p></li>
<li><p>you can press <kbd>Alt</kbd>+<kbd>F4</kbd>;</p></li>
<li><p>you can activate the menu “File” ⇨ “Exit”;</p></li>
<li><p>you can issue the system command <code class="docutils literal notranslate"><span class="pre">)off</span></code>; or</p></li>
<li><p>you can issue the system command <code class="docutils literal notranslate"><span class="pre">)continue</span></code>.</p></li>
</ul>
<p>The first two methods will ask if you want to save your current session configuration, a so called “<em>continue WS</em>” (this will be seen in <span class="xref myst">a later chapter</span>), and the log of everything that you did during the session. The next two methods will close APL without any question or warning, and will not save your configuration. The last one will save a <em>continue WS</em> before exiting.</p>
<p>In any case, always <strong>remember to save your work</strong> (if necessary) before you quit.</p>
</div>
<div class="section" id="contents-of-a-ws">
<span id="data-and-variables-contents-of-a-ws"></span><h3><span class="section-number">3.8.7. </span>Contents of a WS<a class="headerlink" href="#contents-of-a-ws" title="Permalink to this headline">#</a></h3>
<p>Generally speaking, a workspace contains functions and variables which interact to constitute some useful application.</p>
<p>The large memories of modern computers support very big workspaces, and a single WS is generally enough to store even a very complex application, or several applications. However, it is good practice to store different applications in different workspaces: accounting, budget, customer care, etc. It is not recommended that you mix several applications in a single WS.</p>
<p>However, if appropriate, it is possible for a function to dynamically load another workspace (without any intervention by the user), and activate a different or complementary application.</p>
<p>For now, a unique WS should be sufficient to contain all your experiments.</p>
<p>If several workspaces need to share a command set of utility programs, this can be accomplished by dynamically importing the utilities from a common source. This will also be seen in <span class="xref myst">the chapter on system interfaces</span>.</p>
</div>
<div class="section" id="our-first-system-commands">
<span id="data-and-variables-our-first-system-commands"></span><h3><span class="section-number">3.8.8. </span>Our First System Commands<a class="headerlink" href="#our-first-system-commands" title="Permalink to this headline">#</a></h3>
<p>Just to recapitulate, here is a little summary of the system commands we’ve just discovered. Many other commands will be studied (cf. <span class="xref myst">the chapter on system interfaces</span>). The following conventions are used in the table below:</p>
<ul class="simple">
<li><p>the command names are writing using normal characters; the parameters are in <em>italics</em>;</p></li>
<li><p>parameters within {braces} are optional;</p></li>
<li><p><em>names</em> represents a list of variable or function names; and</p></li>
<li><p><em>wsname</em> is the name of a WS:</p>
<ul>
<li><p>this name may contain a file extension, which is only necessary if it is different from “dws”; and</p></li>
<li><p>this name may also be preceded by an optional path. If the path is not specified, APL searches in some default directories. (In the Windows IDE, you can change those directories under “Options” ⇨ “Configure…” ⇨ “Workspace” ⇨ “Workspace search path”.)</p></li>
</ul>
</li>
</ul>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Command</p></th>
<th class="text-align:left head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)vars</span></code></p></td>
<td class="text-align:left"><p>Lists the variables in the active workspace.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)fns</span></code></p></td>
<td class="text-align:left"><p>Lists the user-defined functions in the active workspace.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)erase</span> <span class="pre">*names*</span></code></p></td>
<td class="text-align:left"><p>Deletes the named objects from the active workspace.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)clear</span></code></p></td>
<td class="text-align:left"><p>Deletes everything and leaves the active workspace empty.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)save</span></code></p></td>
<td class="text-align:left"><p>Saves the active workspace under its current name, or: opens the File Save dialog box if the WS has no name yet.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)save</span> <span class="pre">*wsname*</span></code></p></td>
<td class="text-align:left"><p>Saves the active WS under the given path/name/extension.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)lib</span></code></p></td>
<td class="text-align:left"><p>Gives the list of all workspaces in the <em>workspace search path</em>.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)lib</span> <span class="pre">*path*</span></code></p></td>
<td class="text-align:left"><p>Gives the list of all workspaces in the specified path.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)drop</span> <span class="pre">*wsname*</span></code></p></td>
<td class="text-align:left"><p>Deletes a saved WS from disk.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)load</span></code></p></td>
<td class="text-align:left"><p>Opens the File Open dialog box, from which a workspace can be selected. It will replace the active WS.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)load</span> <span class="pre">*wsname*</span></code></p></td>
<td class="text-align:left"><p>Replaces the contents of the active WS with the referenced WS.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)copy</span> <span class="pre">*wsname*</span> <span class="pre">*names*</span></code></p></td>
<td class="text-align:left"><p>Imports the named items from the specified WS into the active WS, where they may overwrite objects identically named.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)copy</span> <span class="pre">*wsname*</span></code></p></td>
<td class="text-align:left"><p>Imports all contents of the specified WS.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)pcopy</span> <span class="pre">*wsname*</span> <span class="pre">{*names*}</span></code></p></td>
<td class="text-align:left"><p>Similar to <code class="docutils literal notranslate"><span class="pre">)copy</span></code>, but does not overwrite existing objects.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)wsid</span></code></p></td>
<td class="text-align:left"><p>Displays the name of the current (active) WS.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)off</span></code></p></td>
<td class="text-align:left"><p>Closes the APL session.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">)continue</span></code></p></td>
<td class="text-align:left"><p>Saves a <em>continue WS</em> and closes the APL session.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="exercises">
<span id="data-and-variables-exercises"></span><h2><span class="section-number">3.9. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">#</a></h2>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p><em>The following exercises are designed to train <strong>you</strong>, not the computer.</em></p>
<p><em>For this reason, we suggest that you try to answer them on a sheet of paper, not on your computer. When you are sure of your answer, you can test it on the computer.</em></p>
</div>
<div class="exercise admonition" id="scalar-vector-scalar">

<p class="admonition-title"><span class="caption-number">Exercise 3.1 </span></p>
<div class="section" id="exercise-content">
<p>Given a scalar <code class="docutils literal notranslate"><span class="pre">s</span></code>, can you transform it into a vector containing one single item? What about the opposite: can you transform a one-item vector <code class="docutils literal notranslate"><span class="pre">v</span></code> into a scalar?</p>
</div>
</div>
<div class="exercise admonition" id="character-vector">

<p class="admonition-title"><span class="caption-number">Exercise 3.2 </span></p>
<div class="section" id="exercise-content">
<p>Define <code class="docutils literal notranslate"><span class="pre">x</span></code> so that this interactive session becomes possible:</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="nv">x</span><span class="w"></span>
<span class="m">2</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">x</span><span class="w"></span>
<span class="m">8</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="le-chat-permutation">

<p class="admonition-title"><span class="caption-number">Exercise 3.3 </span></p>
<div class="section" id="exercise-content">
<p>Find the result of this expression: <code class="docutils literal notranslate"><span class="pre">'LE</span> <span class="pre">CHAT'[7</span> <span class="pre">5</span> <span class="pre">2</span> <span class="pre">3</span> <span class="pre">4</span> <span class="pre">6</span> <span class="pre">7]</span></code>. This amusing example was first given in “<em>Informatique par telephone</em>” of Philip S. Abrams and Gérard Lacourly, Editions Herman, Paris 1972.</p>
</div>
</div>
<div class="exercise admonition" id="tab-replace">

<p class="admonition-title"><span class="caption-number">Exercise 3.4 </span></p>
<div class="section" id="exercise-content">
<p>The variable <code class="docutils literal notranslate"><span class="pre">tab</span></code> is created like this:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tab</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
<p>How could you replace the values <code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">6</span> <span class="pre">7</span> <span class="pre">2</span></code> in this variable by <code class="docutils literal notranslate"><span class="pre">21</span> <span class="pre">45</span> <span class="pre">78</span> <span class="pre">11</span></code> respectively?</p>
</div>
</div>
<div class="exercise admonition" id="x-index-assignment">

<p class="admonition-title"><span class="caption-number">Exercise 3.5 </span></p>
<div class="section" id="exercise-content">
<p>Consider the following assignments:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="nv">x</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">x</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
<p>What do you think is the new value of <code class="docutils literal notranslate"><span class="pre">x</span></code>? And what happens if you now execute</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">x</span><span class="sr">[</span><span class="m">6</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="mystery-vector">

<p class="admonition-title"><span class="caption-number">Exercise 3.6 </span></p>
<div class="section" id="exercise-content">
<p>A vector of six items named <code class="docutils literal notranslate"><span class="pre">mystery</span></code> is indexed like this:</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="nv">mystery</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
<span class="m">8</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">15</span><span class="w"></span>
</pre></div>
</div>
<p>What is the value of <code class="docutils literal notranslate"><span class="pre">mystery</span></code>?</p>
</div>
</div>
<div class="exercise admonition" id="vec-findme">

<p class="admonition-title"><span class="caption-number">Exercise 3.7 </span></p>
<div class="section" id="exercise-content">
<p>One creates a vector, and selects some items from it, as shown:</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="nv">vec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">47</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">14</span><span class="w"></span>
<span class="w">      </span><span class="nv">vec</span><span class="sr">[</span><span class="nv">findMe</span><span class="sr">]</span><span class="w"></span>
<span class="m">47</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">74</span><span class="w"></span>
</pre></div>
</div>
<p>Could you guess the value of <code class="docutils literal notranslate"><span class="pre">findMe</span></code>?</p>
</div>
</div>
<div class="exercise admonition" id="source-set">

<p class="admonition-title"><span class="caption-number">Exercise 3.8 </span></p>
<div class="section" id="exercise-content">
<p>One creates a vector, and a set of indices:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">source</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
<span class="nv">set</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="nv">source</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
<p>Then one uses it to index the original vector:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">source</span><span class="sr">[</span><span class="nv">set</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
<p>What is the shape of <code class="docutils literal notranslate"><span class="pre">result</span></code>? Can you find its value?</p>
</div>
</div>
<div class="exercise admonition" id="v1-v2">

<p class="admonition-title"><span class="caption-number">Exercise 3.9 </span></p>
<div class="section" id="exercise-content">
<p>Is there a difference between the following two vectors?</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;p&#39;</span><span class="w"> </span><span class="s1">&#39;o&#39;</span><span class="w"> </span><span class="s1">&#39;t&#39;</span><span class="w"></span>
<span class="nv">v2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;pot&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="v3-v4">

<p class="admonition-title"><span class="caption-number">Exercise 3.10 </span></p>
<div class="section" id="exercise-content">
<p>Is there a difference between the following two vectors?</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v3</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="s1">&#39;Y&#39;</span><span class="w"> </span><span class="s1">&#39;e&#39;</span><span class="w"> </span><span class="s1">&#39;s&#39;</span><span class="w"> </span><span class="m">52</span><span class="w"></span>
<span class="nv">v4</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="s1">&#39;Yes&#39;</span><span class="w"> </span><span class="m">52</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="two-foolish">

<p class="admonition-title"><span class="caption-number">Exercise 3.11 </span></p>
<div class="section" id="exercise-content">
<p>Here is a very simple variable:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">two</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
<p>We use it in the following expression:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">foolish</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="s1">&#39;⍴&#39;</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>What is the shape of <code class="docutils literal notranslate"><span class="pre">foolish</span></code>? Can you find its value?</p>
</div>
</div>
<p>Proposed solutions to the exercises can be found in <a class="reference internal" href="#data-and-variables-solutions"><span class="std std-numref">Section 3.11</span></a>.</p>
</div>
<div class="section" id="the-specialist-s-section">
<span id="data-and-variables-the-specialists-section"></span><h2><span class="section-number">3.10. </span>The Specialist’s Section<a class="headerlink" href="#the-specialist-s-section" title="Permalink to this headline">#</a></h2>
<br />
<center><i>Each chapter is followed by a "Specialist's Section" like this one. This section is dedicated to skilled APLers who wish to improve their knowledge.</i>
<p>You will find here rare or complex usages of the concepts presented in this chapter, or discover extended explanations which need the knowledge of some symbols that will be seen much further in the book.</p>
<p><b>If you are exploring APL for the first time, skip this section and go to the next chapter.</b></center></p>
<div class="section" id="variable-names">
<span id="data-and-variables-variable-names"></span><h3><span class="section-number">3.10.1. </span>Variable Names<a class="headerlink" href="#variable-names" title="Permalink to this headline">#</a></h3>
<p>Variable names must obey the rules shown in <a class="reference internal" href="#data-and-variables-variables"><span class="std std-numref">Section 3.1.2</span></a>.</p>
<p>We have seen that you may use some special characters: delta (<code class="docutils literal notranslate"><span class="pre">∆</span></code>), underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>), and also the underscored delta (<code class="docutils literal notranslate"><span class="pre">⍙</span></code>). We do not recommend these symbols; they often make programs difficult to read.</p>
</div>
<div class="section" id="representation-of-numbers">
<span id="data-and-variables-representation-of-numbers"></span><h3><span class="section-number">3.10.2. </span>Representation of Numbers<a class="headerlink" href="#representation-of-numbers" title="Permalink to this headline">#</a></h3>
<p>Up to now, we have entered decimal numbers using the most common conventions, like 3714.12 or 0.41.</p>
<p>It is also possible to employ other conventions to facilitate typing.</p>
<p>When the magnitude of a decimal value is less than 1 it is not necessary to enter a zero before the decimal point:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">.413</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.413
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯.5119</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯0.5119
</span></div></div>
</div>
<p>Very large and very small numbers can be entered using <em>scientific</em> (or <em>exponential</em>) <em>notation</em>.</p>
<p>Using this convention, any “extreme” number can be represented by a “normal” number, the <em>mantissa</em>, multiplied by a power of 10, the <em>exponent</em>.</p>
<p>For example, 42781900 could be represented as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
42781900 &amp;= 4.27819 \times 10^7 \\
&amp;= 427.819 \times 10^5 \\
&amp;= 42781.9 \times 10^4
\end{align*}
\end{split}\]</div>
<p>and 0.0000038421 could be represented as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
0.0000038421 &amp;= 384.21 \times 10^{-8} \\
&amp;= 3.8421 \times 10^{-6}
\end{align*}
\end{split}\]</div>
<p>In APL, the mantissa and the exponent are separated by the letter <code class="docutils literal notranslate"><span class="pre">E</span></code>.</p>
<p>Using this notation, one can enter very large or very small numbers with ease.
Beware that, strictly speaking, <em>scientific notation</em> requires the <em>mantissa</em> to be a number between greater than or equal to 1 and lower than 10, but this notation works in APL even if the <em>mantissa</em> doesn’t fall within that range.</p>
<p>If the magnitude of the number is not too large nor too small, all its digits will be displayed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4.27819E7</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">42781900
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4278.19E4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">42781900
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">384.21E¯8</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.0000038421
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3.8421E¯6</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.0000038421
</span></div></div>
</div>
<p>But if the numbers are very large (or very small), and would require more digits to be shown than the maximum (defined by <code class="docutils literal notranslate"><span class="pre">⎕PP</span></code>, the <em>print precision</em>) APL displays them with a “normalised” mantissa with only one non-zero digit, followed by some decimal places (if any) and the appropriate exponent:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">431765805838751234</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4.317658058E17
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5678.1234E20</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5.6781234E23
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1234.9876E¯15</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.2349876E¯12
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯2468.1357E¯13</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯2.4681357E¯10
</span></div></div>
</div>
</div>
<div class="section" id="the-shape-of-the-result-of-indexing">
<span id="data-and-variables-the-shape-of-the-result-of-indexing"></span><h3><span class="section-number">3.10.3. </span>The Shape of the Result of Indexing<a class="headerlink" href="#the-shape-of-the-result-of-indexing" title="Permalink to this headline">#</a></h3>
<div class="tip admonition">
<p class="admonition-title">Rule</p>
<p>Suppose you are given an array of any rank <code class="docutils literal notranslate"><span class="pre">array</span></code>.</p>
<p>The expression <code class="docutils literal notranslate"><span class="pre">array[a;</span> <span class="pre">b;</span> <span class="pre">c;</span> <span class="pre">...]</span></code> always gives a result with a shape equal to <code class="docutils literal notranslate"><span class="pre">(⍴a),(⍴b),(⍴c),...</span></code>.</p>
</div>
<p>This rule makes it possible to always predict the shape of the result of an indexing operation.</p>
<p>For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="sr">;</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">46 20 18 25
29  5 27  4

41  1 17 42
38 31 23  7

39 23  6 40
37 19 30 49
</span></div></div>
</div>
<p>gives a result of shape <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">2</span> <span class="pre">4</span></code>. Similarly,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">prod</span><span class="sr">[;</span><span class="m">2</span><span class="sr">;</span><span class="o">⍳</span><span class="m">6</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">34 19 32 12 37 15
46 20 47 17 18 25
39 23 41 20  6 40
 8 48 22 37 33  1
41  1 14 50 17 42
</span></div></div>
</div>
<p>gives a result of shape <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">6</span></code>.</p>
<p>In the last example, the omitted index refers to the first dimension of <code class="docutils literal notranslate"><span class="pre">prod</span></code> which is of length 5.</p>
<p>The second index (2) is a scalar, and has no dimension.</p>
<p>That’s why the shape of the result is 5 6 and not 5 1 6.</p>
<div class="section" id="using-ravel-to-preserve-a-dimension">
<span id="data-and-variables-using-ravel-to-preserve-a-dimension"></span><h4><span class="section-number">3.10.3.1. </span>Using Ravel to Preserve a Dimension<a class="headerlink" href="#using-ravel-to-preserve-a-dimension" title="Permalink to this headline">#</a></h4>
<p>Usually, a matrix is indexed like <code class="docutils literal notranslate"><span class="pre">mat[rows;cols]</span></code>, for example</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">prod</span><span class="sr">[;</span><span class="m">1</span><span class="sr">;]</span><span class="w"></span>
<span class="nv">rows</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="nv">cols</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
<span class="nv">mini</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">mat</span><span class="sr">[</span><span class="nv">rows</span><span class="sr">;</span><span class="nv">cols</span><span class="sr">]</span><span class="w"></span>
<span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">42 3
45 4
</span></div></div>
</div>
<p>Generally, <code class="docutils literal notranslate"><span class="pre">rows</span></code> may contain several row numbers, and <code class="docutils literal notranslate"><span class="pre">cols</span></code> may contain several column numbers. Applying the preceding rule, it is easy to see that we’ll obtain a sub-matrix <code class="docutils literal notranslate"><span class="pre">mini</span></code>.</p>
<p>But it may be that <code class="docutils literal notranslate"><span class="pre">rows</span></code> or <code class="docutils literal notranslate"><span class="pre">cols</span></code> are scalars. The result of <code class="docutils literal notranslate"><span class="pre">mat[rows;cols]</span></code> would then not be a sub-matrix, but a scalar or a vector. This could lead to other expressions in your function generating an error or an incorrect result, because they were written expecting matrices.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">rows</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="nv">mini</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">mat</span><span class="sr">[</span><span class="nv">rows</span><span class="sr">;</span><span class="nv">cols</span><span class="sr">]</span><span class="w"></span>
<span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">42 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2
</span></div></div>
</div>
<p>By checking the shape of <code class="docutils literal notranslate"><span class="pre">mini</span></code>, we can see <code class="docutils literal notranslate"><span class="pre">mini</span></code> is a vector now.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">cols</span></code> is also a scalar, then <code class="docutils literal notranslate"><span class="pre">mini</span></code> becomes a scalar:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">cols</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
<span class="nv">mini</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">mat</span><span class="sr">[</span><span class="nv">rows</span><span class="sr">;</span><span class="nv">cols</span><span class="sr">]</span><span class="w"></span>
<span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div></div>
</div>
<p>To avoid this problem, you can force an index expression to be a vector (perhaps a vector containing only one item) by using <em>ravel</em> (<code class="docutils literal notranslate"><span class="pre">,</span></code>) like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mini</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">mat</span><span class="sr">[</span><span class="o">,</span><span class="nv">rows</span><span class="sr">;</span><span class="o">,</span><span class="nv">cols</span><span class="sr">]</span><span class="w"></span>
<span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">mini</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 1
</span></div></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">mini</span></code> is the correct 1 by 1 matrix we wanted it to be.</p>
<p><em>Ravel</em> shall be discussed in <a class="reference internal" href="Some-Primitive-Functions.html#some-primitive-functions-ravel"><span class="std std-numref">Section 4.16</span></a>.</p>
<p>In <a class="reference internal" href="#data-and-variables-array-indexing"><span class="std std-numref">Section 3.5.3</span></a>, we indexed a matrix in a way similar to this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mat</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="sr">;</span><span class="m">1</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">9 29 38
</span></div></div>
</div>
<p>And we were surprised to see the values of a column were displayed horizontally. We can now understand why: the shape of the result is equal to <code class="docutils literal notranslate"><span class="pre">(⍴1</span> <span class="pre">2</span> <span class="pre">5),(⍴1)</span></code>. As the shape of a scalar is empty, this expression is equivalent to <code class="docutils literal notranslate"><span class="pre">(⍴1</span> <span class="pre">2</span> <span class="pre">5)</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">3</span></code>. The indexing operation therefore produces a vector, which is displayed on a single line of the screen.</p>
<p>To obtain a matrix, we must transform the column index (scalar <code class="docutils literal notranslate"><span class="pre">1</span></code>) into a vector: we shall again use <em>ravel</em>, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mat</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="sr">;</span><span class="w"> </span><span class="o">,</span><span class="m">1</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 9
29
38
</span></div></div>
</div>
</div>
</div>
<div class="section" id="multiple-usage-of-an-index">
<span id="data-and-variables-multiple-usage-of-an-index"></span><h3><span class="section-number">3.10.4. </span>Multiple Usage of an Index<a class="headerlink" href="#multiple-usage-of-an-index" title="Permalink to this headline">#</a></h3>
<p>When an array is indexed, the same item (the second item in the example below) may be selected more than once; for example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">a</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">71</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">73</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">76</span><span class="w"></span>
<span class="nv">a</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">72 73 72 74 72
</span></div></div>
</div>
<p>If a repeated index is used to update the variable, only the last replacement value is retained:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">a</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">67</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">50</span><span class="w"></span>
<span class="nv">a</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">71 50 19 33 75 76
</span></div></div>
</div>
<p>In the assignment above, the second item was set to 45, then 67 and finally 50.</p>
</div>
<div class="section" id="a-problem-with-using-reshape">
<span id="data-and-variables-a-problem-with-using-reshape"></span><h3><span class="section-number">3.10.5. </span>A Problem With Using Reshape (<code class="docutils literal notranslate"><span class="pre">⍴</span></code>)<a class="headerlink" href="#a-problem-with-using-reshape" title="Permalink to this headline">#</a></h3>
<p>We want to create a numeric matrix with 3 rows, and as many columns as another matrix <code class="docutils literal notranslate"><span class="pre">mat</span></code>, entirely filled with zeros.</p>
<p>One solution is to first obtain the number of columns of <code class="docutils literal notranslate"><span class="pre">mat</span></code>, using the <em>drop</em> (<code class="docutils literal notranslate"><span class="pre">↓</span></code>) function (to be discussed later):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="o">↓⍴</span><span class="nv">mat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12
</span></div></div>
</div>
<p>We can see <code class="docutils literal notranslate"><span class="pre">mat</span></code> has 12 columns. Now we can manually build the correct matrix using the number of columns (12) we obtained previously:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="m">12</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
</span></div></div>
</div>
<p>Now let us try to build a generalised solution:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nc</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="o">↓⍴</span><span class="nv">mat</span><span class="w"></span>
<span class="nv">new</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="nv">nc</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DOMAIN ERROR
      new←3 nc⍴0
              ∧
</pre></div>
</div>
</div>
</div>
<p>But it no longer works!</p>
<p>The reasons for the problem are as follows:</p>
<ul class="simple">
<li><p>when, in the first example, we entered the expression <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">12</span></code>, we juxtaposed two scalars, and the result was a two-item vector;</p></li>
<li><p>the expression <code class="docutils literal notranslate"><span class="pre">⍴mat</span></code> in the second example returns a two-item vector (<code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">12</span></code> to be more precise). The function <em>drop</em> leaves only one value, but the result <code class="docutils literal notranslate"><span class="pre">12</span></code> is still a one-item <em>vector</em>; and</p></li>
<li><p>when we then entered the expression <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">nc</span></code>, we juxtaposed a scalar to a vector. This does not return a simple vector, but a nested array.</p></li>
</ul>
<p>Unfortunately, a nested array is not a valid left argument for <em>reshape</em>! To solve this, we <em>catenate</em> <code class="docutils literal notranslate"><span class="pre">3</span></code> and <code class="docutils literal notranslate"><span class="pre">nc</span></code> to form a simple vector, which we then use as the left argument to <code class="docutils literal notranslate"><span class="pre">⍴</span></code> (<em>catenate</em> is also discussed later on).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">new</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">,</span><span class="nv">nc</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
<span class="nv">new</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
</span></div></div>
</div>
<p>A direct solution would be:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">new</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">,</span><span class="m">1</span><span class="o">↓⍴</span><span class="nv">mat</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="w"></span>
<span class="nv">new</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
</span></div></div>
</div>
</div>
<div class="section" id="monadic-index-or-materialise">
<span id="data-and-variables-monadic-index-or-materialise"></span><h3><span class="section-number">3.10.6. </span>Monadic Index, or Materialise (<code class="docutils literal notranslate"><span class="pre">⌷</span></code>)<a class="headerlink" href="#monadic-index-or-materialise" title="Permalink to this headline">#</a></h3>
<p>In <a class="reference internal" href="#data-and-variables-array-indexing"><span class="std std-numref">Section 3.5.3</span></a>, we used the <em>index</em> function with a left argument for indexing.</p>
<p>Used monadically (without a left argument), <em>materialise</em> returns all the items of its right argument, whatever its shape:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">vec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">41</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">64</span><span class="w"></span>
<span class="o">⌷</span><span class="w"> </span><span class="nv">vec</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">17 41 23 64
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="o">⍳</span><span class="m">6</span><span class="w"></span>
<span class="o">⌷</span><span class="nv">mat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3
4 5 6
</span></div></div>
</div>
<p>The <em>materialise</em> function may also be used with Objects (See Chapter Q, Object Oriented Programming). Applied to an <em>enumerate property of an object</em>, or an <em>instance of an object</em> which has such a <em>property</em> as its <em>default property</em>, the same syntax returns all the items in this collection.</p>
<p>For example, to obtain the names of all the sheets in an Excel workbook, one can type:</p>
<div class="highlight-apl notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="nv">XL</span><span class="na">.</span><span class="nv">ActiveWorkbook</span><span class="na">.</span><span class="p">(</span><span class="o">⌷</span><span class="nv">Sheets</span><span class="p">)</span><span class="na">.</span><span class="nv">Name</span><span class="w"></span>
</pre></div>
</div>
<p>In this expression, <code class="docutils literal notranslate"><span class="pre">⌷Sheets</span></code> represents the collection of all those sheets.</p>
</div>
</div>
<div class="section" id="solutions">
<span id="data-and-variables-solutions"></span><h2><span class="section-number">3.11. </span>Solutions<a class="headerlink" href="#solutions" title="Permalink to this headline">#</a></h2>
<p>The following solutions we propose are not necessarily the “best” ones; perhaps you will find other solutions that we have never considered. APL is a very rich language, and due to the general nature of its primitive functions and operators there are always plenty of different ways to express different solutions to a given problem. Which one is “the best” depends on many things, for example the level of experience of the programmer, the importance of system performance, the required behaviour in border cases, the requirement to meet certain programming standards and also personal preferences. This is one of the reasons why APL is so pleasant to teach and to learn!</p>
<p>We advise you to try and solve the exercises before reading the solutions!</p>
<div class="solution admonition" id="Data-and-Variables-solution-11">

<p class="admonition-title">Solution to<a class="reference internal" href="#scalar-vector-scalar"> Exercise 3.1</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>The dyadic use of <code class="docutils literal notranslate"><span class="pre">⍴</span></code> is <em>reshape</em>, so that is what we are going to do to turn a scalar</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">s</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>into a 1-element vector. A 1-element vector has shape <code class="docutils literal notranslate"><span class="pre">1</span></code>, so</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="o">⍴</span><span class="nv">s</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2
</span></div></div>
</div>
<p>will do the trick, even though it may look like it didn’t work. If we check the ranks, we can see it did; a scalar has rank 0,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢⍴</span><span class="nv">s</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>whereas a vector has rank 1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢⍴</span><span class="w"> </span><span class="m">1</span><span class="o">⍴</span><span class="nv">s</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>To go the other way around we just have to remember that a scalar has an empty shape, that is, <code class="docutils literal notranslate"><span class="pre">⍬</span></code> is the shape of a scalar:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="o">⍴</span><span class="nv">s</span><span class="w"></span>
<span class="o">≢⍴</span><span class="w"> </span><span class="no">⍬</span><span class="o">⍴</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>Having obtained 0 as an answer, we can see that <code class="docutils literal notranslate"><span class="pre">⍬⍴v</span></code> really is a scalar.</p>
<div class="solution admonition" id="Data-and-Variables-solution-12">

<p class="admonition-title">Solution to<a class="reference internal" href="#character-vector"> Exercise 3.2</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>If we define <code class="docutils literal notranslate"><span class="pre">x</span></code> by just copying the numerical values, then we are defining a vector with 4 elements:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="nv">x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 15 8 3
</span></div></div>
</div>
<p>The visual display looks correct, but then of course the shape of <code class="docutils literal notranslate"><span class="pre">x</span></code> is <code class="docutils literal notranslate"><span class="pre">4</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<p>The trick to solving this exercise is remembering that quotes in character vectors don’t get printed when character vectors are displayed,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;2 15 8 3&#39;</span><span class="w"></span>
<span class="nv">x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 15 8 3
</span></div></div>
</div>
<p>which makes it look exactly like the first <code class="docutils literal notranslate"><span class="pre">x</span></code> above, but now <code class="docutils literal notranslate"><span class="pre">x</span></code> is a <em>character</em> vector with 8 elements:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nv">x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-13">

<p class="admonition-title">Solution to<a class="reference internal" href="#le-chat-permutation"> Exercise 3.3</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>There is no easier way to confirm your answer than to actually run the code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;LE CHAT&#39;</span><span class="sr">[</span><span class="m">7</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">THE CAT
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-14">

<p class="admonition-title">Solution to<a class="reference internal" href="#tab-replace"> Exercise 3.4</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>The first thing to do would be to understand how to access the values we want to modify, and then use the appropriate assignment. Notice that <code class="docutils literal notranslate"><span class="pre">tab</span></code> is a matrix with 2 rows and 5 columns and we are after the values in the corners, or in the first and last columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tab</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="nv">tab</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">9 1 4 3 6
7 4 3 8 2
</span></div></div>
</div>
<p>One might be tempted to write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tab</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">11</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LENGTH ERROR
      tab[1 2;1 5]←21 45 78 11
         ∧
</pre></div>
</div>
</div>
</div>
<p>but that gives an error because <code class="docutils literal notranslate"><span class="pre">tab[1</span> <span class="pre">2;1</span> <span class="pre">5]</span></code> is a 2 by 2 matrix and <code class="docutils literal notranslate"><span class="pre">21</span> <span class="pre">45</span> <span class="pre">78</span> <span class="pre">11</span></code> is a vector. We need to make sure the value to the right of the assignment has a conforming shape:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tab</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">21</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">11</span><span class="w"></span>
<span class="nv">tab</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">21 1 4 3 45
78 4 3 8 11
</span></div></div>
</div>
<p>Because we are replacing entire columns, we can also omit the row indices like such:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">tab</span><span class="sr">[;</span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">21</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">11</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-15">

<p class="admonition-title">Solution to<a class="reference internal" href="#x-index-assignment"> Exercise 3.5</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>When we write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="nv">x</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">x</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>we are replacing <code class="docutils literal notranslate"><span class="pre">x</span></code>’s 3rd and 5th elements with its 4th and 1st, respectively, so that the 9 becomes an 11 and the 3 becomes a 1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 11 11 1 7 8
</span></div></div>
</div>
<p>If we then run</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">x</span><span class="sr">[</span><span class="m">6</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>we are swapping the 4th and 6th elements of <code class="docutils literal notranslate"><span class="pre">x</span></code>, so that the second 11 and the 7 change places:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 11 7 1 11 8
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-16">

<p class="admonition-title">Solution to<a class="reference internal" href="#mystery-vector"> Exercise 3.6</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>To solve this, just notice that if <code class="docutils literal notranslate"><span class="pre">mystery[3</span> <span class="pre">1</span> <span class="pre">6</span> <span class="pre">5</span> <span class="pre">2</span> <span class="pre">4]</span></code> gives <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">11</span> <span class="pre">3</span> <span class="pre">9</span> <span class="pre">2</span> <span class="pre">15</span></code> then the 3rd item of <code class="docutils literal notranslate"><span class="pre">mystery</span></code> is 8, the 1st is 11, and so on. So <code class="docutils literal notranslate"><span class="pre">mystery</span></code> is actually:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mystery</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="nv">mystery</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8 11 3 9 2 15
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-17">

<p class="admonition-title">Solution to<a class="reference internal" href="#vec-findme"> Exercise 3.7</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>This exercise is similar to the one above. We start with the vector</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">vec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">47</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">14</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>and now we want to index into it with <code class="docutils literal notranslate"><span class="pre">vec[findMe]</span></code> to obtain the result <code class="docutils literal notranslate"><span class="pre">47</span> <span class="pre">27</span> <span class="pre">19</span> <span class="pre">14</span> <span class="pre">50</span> <span class="pre">74</span></code>. The 1st element of <code class="docutils literal notranslate"><span class="pre">findMe</span></code> should point to the 47 in <code class="docutils literal notranslate"><span class="pre">vec</span></code>, and so on:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">findMe</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
<span class="nv">vec</span><span class="sr">[</span><span class="nv">findMe</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">47 27 19 14 50 74
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-18">

<p class="admonition-title">Solution to<a class="reference internal" href="#source-set"> Exercise 3.8</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>The result of indexing a vector is always equal to the shape of the index. Hence the shape of <code class="docutils literal notranslate"><span class="pre">result</span></code> is equal to the shape of <code class="docutils literal notranslate"><span class="pre">set</span></code>, which is <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">3</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">source</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
<span class="nv">set</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="nv">source</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">set</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">result</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">source</span><span class="sr">[</span><span class="nv">set</span><span class="sr">]</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">result</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3
</span></div></div>
</div>
<p>In order to find out the values in <code class="docutils literal notranslate"><span class="pre">result</span></code> we first need to figure out the values in <code class="docutils literal notranslate"><span class="pre">set</span></code> and how they are laid out in the 3 by 3 matrix,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">set</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 3 6
9 1 5
7 3 4
</span></div></div>
</div>
<p>and then use those to index into the <code class="docutils literal notranslate"><span class="pre">source</span></code> vector; for example, in the top-left and bottom-right corners of <code class="docutils literal notranslate"><span class="pre">result</span></code> you will find the 4th element of <code class="docutils literal notranslate"><span class="pre">source</span></code>, which is 3:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">result</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 13 0
2 10 9
7 13 3
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-19">

<p class="admonition-title">Solution to<a class="reference internal" href="#v1-v2"> Exercise 3.9</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>There is <em>no</em> difference between the two vectors. Both are 3-item simple character vectors.</p>
<div class="solution admonition" id="Data-and-Variables-solution-20">

<p class="admonition-title">Solution to<a class="reference internal" href="#v3-v4"> Exercise 3.10</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">v3</span></code> is a 6-item vector. Some items are numeric, some are characters; it is a <em>mixed</em> vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v3</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="s1">&#39;Y&#39;</span><span class="w"> </span><span class="s1">&#39;e&#39;</span><span class="w"> </span><span class="s1">&#39;s&#39;</span><span class="w"> </span><span class="m">52</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">v3</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">6
</span></div></div>
</div>
<p>On the other hand, <code class="docutils literal notranslate"><span class="pre">v4</span></code> is a 4-item vector. It is a <em>nested array</em>, since the 3rd item is an enclosed character vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v4</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="s1">&#39;Yes&#39;</span><span class="w"> </span><span class="m">52</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">v4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
<p>We can visually distinguish the two if <code class="docutils literal notranslate"><span class="pre">]box</span></code> is turned on or if you use the <code class="docutils literal notranslate"><span class="pre">DISP</span></code> function (you can gain access to it with the <code class="docutils literal notranslate"><span class="pre">)copy</span> <span class="pre">Util</span> <span class="pre">DISP</span></code> command):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="nv">on</span><span class="w"></span>
<span class="nv">v3</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was OFF
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">15 48 Yes 52
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──┬──┬───┬──┐
│15│48│Yes│52│
└──┴──┴───┴──┘
</span></div></div>
</div>
<div class="solution admonition" id="Data-and-Variables-solution-21">

<p class="admonition-title">Solution to<a class="reference internal" href="#two-foolish"> Exercise 3.11</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>Replacing <code class="docutils literal notranslate"><span class="pre">two</span></code> (not <code class="docutils literal notranslate"><span class="pre">'two'</span></code>) by <code class="docutils literal notranslate"><span class="pre">2</span></code> (the value of the variable), one obtains <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">2</span> <span class="pre">⍴</span> <span class="pre">2</span> <span class="pre">2</span> <span class="pre">'⍴'</span> <span class="pre">'two'</span></code>. This gives away that <code class="docutils literal notranslate"><span class="pre">foolish</span></code> is a 2 by 2 matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">two</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="nv">foolish</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="s1">&#39;⍴&#39;</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="w"></span>
<span class="o">⍴</span><span class="nv">foolish</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 2
</span></div></div>
</div>
<p>To determine its contents we just need to lay out the <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">2</span> <span class="pre">'⍴'</span> <span class="pre">'two'</span></code> over the 2 rows of length 2 to obtain a nested matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">foolish</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┐
│2│2  │
├─┼───┤
│⍴│two│
└─┴───┘
</span></div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog-kernel"
        },
        kernelOptions: {
            kernelName: "dyalog-kernel",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog-kernel'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Getting-Started.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">2. </span>Getting Started</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Some-Primitive-Functions.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4. </span>Some Primitive Functions</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Bernard Legrand, reworked by Rodrigo Girão Serrão.<br/>
  
    <div class="extra_footer">
      <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
</a></p>
<p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>