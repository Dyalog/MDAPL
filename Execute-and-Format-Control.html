
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7. Execute &amp; Format Control &#8212; Mastering Dyalog APL</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Appendices" href="Appendices.html" />
    <link rel="prev" title="6. First-Aid Kit" href="First-Aid-Kit.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Mastering Dyalog APL</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="Introduction.html">
   1. Introduction - Will You Play APL With Me?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Getting-Started.html">
   2. Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Data-and-Variables.html">
   3. Data and Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Some-Primitive-Functions.html">
   4. Some Primitive Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="User-Defined-Functions.html">
   5. User-Defined Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="First-Aid-Kit.html">
   6. First-Aid Kit
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   7. Execute &amp; Format Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendices.html">
   8. Appendices
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Execute-and-Format-Control.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/Dyalog/MDAPL"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        <a class="edit-button" href="https://github.com/Dyalog/MDAPL/edit/master/Execute-and-Format-Control.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#execute">
   7.1. Execute
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definition">
     7.1.1. Definition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-typical-uses">
     7.1.2. Some Typical Uses
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#convert-text-into-numbers">
       7.1.2.1. Convert Text into Numbers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-safer-and-faster-solution">
       7.1.2.2. A Safer and Faster Solution
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#other-uses">
       7.1.2.3. Other Uses
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#make-things-simple">
     7.1.3. Make Things Simple
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-format-primitive">
   7.2. The Format Primitive
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#monadic-format">
     7.2.1. Monadic Format
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dyadic-format">
     7.2.2. Dyadic Format
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#definition-of-dyadic-format">
       7.2.2.1. Definition of Dyadic Format
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#overflow">
       7.2.2.2. Overflow
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#multiple-specifications">
       7.2.2.3. Multiple Specifications
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#scientific-representation">
       7.2.2.4. Scientific Representation
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#scalar-descriptor">
       7.2.2.5. Scalar Descriptor
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-fmt-system-function">
   7.3. The
   <code class="docutils literal notranslate">
    <span class="pre">
     ⎕FMT
    </span>
   </code>
   System Function
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#monadic-use">
     7.3.1. Monadic Use
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dyadic-use">
     7.3.2. Dyadic Use
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#overview">
       7.3.2.1. Overview
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specifications-i-and-f">
       7.3.2.2. Specifications I and F
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specification-a">
       7.3.2.3. Specification A
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specification-x">
       7.3.2.4. Specification X
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#text-inclusion-specification">
       7.3.2.5. Text Inclusion Specification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specification-g-the-picture-code">
       7.3.2.6. Specification G – The Picture Code
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specification-t">
       7.3.2.7. Specification T
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specification-e">
       7.3.2.8. Specification E
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quick-reference">
       7.3.2.9. Quick Reference
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#qualifiers-and-affixtures">
     7.3.3. Qualifiers and Affixtures
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#qualifiers">
       7.3.3.1. Qualifiers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#examples-of-qualifiers">
       7.3.3.2. Examples of Qualifiers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#affixtures">
       7.3.3.3. Affixtures
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#examples-of-affixtures">
       7.3.3.4. Examples of Affixtures
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#remarks-on-qualifiers-and-affixtures">
       7.3.3.5. Remarks on Qualifiers and Affixtures
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#output-in-the-session">
   7.4. Output in the Session
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#producing-output-with-the-dfns-workspace">
     7.4.1. Producing Output with the
     <code class="docutils literal notranslate">
      <span class="pre">
       dfns
      </span>
     </code>
     Workspace
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#box">
       7.4.1.1.
       <code class="docutils literal notranslate">
        <span class="pre">
         box
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cols">
       7.4.1.2.
       <code class="docutils literal notranslate">
        <span class="pre">
         cols
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#display-displays-and-displayr">
       7.4.1.3.
       <code class="docutils literal notranslate">
        <span class="pre">
         display
        </span>
       </code>
       ,
       <code class="docutils literal notranslate">
        <span class="pre">
         displays
        </span>
       </code>
       , and
       <code class="docutils literal notranslate">
        <span class="pre">
         displayr
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#disp-and-dsp">
       7.4.1.4.
       <code class="docutils literal notranslate">
        <span class="pre">
         disp
        </span>
       </code>
       and
       <code class="docutils literal notranslate">
        <span class="pre">
         dsp
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modifying-session-output-with-user-commands">
     7.4.2. Modifying Session Output with User Commands
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-brief-overview">
       7.4.2.1. A Brief Overview
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#disp-and-display">
       7.4.2.2.
       <code class="docutils literal notranslate">
        <span class="pre">
         disp
        </span>
       </code>
       and
       <code class="docutils literal notranslate">
        <span class="pre">
         display
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#box-and-boxing">
       7.4.2.3.
       <code class="docutils literal notranslate">
        <span class="pre">
         box
        </span>
       </code>
       (and
       <code class="docutils literal notranslate">
        <span class="pre">
         boxing
        </span>
       </code>
       )
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rows">
       7.4.2.4.
       <code class="docutils literal notranslate">
        <span class="pre">
         rows
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-specialist-s-section">
   7.5. The Specialist’s Section
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#advanced-usages-of-execute">
     7.5.1. Advanced Usages of Execute
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#name-conflict">
       7.5.1.1. Name Conflict
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conditional-execution">
       7.5.1.2. Conditional Execution
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-selection">
       7.5.1.3. Case Selection
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dynamic-variable-creation">
       7.5.1.4. Dynamic Variable Creation
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dyadic-execute">
       7.5.1.5. Dyadic Execute
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#formatting-data">
     7.5.2. Formatting Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#lack-of-precision">
       7.5.2.1. Lack of Precision
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#formatting-using-the-microsoft-net-framework">
       7.5.2.2. Formatting Using the Microsoft .NET Framework
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="execute-format-control">
<span id="execute-and-format-control-execute-format-control"></span><h1><span class="section-number">7. </span>Execute &amp; Format Control<a class="headerlink" href="#execute-format-control" title="Permalink to this headline">¶</a></h1>
<div class="section" id="execute">
<span id="execute-and-format-control-execute"></span><h2><span class="section-number">7.1. </span>Execute<a class="headerlink" href="#execute" title="Permalink to this headline">¶</a></h2>
<div class="section" id="definition">
<span id="execute-and-format-control-definition"></span><h3><span class="section-number">7.1.1. </span>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">¶</a></h3>
<p><em>Execute</em> is a monadic function represented by <code class="docutils literal notranslate"><span class="pre">⍎</span></code>, which you can type with <kbd>APL</kbd>+<kbd>;</kbd>; its dyadic use will be explained in the Specialist’s Section at the end of this chapter.</p>
<p><em>Execute</em> takes a character vector (or scalar) as its argument.</p>
<p>If the character vector represents a valid APL expression, <em>Execute</em> will just… execute it, as if it had been typed on the keyboard.
Otherwise, an error will be reported.</p>
<p>Take a look at the following example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">letters</span> <span class="kd">←</span> <span class="s1">&#39;5×6+2&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">5×6+2

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="nv">letters</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">40

</span></div></div>
</div>
<p>The argument can contain any valid expression:</p>
<ul class="simple">
<li><p>numeric or character constants, or variables;</p></li>
<li><p>left arrows (assignment) or right arrows (branch);</p></li>
<li><p>primitive or defined functions and operators; and</p></li>
<li><p>calls to other <em>execute</em> functions.</p></li>
</ul>
<p>Let us define a short function to call from within <em>execute</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="bp">∇</span> <span class="nv">r</span> <span class="kd">←</span> <span class="nv">x</span> <span class="nv">Plus</span> <span class="nv">y</span>
    <span class="nv">r</span> <span class="kd">←</span> <span class="nv">x</span> <span class="o">+</span> <span class="nv">y</span>
<span class="bp">∇</span>
</pre></div>
</div>
</div>
</div>
<p>In the expression below, <em>execute</em> calls our <code class="docutils literal notranslate"><span class="pre">Plus</span></code> function and creates a new variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="s1">&#39;new ← 3 + 4 Plus 5&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">new</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12

</span></div></div>
</div>
<p>If the expression returns a result, it will be used as the result of <em>execute</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span> <span class="kd">←</span> <span class="o">⍎</span><span class="s1">&#39;3 Plus 10&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">13

</span></div></div>
</div>
<p>We could just as well have written</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="s1">&#39;res ← 3 Plus 10&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">13

</span></div></div>
</div>
<!--begin beware style=warning-->
<p><em><strong>Beware</strong></em>:</p>
<blockquote>
<div><p>Note that if the argument does not return a result, it can still be executed, but <em>execute</em> will not return a result, and any attempt to assign it to a variable or to use it in any other way will cause a <code class="docutils literal notranslate"><span class="pre">VALUE</span> <span class="pre">ERROR</span></code>.</p>
</div></blockquote>
<!--end-->
<p>Take a modification of our <code class="docutils literal notranslate"><span class="pre">Plus</span></code> function that returns no result:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="bp">∇</span> <span class="nv">x</span> <span class="nv">PlusNoRes</span> <span class="nv">y</span><span class="sr">;</span><span class="nv">r</span>
    <span class="nv">r</span> <span class="kd">←</span> <span class="nv">x</span><span class="o">+</span><span class="nv">y</span>
<span class="bp">∇</span>
</pre></div>
</div>
</div>
</div>
<p>These expressions all work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="s1">&#39;&#39;</span>
<span class="o">⍎</span><span class="s1">&#39;     &#39;</span>
<span class="o">⍎</span><span class="s1">&#39;3 PlusNoRes 5&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>But trying to assign results from all those expressions will fail,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span> <span class="kd">←</span> <span class="o">⍎</span><span class="s1">&#39;&#39;</span>
<span class="nv">res</span> <span class="kd">←</span> <span class="o">⍎</span><span class="s1">&#39;     &#39;</span>
<span class="nv">res</span> <span class="kd">←</span> <span class="o">⍎</span><span class="s1">&#39;3 PlusNoRes 5&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VALUE ERROR: No result was provided when the context expected one
      res←⍎&#39;&#39;
          ∧
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VALUE ERROR: No result was provided when the context expected one
      res←⍎&#39;     &#39;
          ∧
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>⍎VALUE ERROR: No result was provided when the context expected one
      3 PlusNoRes 5
        ∧
</pre></div>
</div>
</div>
</div>
<p>because that is equivalent to writing the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span> <span class="kd">←</span> 
<span class="nv">res</span> <span class="kd">←</span>       
<span class="nv">res</span> <span class="kd">←</span> <span class="m">3</span> <span class="nv">PlusNoRes</span> <span class="m">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SYNTAX ERROR: Missing right argument
      res←
         ∧
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SYNTAX ERROR: Missing right argument
      res←
         ∧
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VALUE ERROR: No result was provided when the context expected one
      res←3 PlusNoRes 5
            ∧
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="some-typical-uses">
<span id="execute-and-format-control-some-typical-uses"></span><h3><span class="section-number">7.1.2. </span>Some Typical Uses<a class="headerlink" href="#some-typical-uses" title="Permalink to this headline">¶</a></h3>
<div class="section" id="convert-text-into-numbers">
<span id="execute-and-format-control-convert-text-into-numbers"></span><h4><span class="section-number">7.1.2.1. </span>Convert Text into Numbers<a class="headerlink" href="#convert-text-into-numbers" title="Permalink to this headline">¶</a></h4>
<p><em>Execute</em> may be used to convert characters into numbers.
One common application of execute is to convert numeric data, stored as character strings in a text file (for example, a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file), into binary numbers.
You can just read in a string such as <code class="docutils literal notranslate"><span class="pre">'123,</span> <span class="pre">456,</span> <span class="pre">789'</span></code> and execute it to obtain the corresponding 3-item vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="s1">&#39;123, 456, 789&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">123 456 789

</span></div></div>
</div>
<p>We saw in <a class="reference internal" href="User-Defined-Functions.html"><span class="doc std std-doc">the chapter about user-defined functions</span></a> that <em>format</em> can be used to convert numbers to characters; the reverse can be done using <em>execute</em>.
This explains why those two functions are represented by “reversed” symbols, as shown in <a class="reference internal" href="#fig-dual-execute-format"><span class="std std-numref">Fig. 7.1</span></a>:</p>
<div class="figure align-default" id="dual-execute-format">
<span id="fig-dual-execute-format"></span><img alt="_images/Dual_Execute_Format.png" src="_images/Dual_Execute_Format.png" />
<p class="caption"><span class="caption-number">Fig. 7.1 </span><span class="caption-text">Representation of the duality between the <em>execute</em> and <em>format</em> primitives.</span><a class="headerlink" href="#dual-execute-format" title="Permalink to this image">¶</a></p>
</div>
<p>There is, however, a major difference: <em>format</em> can be applied to matrices, whereas <em>execute</em> can only be applied to vectors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">birthdate</span> <span class="kd">←</span> <span class="s1">&#39;October 14th, 1952&#39;</span>
<span class="o">+</span><span class="na">/</span> <span class="o">⍎</span> <span class="vg">⎕</span><span class="kd">←</span><span class="nv">birthdate</span><span class="sr">[</span><span class="m">9</span> <span class="m">10</span><span class="o">,</span><span class="m">13</span><span class="o">+⍳</span><span class="m">5</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">14 1952

1966

</span></div></div>
</div>
<p>Notice that the <code class="docutils literal notranslate"><span class="pre">'14</span> <span class="pre">1952'</span></code> above is a character <em>vector</em> of length 7, and not a vector of 2 character vectors.
In fact, compare</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">birthdate</span><span class="sr">[</span><span class="m">9</span> <span class="m">10</span><span class="o">,</span><span class="m">13</span><span class="o">+⍳</span><span class="m">5</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">14 1952

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="nv">birthdate</span><span class="sr">[</span><span class="m">9</span> <span class="m">10</span><span class="o">,</span><span class="m">13</span><span class="o">+⍳</span><span class="m">5</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7

</span></div></div>
</div>
<p>with</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;14&#39;</span> <span class="s1">&#39;1952&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──┬────┐
│14│1952│
└──┴────┘

</span></div></div>
</div>
<p>to which <code class="docutils literal notranslate"><span class="pre">⍎</span></code> <em>cannot</em> be applied:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="s1">&#39;14&#39;</span> <span class="s1">&#39;1952&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DOMAIN ERROR
      ⍎&#39;14&#39; &#39;1952&#39;
      ∧
</pre></div>
</div>
</div>
</div>
<p>Because <em>execute</em> can only be applied to vectors, a matrix of numeric characters can only be converted after it has been ravelled.
But to avoid characters of one row being attached to those of the previous row, it is necessary to catenate a blank character before ravelling.</p>
<p>As an example, take the matrix <code class="docutils literal notranslate"><span class="pre">mat</span></code> below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">mat</span> <span class="kd">←</span> <span class="m">4</span> <span class="m">4</span><span class="o">⍴</span><span class="s1">&#39; 8451237 9332607&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 845
1237
 933
2607

</span></div></div>
</div>
<p>If we ravel it and execute it, we get</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎,</span><span class="nv">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8451237 9332607

</span></div></div>
</div>
<p>which is not what we want.
The correction conversion will be obtained by first catenating a blank space:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎,</span><span class="nv">mat</span><span class="o">,</span><span class="s1">&#39; &#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">845 1237 933 2607

</span></div></div>
</div>
</div>
<div class="section" id="a-safer-and-faster-solution">
<span id="execute-and-format-control-a-safer-and-faster-solution"></span><h4><span class="section-number">7.1.2.2. </span>A Safer and Faster Solution<a class="headerlink" href="#a-safer-and-faster-solution" title="Permalink to this headline">¶</a></h4>
<p>Using <em>execute</em> to convert characters into numbers may cause errors if the characters do not represent valid numbers.
So, we strongly recommend that you instead use <code class="docutils literal notranslate"><span class="pre">⎕VFI</span></code> (for <em>Verify and Fix Input</em>).
This is a specialised <em>system function</em> that performs the same conversion, but securely, and is about twice as fast as <em>execute</em>.
<code class="docutils literal notranslate"><span class="pre">⎕VFI</span></code> will be studied in <span class="xref myst">the chapter about system interfaces</span>.</p>
</div>
<div class="section" id="other-uses">
<span id="execute-and-format-control-other-uses"></span><h4><span class="section-number">7.1.2.3. </span>Other Uses<a class="headerlink" href="#other-uses" title="Permalink to this headline">¶</a></h4>
<p><em>Execute</em> can be used for many other purposes, including some that may be considered to be rather advanced programming techniques.
Some examples are provided in the Specialist’s Section at the end of this chapter:</p>
<ul class="simple">
<li><p>conditional execution (rather obsolete);</p></li>
<li><p>case selection (also obsolete);</p></li>
<li><p>dynamic variable creation.</p></li>
</ul>
<p>Please bear in mind that these <em>execute</em> use-cases aren’t necessarily <em>recommended</em> programming practices.</p>
</div>
</div>
<div class="section" id="make-things-simple">
<span id="execute-and-format-control-make-things-simple"></span><h3><span class="section-number">7.1.3. </span>Make Things Simple<a class="headerlink" href="#make-things-simple" title="Permalink to this headline">¶</a></h3>
<p>The vector passed in to <em>execute</em> is often constructed by catenating pieces of text, or tokens.</p>
<p>These tokens may contain quotes (which must then be doubled), commas, parentheses, etc.
But to build the final expression, you will also need quotes (to delimit the tokens), commas (to concatenate them), parentheses, and so on.</p>
<p>By now, the expression is becoming extremely complex.
It may be difficult to see if a comma is part of a token or is being used to concatenate two successive tokens, and this is only partly alleviated by syntax colouring that modern IDEs provide.
It may be hard to see whether or not the parentheses and quotes are properly balanced.
If the final expression is wrong, fixing it might be difficult, and if it is correct, later modifying it or expanding it might be just as difficult.</p>
<p>To simplify maintenance, it is good practice to assign the text to a variable before executing it.
If the operation fails, for any reason, you can just display the variable to see if it looks correct.
For example, here is a statement involving <em>execute</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">size</span> <span class="kd">←</span> <span class="m">43</span>
<span class="o">⍎</span><span class="s1">&#39;tab&#39;</span><span class="o">,</span><span class="p">(</span><span class="o">⍕</span><span class="nv">size</span><span class="p">)</span><span class="o">,</span><span class="s1">&#39;←(4 &#39;</span><span class="o">,</span><span class="p">(</span><span class="o">⍕</span><span class="nv">size</span><span class="p">)</span><span class="o">,</span><span class="s1">&#39;⍴&#39;&#39;) &#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>⍎SYNTAX ERROR
      tab43←(4 43⍴&#39;) &#39;
                 ∧
</pre></div>
</div>
</div>
</div>
<p>That’s rather obscure!
If any problem occurs, it can be difficult to spot the cause.</p>
<p>Let us insert a variable just before the <em>execute</em> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍎</span><span class="nv">debug</span><span class="kd">←</span><span class="s1">&#39;tab&#39;</span><span class="o">,</span><span class="p">(</span><span class="o">⍕</span><span class="nv">size</span><span class="p">)</span><span class="o">,</span><span class="s1">&#39;←(4 &#39;</span><span class="o">,</span><span class="p">(</span><span class="o">⍕</span><span class="nv">size</span><span class="p">)</span><span class="o">,</span><span class="s1">&#39;⍴&#39;&#39;) &#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>⍎SYNTAX ERROR
      tab43←(4 43⍴&#39;) &#39;
                 ∧
</pre></div>
</div>
</div>
</div>
<p>Now, it easy to look at <code class="docutils literal notranslate"><span class="pre">debug</span></code> and see if its value is what we would expect:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">debug</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">tab43←(4 43⍴') '

</span></div></div>
</div>
<p>Obviously, this is not a correct statement, so it failed when we tried to execute it.</p>
</div>
</div>
<div class="section" id="the-format-primitive">
<span id="execute-and-format-control-the-format-primitive"></span><h2><span class="section-number">7.2. </span>The Format Primitive<a class="headerlink" href="#the-format-primitive" title="Permalink to this headline">¶</a></h2>
<p>The <em>format</em> primitive function <code class="docutils literal notranslate"><span class="pre">⍕</span></code>, typed with <kbd>APL</kbd>+<kbd>’</kbd>, has already been briefly described in <a class="reference internal" href="User-Defined-Functions.html#user-defined-functions-format"><span class="std std-numref">Section 5.9.2</span></a>.
We shall cover it in more depth in this section.</p>
<div class="section" id="monadic-format">
<span id="execute-and-format-control-monadic-format"></span><h3><span class="section-number">7.2.1. </span>Monadic Format<a class="headerlink" href="#monadic-format" title="Permalink to this headline">¶</a></h3>
<p>Monadic <em>format</em> converts any array, whatever its value, into its character representation.
This applies to numbers, characters, and nested arrays.
The result is exactly the same as you would see if you displayed the array on your screen, because APL internally uses monadic <em>format</em> to display arrays.
The previous statement assumes that you have no options modifying your output; for example, if you have <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">on</span></code> it is no longer true that <em>format</em> produces exactly the same representation as if you just displayed the the array yourself:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍕</span><span class="m">1</span> <span class="p">(</span><span class="m">2</span> <span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1  2 3 

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Is ON

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="p">(</span><span class="m">2</span> <span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┐
│1│2 3│
└─┴───┘

</span></div></div>
</div>
<p>Ignoring the effects of such session modifiers like <code class="docutils literal notranslate"><span class="pre">]box</span></code>, which will be covered with some more detail later in this chapter (see <a class="reference internal" href="#execute-and-format-control-modifying-session-output-with-user-commands"><span class="std std-numref">Section 7.4.2</span></a>), monadic <em>format</em> is such that:</p>
<ul class="simple">
<li><p>character arrays are not converted, they remain unchanged; and</p></li>
<li><p>numeric and nested arrays are converted into vectors or matrices of characters.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">chemistry</span> <span class="kd">←</span> <span class="m">3</span> <span class="m">5</span><span class="o">⍴</span><span class="s1">&#39;H2SO4CaCO3Fe2O3&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">H2SO4
CaCO3
Fe2O3

</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">chemistry</span></code> is a character matrix with shape <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">5</span></code>, and it is not modified by <code class="docutils literal notranslate"><span class="pre">⍕</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="vg">⎕</span><span class="kd">←</span><span class="o">⍕</span><span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">H2SO4
CaCO3
Fe2O3

3 5

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">chemistry</span><span class="o">≡⍕</span><span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1

</span></div></div>
</div>
<p>On the other hand, a numeric vector with, say, 3 items, becomes a (longer) character vector once converted:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="m">52</span> <span class="m">69</span> <span class="m">76</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="vg">⎕</span><span class="kd">←</span><span class="o">⍕</span><span class="m">52</span> <span class="m">69</span> <span class="m">76</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">52 69 76

8

</span></div></div>
</div>
<p>A nested matrix like <code class="docutils literal notranslate"><span class="pre">nesMat</span></code>,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">nesMat</span> <span class="kd">←</span> <span class="m">2</span> <span class="m">3</span> <span class="o">⍴</span> <span class="s1">&#39;Dyalog&#39;</span> <span class="m">44</span> <span class="s1">&#39;Hello&#39;</span> <span class="m">27</span> <span class="p">(</span><span class="m">2</span> <span class="m">2</span> <span class="o">⍴</span> <span class="m">8</span> <span class="m">6</span> <span class="m">2</span> <span class="m">4</span><span class="p">)</span> <span class="p">(</span><span class="m">2</span> <span class="m">3</span><span class="o">⍴</span><span class="m">1</span> <span class="m">2</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────┬───┬─────┐
│Dyalog│44 │Hello│
├──────┼───┼─────┤
│27    │8 6│1 2 0│
│      │2 4│0 0 5│
└──────┴───┴─────┘

2 3

</span></div></div>
</div>
<p>which we have already used before, becomes a character matrix that is 20 characters wide and with 3 rows, because <code class="docutils literal notranslate"><span class="pre">nesMat</span></code> contained two small matrices:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="vg">⎕</span><span class="kd">←</span><span class="o">⍕</span><span class="nv">nesMat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> Dyalog   44  Hello 
     27  8 6  1 2 0 
         2 4  0 0 5 

3 20

</span></div></div>
</div>
</div>
<div class="section" id="dyadic-format">
<span id="execute-and-format-control-dyadic-format"></span><h3><span class="section-number">7.2.2. </span>Dyadic Format<a class="headerlink" href="#dyadic-format" title="Permalink to this headline">¶</a></h3>
<div class="section" id="definition-of-dyadic-format">
<span id="execute-and-format-control-definition-of-dyadic-format"></span><h4><span class="section-number">7.2.2.1. </span>Definition of Dyadic Format<a class="headerlink" href="#definition-of-dyadic-format" title="Permalink to this headline">¶</a></h4>
<p>Dyadic <em>format</em> applies <strong>only</strong> to numeric values; any attempt to apply it to characters will cause a <code class="docutils literal notranslate"><span class="pre">DOMAIN</span> <span class="pre">ERROR</span></code>.</p>
<p>The general syntax of <em>format</em> is <code class="docutils literal notranslate"><span class="pre">descriptor⍕values</span></code>,
where <code class="docutils literal notranslate"><span class="pre">values</span></code> can be an array of any <em>rank</em>.
Dyadic <em>format</em> converts numbers into text in a format that is described by the left argument, the format <em>descriptor</em>.
<code class="docutils literal notranslate"><span class="pre">descriptor</span></code> is therefore made up of two numbers:</p>
<ul class="simple">
<li><p>the first number indicates the number of characters to be assigned to each numeric value; or to put it another way, the width of the field in which each numeric value is to be represented; and</p></li>
<li><p>the second number indicates how many decimal digits will be displayed.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕RL</span> <span class="kd">←</span> <span class="m">73</span>
<span class="vg">⎕</span><span class="kd">←</span><span class="nv">nm</span> <span class="kd">←</span> <span class="p">(</span><span class="o">?</span><span class="m">3</span> <span class="m">4</span><span class="o">⍴</span><span class="m">200000</span><span class="p">)</span><span class="o">÷</span><span class="m">100</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  21.21 1534.88 375.46  704.5 
1125.14 1963.52 464.45 1438.25
 796.53 1569    157.14  886.59

</span></div></div>
</div>
<p>The representation above is the normal display of the <code class="docutils literal notranslate"><span class="pre">nm</span></code> matrix, and it is also how monadic <em>format</em> would present the matrix.</p>
<p>Compare that with the result below, where we represent each number right-aligned in a field that is 8 characters wide, with 2 decimal digits.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">8</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21 1534.88  375.46  704.50
 1125.14 1963.52  464.45 1438.25
  796.53 1569.00  157.14  886.59

</span></div></div>
</div>
<p>The result has, of course, 3 rows and 32 columns (8 characters for each of the 4 columns):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="m">8</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 32

</span></div></div>
</div>
<p>We can also draw a basic ruler (with the help of a short dfn) below the formatted matrix to help you count the width of each field:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="nv">ruler</span> <span class="kd">←</span> <span class="kt">{</span>
    <span class="nv">c</span> <span class="kd">←</span> <span class="m">¯1</span><span class="o">↑⍴</span><span class="bp">⍵</span>
    <span class="bp">⍵</span><span class="o">⍪</span><span class="nv">c</span><span class="o">⍴</span><span class="m">4</span> <span class="m">1</span> <span class="m">4</span> <span class="m">1</span><span class="na">/</span><span class="s1">&#39;¯&#39;&#39;¯|&#39;</span>
<span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="m">8</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21 1534.88  375.46  704.50
 1125.14 1963.52  464.45 1438.25
  796.53 1569.00  157.14  886.59
¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯

</span></div></div>
</div>
<p>In the next example we represent each number in a field that is 6 characters wide, right-aligned, and with no decimal digits.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="m">6</span> <span class="m">0</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">    21  1535   375   705
  1125  1964   464  1438
   797  1569   157   887
¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯

</span></div></div>
</div>
<p>The result has now 3 rows and 24 columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="m">6</span> <span class="m">0</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 24

</span></div></div>
</div>
<!--begin remark-->
<p><em><strong>Remark</strong></em>:</p>
<blockquote>
<div><p>You can see that the numbers to be formatted are <strong>rounded</strong> rather than truncated when the specified format does not allow the full precision of the numbers to be shown.</p>
</div></blockquote>
<!--end--></div>
<div class="section" id="overflow">
<span id="execute-and-format-control-overflow"></span><h4><span class="section-number">7.2.2.2. </span>Overflow<a class="headerlink" href="#overflow" title="Permalink to this headline">¶</a></h4>
<p>If a column is not wide enough to represent some of the numbers, these numbers will be replaced by asterisks.</p>
<p>Recall what <code class="docutils literal notranslate"><span class="pre">nm</span></code> looked like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  21.21 1534.88 375.46  704.5 
1125.14 1963.52 464.45 1438.25
 796.53 1569    157.14  886.59

</span></div></div>
</div>
<p>We have seen above that <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">2⍕nm</span></code> looked good:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">8</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21 1534.88  375.46  704.50
 1125.14 1963.52  464.45 1438.25
  796.53 1569.00  157.14  886.59

</span></div></div>
</div>
<p>If we reduce the width of the columns by 1, some values will now be adjacent to the values immediately to their left, making them difficult to read. For example, the second column will be adjacent to the left column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">7</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  21.211534.88 375.46 704.50
1125.141963.52 464.451438.25
 796.531569.00 157.14 886.59

</span></div></div>
</div>
<p>If we further reduce the width of the columns, the largest values will no longer fit in their allotted space and will be replaced by asterisks. Most of the other numbers are now adjacent to their neighbours.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">6</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 21.21******375.46704.50
************464.45******
796.53******157.14886.59

</span></div></div>
</div>
<!--begin remark-->
<p><em><strong>Remark</strong></em>:</p>
<blockquote>
<div><p>To calculate the width required to represent a number you must account for the minus sign, the integer digits, the decimal point, and as many decimal digits as specified in the <em>descriptor</em>.</p>
</div></blockquote>
</div>
<div class="section" id="multiple-specifications">
<span id="execute-and-format-control-multiple-specifications"></span><h4><span class="section-number">7.2.2.3. </span>Multiple Specifications<a class="headerlink" href="#multiple-specifications" title="Permalink to this headline">¶</a></h4>
<p>One can define a different format for each column of numbers.
Each format definition is made of 2 numbers, so if the matrix has <code class="docutils literal notranslate"><span class="pre">n</span></code> columns, the left argument must have <code class="docutils literal notranslate"><span class="pre">2×n</span></code> items:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="m">8</span> <span class="m">2</span> <span class="m">10</span> <span class="m">0</span> <span class="m">9</span> <span class="m">4</span> <span class="m">8</span> <span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21      1535 375.4600  704.50
 1125.14      1964 464.4500 1438.25
  796.53      1569 157.1400  886.59
¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'

</span></div></div>
</div>
<p>In this case, we formatted the first column with <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">2</span></code>, the second column with <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">0</span></code>, the third column with <code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">4</span></code>, and the fourth column with <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">2</span></code> again.</p>
<p>If the format descriptor (the left argument) does not contain enough pairs of values, it will be repeated as many times as needed, provided that the width of the matrix is a multiple of the number of pairs.</p>
<p>In other words, in <code class="docutils literal notranslate"><span class="pre">desc⍕values</span></code>, the residue <code class="docutils literal notranslate"><span class="pre">(≢desc)|2×¯1↑⍴values</span></code> must be equal to 0, otherwise a <code class="docutils literal notranslate"><span class="pre">LENGTH</span> <span class="pre">ERROR</span></code> is reported.
For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">desc</span> <span class="kd">←</span> <span class="m">8</span> <span class="m">2</span> <span class="m">10</span> <span class="m">0</span>
<span class="nv">desc</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21      1535  375.46       705
 1125.14      1964  464.45      1438
  796.53      1569  157.14       887

</span></div></div>
</div>
<p>In the above, columns 3 and 4 reused the <em>descriptors</em> of columns 1 and 2, respectively <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">0</span></code>.
This is equivalent to writing the repeated pairs by hand:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">8</span> <span class="m">2</span> <span class="m">10</span> <span class="m">0</span> <span class="m">8</span> <span class="m">2</span> <span class="m">10</span> <span class="m">0</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21      1535  375.46       705
 1125.14      1964  464.45      1438
  796.53      1569  157.14       887

</span></div></div>
</div>
<p>We can also compare <code class="docutils literal notranslate"><span class="pre">desc⍕nm</span></code> with the statement above about the residue:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">≢</span><span class="nv">desc</span><span class="p">)</span><span class="o">|</span><span class="m">2</span><span class="o">×</span><span class="m">¯1</span><span class="o">↑⍴</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0

</span></div></div>
</div>
</div>
<div class="section" id="scientific-representation">
<span id="execute-and-format-control-scientific-representation"></span><h4><span class="section-number">7.2.2.4. </span>Scientific Representation<a class="headerlink" href="#scientific-representation" title="Permalink to this headline">¶</a></h4>
<p>If the second item of a pair of <em>format</em> descriptors is negative, for example in <code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">¯3⍕12345</span></code>, numbers are formatted in <em>scientific</em> notation (also described as <em>exponential</em> notation; see <a class="reference internal" href="Data-and-Variables.html#data-and-variables-representation-of-numbers"><span class="std std-numref">Section 3.10.2</span></a>), with as many significant digits in the mantissa as specified by the descriptor:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">8</span> <span class="m">¯2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 2.1E1   1.5E3   3.8E2   7.0E2  
 1.1E3   2.0E3   4.6E2   1.4E3  
 8.0E2   1.6E3   1.6E2   8.9E2  

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">8</span> <span class="m">¯4</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2.121E1 1.535E3 3.755E2 7.045E2 
1.125E3 1.964E3 4.645E2 1.438E3 
7.965E2 1.569E3 1.571E2 8.866E2 

</span></div></div>
</div>
<p>You can refer to <a class="reference external" href="https://en.wikipedia.org/wiki/Scientific_notation#E_notation">Wikipedia’s article on “Scientific Notation”</a> for more information on how scientific notation works.</p>
</div>
<div class="section" id="scalar-descriptor">
<span id="execute-and-format-control-scalar-descriptor"></span><h4><span class="section-number">7.2.2.5. </span>Scalar Descriptor<a class="headerlink" href="#scalar-descriptor" title="Permalink to this headline">¶</a></h4>
<p>When the <em>descriptor</em> is reduced to a simple scalar, the columns are formatted in the smallest width compatible with the values they contain, plus one separating space.
The scalar descriptor is then used to specify the number of decimal places to use, or the number of significant digits to use in the mantissa of the scientific representation of the numbers, depending on the sign of the descriptor.</p>
<p>For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21 1534.88 375.46  704.50
 1125.14 1963.52 464.45 1438.25
  796.53 1569.00 157.14  886.59

</span></div></div>
</div>
<p>tells <code class="docutils literal notranslate"><span class="pre">⍕</span></code> to use 2 decimal places for all numbers, whereas</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯3</span><span class="o">⍕</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 2.12E1 1.53E3 3.75E2 7.05E2
 1.13E3 1.96E3 4.64E2 1.44E3
 7.97E2 1.57E3 1.57E2 8.87E2

</span></div></div>
</div>
<p>tells <code class="docutils literal notranslate"><span class="pre">⍕</span></code> to use 3 digits in the mantissa of all numbers.</p>
<p>In both examples above we see that each column is separated from the preceding one (and from the left margin too!) by a single space.</p>
<p>This technique is convenient for experimental purposes, to have the most compact presentation possible, but you cannot control the total width of the final result with it.</p>
</div>
</div>
</div>
<div class="section" id="the-fmt-system-function">
<span id="execute-and-format-control-the-fmt-system-function"></span><h2><span class="section-number">7.3. </span>The <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> System Function<a class="headerlink" href="#the-fmt-system-function" title="Permalink to this headline">¶</a></h2>
<p>The <em>format</em> primitive function is inadequate for producing professional looking output, such as one may require for common business purposes, because:</p>
<ul class="simple">
<li><p>negative values are represented by a high minus sign, which is rather unusual outside the APL world;</p></li>
<li><p>a large value, like 5244172.68, is displayed in a single unpleasant block, while it would look better with thousands separators, like this: 5,244,172.68;</p></li>
<li><p>national conventions differ from one country to another. I would be convenient if the value shown above could be written as 5,244,172.68, or 5 244 172,68, or 5.244.172,68; and</p></li>
<li><p>it would be nice if negative values could have different styles of presentation, depending on the usage and the context: -427 or (427).</p></li>
</ul>
<p>For all these reasons, the <code class="docutils literal notranslate"><span class="pre">⍕</span></code> primitive is sometimes inappropriate, and it is better to use a <em>system function</em> named <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> (where <code class="docutils literal notranslate"><span class="pre">FMT</span></code> also stands for <em>format</em>).</p>
<div class="section" id="monadic-use">
<span id="execute-and-format-control-monadic-use"></span><h3><span class="section-number">7.3.1. </span>Monadic Use<a class="headerlink" href="#monadic-use" title="Permalink to this headline">¶</a></h3>
<p>Monadic <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code>, like its primitive counterpart, converts numbers into text, without any specific control over the formatting.</p>
<p>The result of <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> is <strong>always</strong> a matrix, even if it is applied to a numeric scalar or vector.
This is different from <code class="docutils literal notranslate"><span class="pre">⍕</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴⍕</span> <span class="m">523</span> <span class="m">12</span> <span class="m">742</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">10

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="nf">⎕FMT</span> <span class="m">523</span> <span class="m">12</span> <span class="m">742</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 10

</span></div></div>
</div>
<p>The general presentation is the same, except for some very special cases.</p>
</div>
<div class="section" id="dyadic-use">
<span id="execute-and-format-control-dyadic-use"></span><h3><span class="section-number">7.3.2. </span>Dyadic Use<a class="headerlink" href="#dyadic-use" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<span id="execute-and-format-control-overview"></span><h4><span class="section-number">7.3.2.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>Like <code class="docutils literal notranslate"><span class="pre">⍕</span></code>, dyadic <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> accepts a <em>descriptor</em> for its left argument: <code class="docutils literal notranslate"><span class="pre">descriptor</span> <span class="pre">⎕FMT</span> <span class="pre">values</span></code>.</p>
<p>The right argument <code class="docutils literal notranslate"><span class="pre">values</span></code> can be:</p>
<ul class="simple">
<li><p>a scalar, a vector, a matrix, but, unlike <code class="docutils literal notranslate"><span class="pre">⍕</span></code>, <strong>not</strong> a higher rank array; or</p></li>
<li><p>a nested scalar or a nested vector, whose items are simple arrays (not nested) or rank not greater than 2.</p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">values</span></code> is a nested vector, each of its items must be homogeneous (either character or numeric).
In other words, an item of <code class="docutils literal notranslate"><span class="pre">values</span></code> may not itself be of mixed type.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">descriptor</span></code> argument is a character vector, made of a succession of elementary descriptors separated by commas; for example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;I6,4A2,4F8.2&#39;</span> <span class="nf">⎕FMT</span> <span class="p">(</span><span class="m">12</span> <span class="m">3</span> <span class="m">4</span><span class="p">)(</span><span class="m">2</span> <span class="m">4</span><span class="o">⍴</span><span class="s1">&#39;ABCDEFGH&#39;</span><span class="p">)</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">    12 A B C D   21.21 1534.88  375.46  704.50
     3 E F G H 1125.14 1963.52  464.45 1438.25
     4          796.53 1569.00  157.14  886.59

</span></div></div>
</div>
<p>Each elementary descriptor is made up of:</p>
<ul class="simple">
<li><p>a letter, the <em>specification</em>, specifying the data representation (integer, decimal, character);</p></li>
<li><p>numeric values which specify the width and the shape of the result;</p></li>
<li><p><em>qualifiers</em> and <em>affixtures</em>, used to specify further the details of the formatting; and</p></li>
<li><p>sometimes a <em>repetition factor</em>, to apply the same description to several columns.</p></li>
</ul>
<p>These elementary descriptors are used one after the other, from left to right, and applied to successive values (or columns of values).</p>
<p>Usually each array specified on the right has its own specific descriptor on the left.</p>
<p>For example, in the example statement above,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'I6'</span></code> applies to the vector <code class="docutils literal notranslate"><span class="pre">12</span> <span class="pre">3</span> <span class="pre">4</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'4A2'</span></code> applies to the four columns of the character matrix <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">4⍴ABCDEFGH</span></code>; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'F8.2'</span></code> applies to <code class="docutils literal notranslate"><span class="pre">nm</span></code>.</p></li>
</ul>
<p>However, an elementary descriptor can apply to several arrays if they are to share the same formatting, or a single array can require several descriptors when each of its columns is to be formatted differently.</p>
<p>Matrices are formatted normally, whereas vectors are transposed (vertically) into columns.</p>
</div>
<div class="section" id="specifications-i-and-f">
<span id="execute-and-format-control-specifications-i-and-f"></span><h4><span class="section-number">7.3.2.2. </span>Specifications I and F<a class="headerlink" href="#specifications-i-and-f" title="Permalink to this headline">¶</a></h4>
<p>These specifications are used to display numeric values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'I'</span></code> for <strong>I</strong>ntegers; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'F'</span></code> for <strong>F</strong>ractional.</p></li>
</ul>
<p>They use the following syntax:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'rIw'</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'w'</span></code> is the <strong>w</strong>idth (the number of characters) dedicated to each column of numbers; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'r'</span></code> is the number of columns to which this format specification is to be applied (this is the <strong>r</strong>epetition factor mentioned earlier.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">'rFw.d'</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'w'</span></code> is the <strong>w</strong>idth (the number of characters) dedicated to each column of numbers;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'d'</span></code> is the number of <strong>d</strong>ecimal digits to display; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'r'</span></code> is the <strong>r</strong>epetition factor.</p></li>
</ul>
</li>
</ul>
<p>Notice that the role of <code class="docutils literal notranslate"><span class="pre">'w.d'</span></code> in the specification <code class="docutils literal notranslate"><span class="pre">'F'</span></code> is related to the syntax of the left argument of the primitive function <em>format</em>.</p>
<p>Let us work on the numeric matrix <code class="docutils literal notranslate"><span class="pre">nm</span></code>,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  21.21 1534.88 375.46  704.5 
1125.14 1963.52 464.45 1438.25
 796.53 1569    157.14  886.59

</span></div></div>
</div>
<p>and on the following <code class="docutils literal notranslate"><span class="pre">price</span></code> vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">price</span> <span class="kd">←</span> <span class="m">5.2</span> <span class="m">11.5</span> <span class="m">3.6</span> <span class="m">4</span> <span class="m">8.45</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="s1">&#39;I4,2F9.1,I8,F6.1&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">nm</span> <span class="nv">price</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  21   1534.9    375.5     705   5.2
1125   1963.5    464.5    1438  11.5
 797   1569.0    157.1     887   3.6
                                 4.0
                                 8.5
¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯

</span></div></div>
</div>
<p>Here is an explanation of the descriptors used above:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'I4'</span></code>: the first column of <code class="docutils literal notranslate"><span class="pre">nm</span></code> is displayed with a width of 4 characters, as integers (the values are rounded);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'2F9.1'</span></code>: two columns are displayed with a width of 9 characters, with only 1 decimal digit;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'I8'</span></code>: the last column of <code class="docutils literal notranslate"><span class="pre">nm</span></code> is displayed with a width of 8 characters, as integers; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'F6.1'</span></code>: the <code class="docutils literal notranslate"><span class="pre">price</span></code> vector is displayed vertically with a width of 6 characters and 1 decimal digit.</p></li>
</ul>
<p>Just like we mentioned earlier, notice that the <code class="docutils literal notranslate"><span class="pre">price</span></code> vector was displayed vertically, and just like with <code class="docutils literal notranslate"><span class="pre">⍕</span></code>, numbers are rounded (instead of truncated) when needed.
It is also worth mentioning that <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> has no problem dealing with the fact that <code class="docutils literal notranslate"><span class="pre">price</span></code> takes up more vertical space than <code class="docutils literal notranslate"><span class="pre">nm</span></code>.</p>
<p>In the Specialist’s Section you will see that you can also display numeric values using scientific (or <strong>e</strong>xponential) format, using the <code class="docutils literal notranslate"><span class="pre">'E'</span></code> specification, which is very similar to <code class="docutils literal notranslate"><span class="pre">'F'</span></code>.</p>
</div>
<div class="section" id="specification-a">
<span id="execute-and-format-control-specification-a"></span><h4><span class="section-number">7.3.2.3. </span>Specification A<a class="headerlink" href="#specification-a" title="Permalink to this headline">¶</a></h4>
<p>This specification is used to format characters (mnemonic: <code class="docutils literal notranslate"><span class="pre">'A'</span></code> from <strong>a</strong>lphabet) with the following syntax:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'rAw'</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'w'</span></code> is the <strong>w</strong>idth (the number of characters) dedicated to each column of characters; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'r'</span></code> is the number of columns to which this format applies (the <strong>r</strong>epetition factor).</p></li>
</ul>
</li>
</ul>
<p>Let us again use these two variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">monMat</span> <span class="kd">←</span> <span class="m">6</span> <span class="m">8</span><span class="o">⍴</span><span class="s1">&#39;January FebruaryMarch   April   May     June    &#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">January 
February
March   
April   
May     
June    

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">chemistry</span> <span class="kd">←</span> <span class="m">3</span> <span class="m">5</span><span class="o">⍴</span><span class="s1">&#39;H2SO4CaCO3Fe2O3&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">H2SO4
CaCO3
Fe2O3

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="s1">&#39;8A1,A4,9A1&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">monMat</span> <span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">January    H2SO4
February   CaCO3
March      Fe2O3
April           
May             
June            
¯¯¯¯'¯¯¯¯|¯¯¯¯'¯

</span></div></div>
</div>
<p>Here is a breakdown of what is happening:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'8A1'</span></code>: the 8 columns of <code class="docutils literal notranslate"><span class="pre">monMat</span></code> are displayed in 8 columns, each of which is 1 character wide;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A4'</span></code>: the first column of <code class="docutils literal notranslate"><span class="pre">chemistry</span></code>, displayed in a column that is 4 characters wide, produces a separation of 3 blanks; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'9A1'</span></code>: the subsequent columns of <code class="docutils literal notranslate"><span class="pre">chemistry</span></code> are displayed in (up to) 9 columns, each of which is 1 character wide.</p></li>
</ul>
<!--begin remarks-->
<p><em><strong>Remarks</strong></em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Specifications (<code class="docutils literal notranslate"><span class="pre">'I'</span></code>, <code class="docutils literal notranslate"><span class="pre">'F'</span></code>, <code class="docutils literal notranslate"><span class="pre">'A'</span></code>, …) must be uppercase letters (lowercase specifications cause errors); and</p></li>
<li><p>We specified <code class="docutils literal notranslate"><span class="pre">'9A1'</span></code>, though we had only 4 remaining columns to format, with no problems; <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> ignores excess repetition factors.</p></li>
</ul>
</div></blockquote>
<!--end-->
<p>But what would happen if the first descriptor was larger than necessary?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;10A1,A4,4A1&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">monMat</span> <span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">January H2   SO4
FebruaryCa   CO3
March   Fe   2O3
April           
May             
June            

</span></div></div>
</div>
<p>The first descriptor in the example above, <code class="docutils literal notranslate"><span class="pre">'10A1'</span></code>, has a repetition factor of 10, meaning it will apply to 10 columns: the 8 columns from <code class="docutils literal notranslate"><span class="pre">monMat</span></code> plus the first 2 columns from <code class="docutils literal notranslate"><span class="pre">chemistry</span></code>.
The <code class="docutils literal notranslate"><span class="pre">'A1'</span></code> then displays those columns in columns that are 1 character wide.
The next column of <code class="docutils literal notranslate"><span class="pre">chemistry</span></code> is then displayed in a column that is 4 characters wide (because of <code class="docutils literal notranslate"><span class="pre">'A4'</span></code>), and the last two columns of <code class="docutils literal notranslate"><span class="pre">chemistry</span></code> are displayed in columns that are also 1 character wide (here we also specified more columns than are needed).</p>
<p>If we provide a single descriptor, it applies to all the columns of the right argument, like the following expression exemplifies:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;A3&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  H  2  S  O  4
  C  a  C  O  3
  F  e  2  O  3

</span></div></div>
</div>
<p>In the result above, each character is formatted in a column that is 3 characters wide and is right-justified.</p>
</div>
<div class="section" id="specification-x">
<span id="execute-and-format-control-specification-x"></span><h4><span class="section-number">7.3.2.4. </span>Specification X<a class="headerlink" href="#specification-x" title="Permalink to this headline">¶</a></h4>
<p>Suppose that we want to number the rows by displaying the characters <code class="docutils literal notranslate"><span class="pre">'123'</span></code> to the left of <code class="docutils literal notranslate"><span class="pre">chemistry</span></code>.
The following method would produce a poor presentation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;A1,5A1&#39;</span> <span class="nf">⎕FMT</span> <span class="s1">&#39;123&#39;</span> <span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1H2SO4
2CaCO3
3Fe2O3

</span></div></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">'6A1'</span></code> instead of <code class="docutils literal notranslate"><span class="pre">'A1,5A1'</span></code> would produce the same result.</p>
<p>To separate the digits on the left from the <code class="docutils literal notranslate"><span class="pre">chemistry</span></code> matrix on the right, we could specify a different format for the first column of <code class="docutils literal notranslate"><span class="pre">chemistry</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;A1,A3,4A1&#39;</span> <span class="nf">⎕FMT</span> <span class="s1">&#39;123&#39;</span> <span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1  H2SO4
2  CaCO3
3  Fe2O3

</span></div></div>
</div>
<p>However, it is simpler to include a specific descriptor for the separation; this is the role of the <code class="docutils literal notranslate"><span class="pre">'X'</span></code> specification.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'rXw'</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'w'</span></code> is the <strong>w</strong>idth (the number of characters) of the blank column to insert; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'r'</span></code> is the <strong>r</strong>epetition factor.</p></li>
</ul>
</li>
</ul>
<p>For example, to insert a blank column that is 3 characters wide, we can specify</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;A1,X3,5A1&#39;</span> <span class="nf">⎕FMT</span> <span class="s1">&#39;123&#39;</span> <span class="nv">chemistry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1   H2SO4
2   CaCO3
3   Fe2O3

</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">'X3'</span></code> and <code class="docutils literal notranslate"><span class="pre">'3X1</span></code> are synonymous, but the first description is simpler.</p>
</div>
<div class="section" id="text-inclusion-specification">
<span id="execute-and-format-control-text-inclusion-specification"></span><h4><span class="section-number">7.3.2.5. </span>Text Inclusion Specification<a class="headerlink" href="#text-inclusion-specification" title="Permalink to this headline">¶</a></h4>
<p>It is sometimes convenient to separate two columns of the formatted result by a string of characters.
This string of characters must be inserted in the format description, embedded between a pair of delimiters.
You can choose from the following delimiters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⊂</span></code> and <code class="docutils literal notranslate"><span class="pre">⊃</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">¨</span></code> and <code class="docutils literal notranslate"><span class="pre">¨</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⎕</span></code> and <code class="docutils literal notranslate"><span class="pre">⎕</span></code>; or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⍞</span></code> and <code class="docutils literal notranslate"><span class="pre">⍞</span></code>.</p></li>
</ul>
<p>Of course, if you use a given set of delimiters, the character string cannot contain the closing delimiter.
For example, if you use <code class="docutils literal notranslate"><span class="pre">⊂</span> <span class="pre">⊃</span></code>, the character string cannot contain <code class="docutils literal notranslate"><span class="pre">⊃</span></code>; or, if you use <code class="docutils literal notranslate"><span class="pre">⎕</span> <span class="pre">⎕</span></code>, the character string cannot contain <code class="docutils literal notranslate"><span class="pre">⎕</span></code>.</p>
<p>Picking between any of the available options is a matter of preference, but the pairs <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">⊂</span> <span class="pre">⊃</span></code> do present the advantage that they make it easier to spot where the included text starts and ends, which is particularly useful if the format description makes repeated use of text inclusion.
For that matter, for the remainder of this chapter we shall prefer <code class="docutils literal notranslate"><span class="pre">⊂</span> <span class="pre">⊃</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&gt;</span></code> over the other options.</p>
<p>Let us use</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">rates</span> <span class="kd">←</span> <span class="m">0.08</span> <span class="m">0.05</span> <span class="m">0.02</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.08 0.05 0.02

</span></div></div>
</div>
<p>to calculate a result and display it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">res</span> <span class="kd">←</span> <span class="nv">nm</span><span class="sr">[;</span><span class="m">4</span><span class="sr">]</span><span class="o">×</span><span class="nv">rates</span>
<span class="nv">format</span> <span class="kd">←</span> <span class="s1">&#39;⊂| ⊃,5A1,⊂ | ⊃,4F8.2,⊂ ×⊃,I2,⊂% =⊃,F7.2,⊂€⊃&#39;</span>
<span class="nv">format</span> <span class="nf">⎕FMT</span> <span class="nv">chemistry</span> <span class="nv">nm</span> <span class="p">(</span><span class="nv">rates</span><span class="o">×</span><span class="m">100</span><span class="p">)</span> <span class="nv">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">| H2SO4 |    21.21 1534.88  375.46  704.50 × 8% =  56.36€
| CaCO3 |  1125.14 1963.52  464.45 1438.25 × 5% =  71.91€
| Fe2O3 |   796.53 1569.00  157.14  886.59 × 2% =  17.73€

</span></div></div>
</div>
<!-- (TODO) use something like `format⊆⍨≠\∨⌿'⊂⊃'∘.=format` to parse the `format` variable and extract the texts that will be included, with the caveat that it only works if there's no extra ⊂⊃ in there. -->
<p>This format specification contains 9 descriptors.
To avoid a single long statement, it is possible to prepare the format description separately, save it in a variable, and use it later, as shown above.</p>
</div>
<div class="section" id="specification-g-the-picture-code">
<span id="execute-and-format-control-specification-g-the-picture-code"></span><h4><span class="section-number">7.3.2.6. </span>Specification G – The Picture Code<a class="headerlink" href="#specification-g-the-picture-code" title="Permalink to this headline">¶</a></h4>
<p>The specifications we saw earlier (<code class="docutils literal notranslate"><span class="pre">I</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code>, <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span></code>) are very similar to those used in the “FORMAT” statement in a very popular scientific language, FORTRAN.
Another traditional language, COBOL, uses a different approach in its “PICTURE” statement.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">'G'</span></code> specification in APL is very similar to the COBOL “PICTURE” statement.</p>
<p>In this specification, the letter <code class="docutils literal notranslate"><span class="pre">'G'</span></code> is followed by any string of characters, in which the characters <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> and <code class="docutils literal notranslate"><span class="pre">'9'</span></code> represent the positions in which numeric digits are to be placed in the output.</p>
<p>The string is delimited by the same delimiters that we use for the text inclusion specification: <code class="docutils literal notranslate"><span class="pre">⊂</span> <span class="pre">⊃</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">¨</span> <span class="pre">¨</span></code>, <code class="docutils literal notranslate"><span class="pre">⎕</span> <span class="pre">⎕</span></code>, or <code class="docutils literal notranslate"><span class="pre">⍞</span> <span class="pre">⍞</span></code>.</p>
<p>It works as follows:</p>
<ul class="simple">
<li><p>all the values are rounded to the nearest integer (no decimal digit will be displayed);</p></li>
<li><p>each digit replaces one of the characters <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> or <code class="docutils literal notranslate"><span class="pre">'9'</span></code> included in the <code class="docutils literal notranslate"><span class="pre">'G'</span></code> format string;</p></li>
<li><p>unused <code class="docutils literal notranslate"><span class="pre">'9'</span></code>’s are replaced by zeroes and unused <code class="docutils literal notranslate"><span class="pre">'Z'</span></code>’s are replaced by blanks;</p></li>
<li><p>all characters to the left of the first <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> or <code class="docutils literal notranslate"><span class="pre">'9'</span></code>, or to the right of the last <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> or <code class="docutils literal notranslate"><span class="pre">'9'</span></code> are reproduced verbatim; and</p></li>
<li><p>characters inserted between some <code class="docutils literal notranslate"><span class="pre">'Z'</span></code>’s or <code class="docutils literal notranslate"><span class="pre">'9'</span></code>’s are reproduced only if there are digits on both sides.</p></li>
</ul>
<p>Some examples may help:</p>
<p>Let us describe the formatting of this matrix</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">mat</span> <span class="kd">←</span> <span class="m">2</span> <span class="m">3</span><span class="o">⍴</span><span class="m">75</span> <span class="m">14</span> <span class="m">86</span> <span class="m">20</span> <span class="m">31</span> <span class="m">16</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">75 14 86
20 31 16

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;3G⊂(9999) + ⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">(0075) + (0014) + (0086) + 
(0020) + (0031) + (0016) + 

</span></div></div>
</div>
<p>Each descriptor <code class="docutils literal notranslate"><span class="pre">'9'</span></code> has been replaced by a digit of <code class="docutils literal notranslate"><span class="pre">mat</span></code>, or by a zero, and all the other characters have been reproduced from the model.</p>
<p>Let us now turn our attention to the <code class="docutils literal notranslate"><span class="pre">nm</span></code> matrix we have been playing around with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  21.21 1534.88 375.46  704.5 
1125.14 1963.52 464.45 1438.25
 796.53 1569    157.14  886.59

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;4G⊂ 9999⊃&#39;</span><span class="nf">⎕FMT</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 0021 1535 0375 0705
 1125 1964 0464 1438
 0797 1569 0157 0887

</span></div></div>
</div>
<p>Here, each value is padded by leading zeroes and the decimal digits are lost (the values were <em>rounded</em>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;4G⊂ ZZZ9⊃&#39;</span><span class="nf">⎕FMT</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21 1535  375  705
 1125 1964  464 1438
  797 1569  157  887

</span></div></div>
</div>
<p>In this new example small values are not padded by zeroes, but by blanks.
It is also worth noting that we use <code class="docutils literal notranslate"><span class="pre">'ZZZ9'</span></code> instead of <code class="docutils literal notranslate"><span class="pre">'ZZZZ'</span></code> so that a single <code class="docutils literal notranslate"><span class="pre">'0'</span></code> gets printed in case there’s any zeroes in the right argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂Z⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂9⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0

</span></div></div>
</div>
<p>Decimal digits can be displayed only if we convert the values into integers and insert “artificial” decimal points between the <code class="docutils literal notranslate"><span class="pre">'Z'</span></code>’s or <code class="docutils literal notranslate"><span class="pre">'9'</span></code>’s:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂ ZZZ9.99⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">100</span><span class="o">×</span><span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   21.21 1534.88  375.46  704.50
 1125.14 1963.52  464.45 1438.25
  796.53 1569.00  157.14  886.59

</span></div></div>
</div>
<p>Finally, we illustrate what we said earlier about the fact that symbols placed between descriptors <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> and <code class="docutils literal notranslate"><span class="pre">'9'</span></code> are displayed only if they are surrounded by digits:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂Value ZZ-ZZ/Z9⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">8</span> <span class="m">15</span> <span class="m">654</span> <span class="m">3852</span> <span class="m">19346</span> <span class="m">621184</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Value        8
Value       15
Value     6/54
Value    38/52
Value  1-93/46
Value 62-11/84

</span></div></div>
</div>
<p>This characteristic is useful when displaying numbers according to national conventions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂ZZZ,ZZZ,ZZ9.99⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">32145698710</span> <span class="m">8452</span> <span class="m">95732</span> <span class="m">64952465</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">321,456,987.10
         84.52
        957.32
    649,524.65

</span></div></div>
</div>
<p>The above is the Anglo-American presentation and the example below is the French presentation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂ZZZ ZZZ ZZ9,99⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">32145698710</span> <span class="m">8452</span> <span class="m">95732</span> <span class="m">64952465</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">321 456 987,10
         84,52
        957,32
    649 524,65

</span></div></div>
</div>
<p>Here is a surprising example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂Simon ZZ Garfunkel ZZ⊃&#39;</span> <span class="nf">⎕FMT</span> <span class="m">4562.31</span> <span class="m">8699.84</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Simon 45 Garfunkel 62
Simon 87             

</span></div></div>
</div>
<p>Here is the explanation of this surprising example:</p>
<ul class="simple">
<li><p>the two numbers have been rounded like this: <code class="docutils literal notranslate"><span class="pre">4562</span> <span class="pre">8700</span></code>;</p></li>
<li><p>because vectors are shown in columns, we get one printed line per item in the vector;</p></li>
<li><p>on the first line, <code class="docutils literal notranslate"><span class="pre">4562</span></code> has been split into <code class="docutils literal notranslate"><span class="pre">45</span></code> and <code class="docutils literal notranslate"><span class="pre">62</span></code>;</p></li>
<li><p>on the second line, <code class="docutils literal notranslate"><span class="pre">8700</span></code> has been split into <code class="docutils literal notranslate"><span class="pre">87</span></code> and <code class="docutils literal notranslate"><span class="pre">00</span></code>;</p></li>
<li><p>because we used a descriptor <code class="docutils literal notranslate"><span class="pre">'Z'</span></code>, these zeroes have been replaced by blanks, which means the characters that compose <code class="docutils literal notranslate"><span class="pre">'Garfunkel'</span></code> are no longer between non-blank digits and, therefore, are not reproduced.</p></li>
</ul>
</div>
<div class="section" id="specification-t">
<span id="execute-and-format-control-specification-t"></span><h4><span class="section-number">7.3.2.7. </span>Specification T<a class="headerlink" href="#specification-t" title="Permalink to this headline">¶</a></h4>
<p>Specification <code class="docutils literal notranslate"><span class="pre">'X'</span></code> was used to specify an offset between a field and its neighbour.
Specification <code class="docutils literal notranslate"><span class="pre">'T'</span></code> (where <code class="docutils literal notranslate"><span class="pre">'T'</span></code> stands for tabular) specifies a position from the left margin.
This makes it easy to position data in a sheet.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="s1">&#39;I2,T15,5A1,T30,4I6&#39;</span> <span class="nf">⎕FMT</span> <span class="p">(</span><span class="m">75</span> <span class="m">91</span> <span class="m">34</span><span class="p">)</span> <span class="nv">chemistry</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">75            H2SO4              21  1535   375   705
91            CaCO3            1125  1964   464  1438
34            Fe2O3             797  1569   157   887
¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯¯'¯¯¯¯|¯¯¯

</span></div></div>
</div>
<p>As you can see, <code class="docutils literal notranslate"><span class="pre">chemistry</span></code> starts at the 15th position, and the first column of <code class="docutils literal notranslate"><span class="pre">nm</span></code> starts at the 30th position but, because it occupies 6 characters per column, it is right-aligned at the 35th character.</p>
</div>
<div class="section" id="specification-e">
<span id="execute-and-format-control-specification-e"></span><h4><span class="section-number">7.3.2.8. </span>Specification E<a class="headerlink" href="#specification-e" title="Permalink to this headline">¶</a></h4>
<p>This specification in the left argument to <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> is used to display numeric values, but in scientific (or <strong>e</strong>xponential) form.</p>
<p>Its syntax is very similar to the syntax of the specification <code class="docutils literal notranslate"><span class="pre">'F'</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'rEw.s'</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">w</span></code> is the <strong>w</strong>idth (in number of characters) dedicated to each column of numbers;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s</span></code> is the number of <strong>s</strong>ignificant digits displayed in the mantissa; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r</span></code> is the <strong>r</strong>epetition factor.</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="s1">&#39;E12.4&#39;</span> <span class="nf">⎕FMT</span> <span class="m">12553</span> <span class="m">0.0487</span> <span class="m">¯62.133</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   1.255E4  
   4.870E¯2 
  ¯6.213E1  
¯¯¯¯'¯¯¯¯|¯¯

</span></div></div>
</div>
<p>You can see that each number is represented by 12 characters, with exactly 4 significant digits.
However, in order to make room for larger exponents, the last column is left blank.</p>
<p>You can refer to <a class="reference external" href="https://en.wikipedia.org/wiki/Scientific_notation#E_notation">Wikipedia’s article on “Scientific Notation”</a> for more information on how scientific notation works.</p>
</div>
<div class="section" id="quick-reference">
<span id="execute-and-format-control-quick-reference"></span><h4><span class="section-number">7.3.2.9. </span>Quick Reference<a class="headerlink" href="#quick-reference" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Syntax⁽*⁾</p></th>
<th class="text-align:left head"><p>Works with</p></th>
<th class="text-align:left head"><p>Explanation</p></th>
<th class="text-align:left head"><p>See also</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'Iw'</span></code></p></td>
<td class="text-align:left"><p>integers</p></td>
<td class="text-align:left"><p>Format integer in a field of width <code class="docutils literal notranslate"><span class="pre">w</span></code>.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-specifications-i-and-f"><span class="std std-numref">Section 7.3.2.2</span></a></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'Fw.d'</span></code></p></td>
<td class="text-align:left"><p>decimals</p></td>
<td class="text-align:left"><p>Format a fractional number with <code class="docutils literal notranslate"><span class="pre">d</span></code>  decimal digits in a field of width <code class="docutils literal notranslate"><span class="pre">w</span></code>.</p></td>
<td class="text-align:left"><p><a class="reference external" href="./Execute-and-Format-Control#Specifications-I-and-F">further details</a></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'Aw'</span></code></p></td>
<td class="text-align:left"><p>characters</p></td>
<td class="text-align:left"><p>Format characters in a field of width <code class="docutils literal notranslate"><span class="pre">w</span></code>.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-specification-a"><span class="std std-numref">Section 7.3.2.3</span></a></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'Xw'</span></code></p></td>
<td class="text-align:left"><p></p></td>
<td class="text-align:left"><p>Insert <code class="docutils literal notranslate"><span class="pre">w</span></code> blank columns.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-specification-x"><span class="std std-numref">Section 7.3.2.4</span></a></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'⊂text⊃'</span></code></p></td>
<td class="text-align:left"><p></p></td>
<td class="text-align:left"><p>Include the <code class="docutils literal notranslate"><span class="pre">text</span></code> vector literally.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-text-inclusion-specification"><span class="std std-numref">Section 7.3.2.5</span></a></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'G⊂text⊃'</span></code></p></td>
<td class="text-align:left"><p>numbers</p></td>
<td class="text-align:left"><p>Displays numbers rounded to nearest integers, inserting the digits where the <code class="docutils literal notranslate"><span class="pre">'Z'/'9'</span></code> characters show up in <code class="docutils literal notranslate"><span class="pre">text</span></code>. Remainder of the text is included literally.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-specification-g-the-picture-code"><span class="std std-numref">Section 7.3.2.6</span></a></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'Tp'</span></code></p></td>
<td class="text-align:left"><p></p></td>
<td class="text-align:left"><p>Aligns the next column of data <code class="docutils literal notranslate"><span class="pre">p</span></code> columns away from the left margin.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-specification-t"><span class="std std-numref">Section 7.3.2.7</span></a></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">'Ew.s'</span></code></p></td>
<td class="text-align:left"><p>numbers</p></td>
<td class="text-align:left"><p>Similar to <code class="docutils literal notranslate"><span class="pre">'F'</span></code>, but displays numbers in scientific form with <code class="docutils literal notranslate"><span class="pre">s</span></code> significant digits in the mantissa, taking up a field of total width <code class="docutils literal notranslate"><span class="pre">w</span></code>.</p></td>
<td class="text-align:left"><p><a class="reference internal" href="#execute-and-format-control-specification-e"><span class="std std-numref">Section 7.3.2.8</span></a></p></td>
</tr>
</tbody>
</table>
<p>⁽*⁾ All but the text inclusion specification can be preceded by an integer, so that it applies to those many consecutive columns.</p>
</div>
</div>
<div class="section" id="qualifiers-and-affixtures">
<span id="execute-and-format-control-qualifiers-and-affixtures"></span><h3><span class="section-number">7.3.3. </span>Qualifiers and Affixtures<a class="headerlink" href="#qualifiers-and-affixtures" title="Permalink to this headline">¶</a></h3>
<p>Specifications <code class="docutils literal notranslate"><span class="pre">'I'</span></code>, <code class="docutils literal notranslate"><span class="pre">'F'</span></code>, <code class="docutils literal notranslate"><span class="pre">'G'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'E'</span></code>, can be associated with <em>qualifiers</em> and <em>affixtures</em>:</p>
<ul class="simple">
<li><p><em>qualifiers</em> modify the presentation of numeric values; and</p></li>
<li><p><em>affixtures</em> print additional characters when some conditions are satisfied.</p></li>
</ul>
<p><em>Qualifiers</em> and <em>affixtures</em> must be specified to the <strong>left</strong> of the specification they modify.</p>
<div class="section" id="qualifiers">
<span id="execute-and-format-control-qualifiers"></span><h4><span class="section-number">7.3.3.1. </span>Qualifiers<a class="headerlink" href="#qualifiers" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'Kn'</span></code> multiplies numbers by <span class="math notranslate nohighlight">\(10^n\)</span> before displaying them;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'B'</span></code> replaces zero values by <strong>B</strong>lanks;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'C'</span></code> separates triads of characters by <strong>C</strong>ommas in the integer part of a number;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'L'</span></code> aligns the value to the <strong>L</strong>eft of its field;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Z'</span></code> fills up the left part of the zone reserved for a field with <strong>Z</strong>eroes;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Ov⊂text⊃'</span></code> replaces <strong>O</strong>nly the specific value <code class="docutils literal notranslate"><span class="pre">v</span></code> with the given <code class="docutils literal notranslate"><span class="pre">text</span></code>. If omitted, <code class="docutils literal notranslate"><span class="pre">v</span></code> is assumed to be zero, so replacing zeroes with a special text string is easy; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'S⊂os⊃'</span></code> replaces characters with <strong>S</strong>ubstitution characters. <code class="docutils literal notranslate"><span class="pre">os</span></code> is a list of couples of characters, where</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code> is the <strong>o</strong>riginal character; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s</span></code> is the <strong>s</strong>ubstitute character.</p></li>
</ul>
</li>
</ul>
<p>From the qualifiers above, <code class="docutils literal notranslate"><span class="pre">'C'</span></code>, <code class="docutils literal notranslate"><span class="pre">'L'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> do <strong>not</strong> work with specification <code class="docutils literal notranslate"><span class="pre">'G'</span></code>.
Furthermore, note that the specification <code class="docutils literal notranslate"><span class="pre">'S⊂os⊃'</span></code> applies only to the replacement of the following characters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code> – the decimal separator;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">,</span></code> – the thousands separator produced by qualifier <code class="docutils literal notranslate"><span class="pre">'C'</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> – the overflow character used when a value takes up more space than the space available for it;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> – the fill character produced by qualifier <code class="docutils literal notranslate"><span class="pre">'Z'</span></code>; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_</span></code> – the character indicating lack of precision (see <a class="reference internal" href="#execute-and-format-control-lack-of-precision"><span class="std std-numref">Section 7.5.2.1</span></a>).</p></li>
</ul>
</div>
<div class="section" id="examples-of-qualifiers">
<span id="execute-and-format-control-examples-of-qualifiers"></span><h4><span class="section-number">7.3.3.2. </span>Examples of Qualifiers<a class="headerlink" href="#examples-of-qualifiers" title="Permalink to this headline">¶</a></h4>
<p>Multiply a number by 1000 before displaying it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;K3F12.2&#39;</span> <span class="nf">⎕FMT</span> <span class="m">123.45</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   123450.00

</span></div></div>
</div>
<p>Now divide a number by 10 (and round it) before displaying it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;K¯1F12.2&#39;</span> <span class="nf">⎕FMT</span> <span class="m">123.45</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">       12.35

</span></div></div>
</div>
<p>Because specification <code class="docutils literal notranslate"><span class="pre">'G'</span></code> only displays integer values, it is often convenient to use the qualifier <code class="docutils literal notranslate"><span class="pre">'K'</span></code> to multiply decimal values by a power of 10 to obtain the correct display, as exemplified here below.
First, look at the following <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> usage:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;G⊂ZZ9.99⊃&#39;</span><span class="nf">⎕FMT</span> <span class="m">435.39</span> <span class="m">54.17</span> <span class="m">7.2</span> <span class="m">673.08</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  4.35
  0.54
  0.07
  6.73

</span></div></div>
</div>
<p>Notice how the presentation above gives the wrong idea about the values.
However, if we were to use <code class="docutils literal notranslate"><span class="pre">'K2'</span></code> to multiply the values by 100 before displaying them, we would produce the correct representation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;K2G⊂ZZ9.99⊃&#39;</span><span class="nf">⎕FMT</span> <span class="m">435.39</span> <span class="m">54.17</span> <span class="m">7.2</span> <span class="m">673.08</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">435.39
 54.17
  7.20
673.08

</span></div></div>
</div>
<!--begin tip-->
<p><em><strong>Tip</strong></em>:</p>
<blockquote>
<div><p>In the use-case above, the number of decimal places you use in the text descriptor of the specification <code class="docutils literal notranslate"><span class="pre">'G'</span></code> is the number <code class="docutils literal notranslate"><span class="pre">n</span></code> you should use with the qualifier <code class="docutils literal notranslate"><span class="pre">'Kn'</span></code>.</p>
</div></blockquote>
<!--end-->
<p>Now we use the qualifier <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> to pad values with zeroes on the left.
Notice, also, how a repetition factor may be applied to a list of specifications enclosed by parentheses:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;ZI2,2(⊂/⊃,ZI2)&#39;</span> <span class="nf">⎕FMT</span> <span class="m">1</span> <span class="m">3</span><span class="o">⍴</span><span class="m">9</span> <span class="m">7</span> <span class="m">98</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">09/07/98

</span></div></div>
</div>
<p>We can reproduce the Anglo-American and French representations for large numbers (that we produced with specification <code class="docutils literal notranslate"><span class="pre">'G'</span></code>) with the <code class="docutils literal notranslate"><span class="pre">'C'</span></code> and <code class="docutils literal notranslate"><span class="pre">'S'</span></code> qualifiers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;CF13.2&#39;</span> <span class="nf">⎕FMT</span> <span class="m">74815926.03</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">74,815,926.03

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;S⊂, .,⊃CF13.2&#39;</span> <span class="nf">⎕FMT</span> <span class="m">74815926.03</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">74 815 926,03

</span></div></div>
</div>
<p>In this last example, commas have been replaced by blanks and the decimal point has been substituted by a comma, using the <code class="docutils literal notranslate"><span class="pre">'S'</span></code> qualifier, to obtain a French presentation.</p>
<p>For the next examples, let us use the following numeric matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">yop</span> <span class="kd">←</span> <span class="m">2</span> <span class="m">3</span><span class="o">⍴</span><span class="m">178.23</span> <span class="m">0</span> <span class="m">¯87.64</span> <span class="m">0</span> <span class="m">¯681.19</span> <span class="m">42</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">178.23    0    ¯87.64
  0    ¯681.19  42   

</span></div></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">'B'</span></code> we can replace zeroes with blanks:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;BF9.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   178.23            ¯87.64
           ¯681.19    42.00

</span></div></div>
</div>
<p>This is the same thing as using <code class="docutils literal notranslate"><span class="pre">'O'</span></code> to only replace zeroes with blanks:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;O⊂⊃F9.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   178.23            ¯87.64
           ¯681.19    42.00

</span></div></div>
</div>
<p>Recall that <code class="docutils literal notranslate"><span class="pre">'O'</span></code> assumes, by default, that we want to replace zeroes with the text within <code class="docutils literal notranslate"><span class="pre">⊂</span> <span class="pre">⊃</span></code>.
If we wanted, we could replace <code class="docutils literal notranslate"><span class="pre">42</span></code> by blanks, instead:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;O42⊂⊃F9.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   178.23     0.00   ¯87.64
     0.00  ¯681.19         

</span></div></div>
</div>
<p>We can also replace the value(s) by something other than blanks.
For that, we just specify the replacement text inside the text delimiters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;O⊂none⊃F9.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   178.23     none   ¯87.64
     none  ¯681.19    42.00

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;O42⊂2+4×10⊃F9.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   178.23     0.00   ¯87.64
     0.00  ¯681.19   2+4×10

</span></div></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">'L'</span></code> we can align all the values on the left instead:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;LO42⊂2+4×10⊃F9.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">178.23   0.00     ¯87.64   
0.00     ¯681.19  2+4×10   

</span></div></div>
</div>
<p>If we use <code class="docutils literal notranslate"><span class="pre">'Z'</span></code>, then we can fill the whole field with zeroes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;I4&#39;</span> <span class="nf">⎕FMT</span> <span class="m">42</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  42

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;ZI4&#39;</span> <span class="nf">⎕FMT</span> <span class="m">42</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0042

</span></div></div>
</div>
</div>
<div class="section" id="affixtures">
<span id="execute-and-format-control-affixtures"></span><h4><span class="section-number">7.3.3.3. </span>Affixtures<a class="headerlink" href="#affixtures" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'M⊂text⊃'</span></code> replaces the <strong>M</strong>inus sign to the <strong>left</strong> of negative values with the given <code class="docutils literal notranslate"><span class="pre">text</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'N⊂text⊃'</span></code> adds the given <code class="docutils literal notranslate"><span class="pre">text</span></code> to the <strong>right</strong> of <strong>n</strong>egative values;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'P⊂text⊃'</span></code> adds the given <code class="docutils literal notranslate"><span class="pre">text</span></code> to the <strong>left</strong>  of <strong>p</strong>ositive values;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Q⊂text⊃'</span></code> adds the given <code class="docutils literal notranslate"><span class="pre">text</span></code> to the <strong>right</strong> of positive values; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'R⊂text⊃'</span></code> <strong>r</strong>epeats the given <code class="docutils literal notranslate"><span class="pre">text</span></code> as many times as necessary to fill the printing zone entirely, before the digits are overlaid on top. Positions which are not occupied by the digits allow the text to appear. In other words, the <code class="docutils literal notranslate"><span class="pre">text</span></code> will act as a background for the formatted value.</p></li>
</ul>
<p>It is important to note that the width of the text added by an <em>affixture</em> must be accounted for in the total width reserved for the column.</p>
</div>
<div class="section" id="examples-of-affixtures">
<span id="execute-and-format-control-examples-of-affixtures"></span><h4><span class="section-number">7.3.3.4. </span>Examples of Affixtures<a class="headerlink" href="#examples-of-affixtures" title="Permalink to this headline">¶</a></h4>
<p>It is a common accounting practice to represent negative numbers surrounded by parentheses, instead of with a minus sign.
We can easily format numbers to abide by this practice using <code class="docutils literal notranslate"><span class="pre">'M⊂(⊃'</span></code> to replace the minus sign of negative numbers with <code class="docutils literal notranslate"><span class="pre">'('</span></code> and using <code class="docutils literal notranslate"><span class="pre">'N⊂)⊃'</span></code> to add a <code class="docutils literal notranslate"><span class="pre">')'</span></code> to the right of negative numbers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;M⊂(⊃N⊂)⊃F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">    178.23      0.00   (87.64)
      0.00  (681.19)     42.00

</span></div></div>
</div>
<p>However, we can see that the negative values are no longer aligned with the positive ones.
We can fix this by using the affixture <code class="docutils literal notranslate"><span class="pre">'Q'</span></code> to add a blank to the right of positive values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Q⊂ ⊃M⊂(⊃N⊂)⊃F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   178.23      0.00    (87.64)
     0.00   (681.19)    42.00 

</span></div></div>
</div>
<p>Now, instead of surrounding negative numbers with parentheses, suppose we want to represent them with a <code class="docutils literal notranslate"><span class="pre">'-'</span></code> instead of a <code class="docutils literal notranslate"><span class="pre">'¯'</span></code>, and also add a <code class="docutils literal notranslate"><span class="pre">'+'</span></code> to the left of the positive numbers.
For that, we just reuse <code class="docutils literal notranslate"><span class="pre">'M'</span></code> and introduce <code class="docutils literal notranslate"><span class="pre">'P'</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;P⊂+⊃M⊂-⊃F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">   +178.23     +0.00    -87.64
     +0.00   -681.19    +42.00

</span></div></div>
</div>
<p>Finally, to illustrate how the affixture <code class="docutils literal notranslate"><span class="pre">'R'</span></code> works, we will draw the representation of <code class="docutils literal notranslate"><span class="pre">yop</span></code> in a matrix of <code class="docutils literal notranslate"><span class="pre">'⎕'</span></code>’s:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;R⊂⎕⊃F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">⎕⎕⎕⎕178.23⎕⎕⎕⎕⎕⎕0.00⎕⎕⎕⎕¯87.64
⎕⎕⎕⎕⎕⎕0.00⎕⎕⎕¯681.19⎕⎕⎕⎕⎕42.00

</span></div></div>
</div>
<p>Notice that this is just an overlay of</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">    178.23      0.00    ¯87.64
      0.00   ¯681.19     42.00

</span></div></div>
</div>
<p>on top of</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍴</span><span class="s1">&#39;F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">yop</span><span class="p">)</span><span class="o">⍴</span><span class="s1">&#39;⎕&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕
⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕

</span></div></div>
</div>
</div>
<div class="section" id="remarks-on-qualifiers-and-affixtures">
<span id="execute-and-format-control-remarks-on-qualifiers-and-affixtures"></span><h4><span class="section-number">7.3.3.5. </span>Remarks on Qualifiers and Affixtures<a class="headerlink" href="#remarks-on-qualifiers-and-affixtures" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Qualifiers and affixtures can be cumulated and can be placed in any order.</p></li>
</ul>
<p>For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;S⊂, .,⊃CF10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     21,21  1 534,88    375,46    704,50
  1 125,14  1 963,52    464,45  1 438,25
    796,53  1 569,00    157,14    886,59

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;CS⊂, .,⊃F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     21,21  1 534,88    375,46    704,50
  1 125,14  1 963,52    464,45  1 438,25
    796,53  1 569,00    157,14    886,59

</span></div></div>
</div>
<ul class="simple">
<li><p>Blanks can be inserted between specifications, qualifiers, and affixtures.</p></li>
</ul>
<p>For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;S⊂, .,⊃CF10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     21,21  1 534,88    375,46    704,50
  1 125,14  1 963,52    464,45  1 438,25
    796,53  1 569,00    157,14    886,59

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;S⊂, .,⊃ C F10.2&#39;</span> <span class="nf">⎕FMT</span> <span class="nv">nm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     21,21  1 534,88    375,46    704,50
  1 125,14  1 963,52    464,45  1 438,25
    796,53  1 569,00    157,14    886,59

</span></div></div>
</div>
<ul class="simple">
<li><p>A repetition factor can apply to a group of descriptors placed between parentheses, like we have seen above.</p></li>
</ul>
<p>We replicate a similar example here:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;ZI2,2(⊂/⊃,ZI2)&#39;</span> <span class="nf">⎕FMT</span> <span class="m">1</span> <span class="m">3</span><span class="o">⍴</span><span class="m">5</span> <span class="m">3</span> <span class="m">98</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">05/03/98

</span></div></div>
</div>
<ul class="simple">
<li><p>Various errors may occur, all signalled by the message <code class="docutils literal notranslate"><span class="pre">'FORMAT</span> <span class="pre">ERROR'</span></code>. Here are some frequent errors:</p>
<ul>
<li><p>a numeric value is matched with an <code class="docutils literal notranslate"><span class="pre">'A'</span></code> specification;</p></li>
<li><p>character data is matched with a specification other than <code class="docutils literal notranslate"><span class="pre">'A'</span></code>;</p></li>
<li><p>the format specification is ill-shaped (in that case, check that delimiters and parentheses are well balanced);</p></li>
<li><p>in decimal specifications (<code class="docutils literal notranslate"><span class="pre">'F'</span></code> and <code class="docutils literal notranslate"><span class="pre">'E'</span></code>), the specified width is too small, so the decimal digits cannot be represented; and</p></li>
<li><p>you are using incompatible qualifiers and/or specifications (for example, mixing <code class="docutils literal notranslate"><span class="pre">'L'</span></code> with <code class="docutils literal notranslate"><span class="pre">'Z'</span></code> in the same specification).</p></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="output-in-the-session">
<span id="execute-and-format-control-output-in-the-session"></span><h2><span class="section-number">7.4. </span>Output in the Session<a class="headerlink" href="#output-in-the-session" title="Permalink to this headline">¶</a></h2>
<p>After taking a look at the format primitive <code class="docutils literal notranslate"><span class="pre">⍕</span></code> and the system function <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code>, we are now aware of two great tools to produce character arrays programmatically.</p>
<p>In general, when using the session, you do not explicitly use <code class="docutils literal notranslate"><span class="pre">⍕</span></code> or <code class="docutils literal notranslate"><span class="pre">⎕FMT</span></code> to display things, you just make use of the implicit printing that happens when you evaluate a non-shy expression.
This implicit printing isn’t necessarily very informative or, for that matter, adequate for your own personal taste, so it is relevant to learn about all the other tools at your disposal, that you can use to customise the look and feel of the session output.
We will cover some <em>user commands</em> and some functions from the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace.
These tools we will cover will allow you to change the style of the output and to change the amount of information that is output by default.</p>
<div class="section" id="producing-output-with-the-dfns-workspace">
<span id="execute-and-format-control-producing-output-with-the-dfns-workspace"></span><h3><span class="section-number">7.4.1. </span>Producing Output with the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> Workspace<a class="headerlink" href="#producing-output-with-the-dfns-workspace" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace is a workspace that is bundled with your Dyalog APL installation and, therefore, to which you have access without having to install anything else.
The <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace is, like its name might suggest, a collection of functions written as direct functions that cover a wide range of topics.
In particular, some of the functions in the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace concern themselves with output, and those are the ones we will cover here.</p>
<p>For an up-to-date index of all the functions included with the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace, as well as thorough documentation, you can consult the <a class="reference external" href="https://dfns.dyalog.com"><code class="docutils literal notranslate"><span class="pre">dfns</span></code> website</a>.</p>
<p>Throughout this section, you may want to play around with the functions that we introduce.
Recall that, in order to do so, you may want to use the <code class="docutils literal notranslate"><span class="pre">)copy</span></code> command to bring those functions into the active workspace.
Typing <code class="docutils literal notranslate"><span class="pre">)copy</span> <span class="pre">dfns</span></code> will copy everything from the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace into the current active workspace, and typing <code class="docutils literal notranslate"><span class="pre">)copy</span> <span class="pre">dfns</span> <span class="pre">namelist</span></code>, where <code class="docutils literal notranslate"><span class="pre">namelist</span></code> is a space-separated list of names, will only copy the specified names.
This is the recommended practice, because the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> WS contains many different names and because copying everything can override your own definitions.</p>
<div class="section" id="box">
<span id="execute-and-format-control-box"></span><h4><span class="section-number">7.4.1.1. </span><code class="docutils literal notranslate"><span class="pre">box</span></code><a class="headerlink" href="#box" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">box</span></code> is a function that can be used to box simple character matrices, while also (optionally) including horizontal and/or vertical dividers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span> <span class="nv">dfns</span> <span class="nv">box</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">C:\Program Files\Dyalog\Dyalog APL-64 18.0 Unicode\ws\dfns.dws saved Tue Dec  1 20:08:40 2020
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">6</span> <span class="m">10</span><span class="o">⍴</span><span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">ABCDEFGHIJ
KLMNOPQRST
UVWXYZABCD
EFGHIJKLMN
OPQRSTUVWX
YZABCDEFGH

</span></div></div>
</div>
<p>With no left argument, <code class="docutils literal notranslate"><span class="pre">box</span></code> simply displays a box around the character matrix:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">box</span> <span class="m">6</span> <span class="m">10</span><span class="o">⍴</span><span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────────┐
│ABCDEFGHIJ│
│KLMNOPQRST│
│UVWXYZABCD│
│EFGHIJKLMN│
│OPQRSTUVWX│
│YZABCDEFGH│
└──────────┘

</span></div></div>
</div>
<p>However, the left argument can be used to specify horizontal divider indices, vertical divider indices, and even the styling associated with the boxing and the dividers.</p>
<p>We can ask for horizontal dividers after the 2nd and 4th rows, and no vertical dividers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">2</span> <span class="m">4</span><span class="p">)</span><span class="no">⍬</span><span class="nv">box</span> <span class="m">6</span> <span class="m">10</span><span class="o">⍴</span><span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──────────┐
│ABCDEFGHIJ│
│KLMNOPQRST│
├──────────┤
│UVWXYZABCD│
│EFGHIJKLMN│
├──────────┤
│OPQRSTUVWX│
│YZABCDEFGH│
└──────────┘

</span></div></div>
</div>
<p>We can ask for no horizontal dividers and vertical dividers after the 3rd, 6th, and 7th columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="no">⍬</span><span class="p">(</span><span class="m">3</span> <span class="m">6</span> <span class="m">7</span><span class="p">)</span><span class="nv">box</span> <span class="m">6</span> <span class="m">10</span><span class="o">⍴</span><span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┬─┬───┐
│ABC│DEF│G│HIJ│
│KLM│NOP│Q│RST│
│UVW│XYZ│A│BCD│
│EFG│HIJ│K│LMN│
│OPQ│RST│U│VWX│
│YZA│BCD│E│FGH│
└───┴───┴─┴───┘

</span></div></div>
</div>
<p>We can mix the two:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">2</span> <span class="m">4</span><span class="p">)(</span><span class="m">3</span> <span class="m">6</span> <span class="m">7</span><span class="p">)</span><span class="nv">box</span> <span class="m">6</span> <span class="m">10</span><span class="o">⍴</span><span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┬─┬───┐
│ABC│DEF│G│HIJ│
│KLM│NOP│Q│RST│
├───┼───┼─┼───┤
│UVW│XYZ│A│BCD│
│EFG│HIJ│K│LMN│
├───┼───┼─┼───┤
│OPQ│RST│U│VWX│
│YZA│BCD│E│FGH│
└───┴───┴─┴───┘

</span></div></div>
</div>
<p>And we can even use ASCII characters instead of line-drawing characters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">2</span> <span class="m">4</span><span class="p">)(</span><span class="m">3</span> <span class="m">6</span> <span class="m">7</span><span class="p">)</span><span class="m">1</span><span class="nv">box</span> <span class="m">6</span> <span class="m">10</span><span class="o">⍴</span><span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">+---+---+-+---+
|ABC|DEF|G|HIJ|
|KLM|NOP|Q|RST|
+---+---+-+---+
|UVW|XYZ|A|BCD|
|EFG|HIJ|K|LMN|
+---+---+-+---+
|OPQ|RST|U|VWX|
|YZA|BCD|E|FGH|
+---+---+-+---+

</span></div></div>
</div>
<p>You can find more usage examples of <code class="docutils literal notranslate"><span class="pre">box</span></code> and a more thorough explanation of how the left argument works <a class="reference external" href="https://dfns.dyalog.com/n_box.htm">here</a>.</p>
</div>
<div class="section" id="cols">
<span id="execute-and-format-control-cols"></span><h4><span class="section-number">7.4.1.2. </span><code class="docutils literal notranslate"><span class="pre">cols</span></code><a class="headerlink" href="#cols" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">cols</span></code> is a function that you can use to display a list of items along a series of columns.
To use <code class="docutils literal notranslate"><span class="pre">cols</span></code>, you give it the list of items to display as the right argument and the gap between adjacent columns and also the maximum width that can be occupied by the table as the left argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span> <span class="nv">dfns</span> <span class="nv">cols</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">C:\Program Files\Dyalog\Dyalog APL-64 18.0 Unicode\ws\dfns.dws saved Tue Dec  1 20:08:40 2020
</span></div></div>
</div>
<p>Notice how the first element of the left argument controls the spacing between columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="m">20</span> <span class="nv">cols</span> <span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">A C E G I K M O Q S U W Y
B D F H J L N P R T V X Z

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span> <span class="m">20</span> <span class="nv">cols</span> <span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">A  D  G  J  M  P  S  V  Y
B  E  H  K  N  Q  T  W  Z
C  F  I  L  O  R  U  X   

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span> <span class="m">20</span> <span class="nv">cols</span> <span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">A   E   I   M   Q   U   Y
B   F   J   N   R   V   Z
C   G   K   O   S   W    
D   H   L   P   T   X    

</span></div></div>
</div>
<p>Also, notice how the second element of the left argument controls the maximum width of the table, in number of characters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span> <span class="m">30</span> <span class="nv">cols</span> <span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">A   D   G   J   M   P   S   V   Y
B   E   H   K   N   Q   T   W   Z
C   F   I   L   O   R   U   X    

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span> <span class="m">40</span> <span class="nv">cols</span> <span class="nf">⎕A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">A   C   E   G   I   K   M   O   Q   S   U   W   Y
B   D   F   H   J   L   N   P   R   T   V   X   Z

</span></div></div>
</div>
<p>Finally, it is worth noting that the items are laid out along the columns, and not along the rows.</p>
<p>You can find more details about the <code class="docutils literal notranslate"><span class="pre">cols</span></code> function, as well as more examples of its usage and some interesting considerations about the difficulty of figuring out the final layout of the table, in <a class="reference external" href="https://dfns.dyalog.com/n_cols.htm">here</a>.</p>
</div>
<div class="section" id="display-displays-and-displayr">
<span id="execute-and-format-control-display-displays-and-displayr"></span><h4><span class="section-number">7.4.1.3. </span><code class="docutils literal notranslate"><span class="pre">display</span></code>, <code class="docutils literal notranslate"><span class="pre">displays</span></code>, and <code class="docutils literal notranslate"><span class="pre">displayr</span></code><a class="headerlink" href="#display-displays-and-displayr" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">display</span></code> function from the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace is very identical – if not similar – to the <code class="docutils literal notranslate"><span class="pre">DISPLAY</span></code> function that we have used previously, from the <code class="docutils literal notranslate"><span class="pre">display</span></code> workspace.
The <code class="docutils literal notranslate"><span class="pre">displays</span></code> and <code class="docutils literal notranslate"><span class="pre">displayr</span></code> functions are slight variations on how <code class="docutils literal notranslate"><span class="pre">dfns.display</span></code> (and <code class="docutils literal notranslate"><span class="pre">display.DISPLAY</span></code>) work.
You can refer back to <a class="reference internal" href="Data-and-Variables.html#data-and-variables-display"><span class="std std-numref">Section 3.6.4</span></a> to learn about <code class="docutils literal notranslate"><span class="pre">display</span></code>, but we show a quick example of the information it provides:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span> <span class="nv">dfns</span> <span class="nv">display</span> <span class="nv">displays</span> <span class="nv">displayr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">C:\Program Files\Dyalog\Dyalog APL-64 18.0 Unicode\ws\dfns.dws saved Tue Dec  1 20:08:40 2020
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">display</span> <span class="m">1</span> <span class="s1">&#39;a&#39;</span> <span class="s1">&#39;abc&#39;</span> <span class="p">(</span><span class="m">2</span> <span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────────────────┐
│     ┌→──┐ ┌→────┐ │
│ 1 a │abc│ ↓1 2 3│ │
│   - └───┘ │4 5 6│ │
│           └~────┘ │
└∊──────────────────┘

</span></div></div>
</div>
<p>Notice how <code class="docutils literal notranslate"><span class="pre">display</span></code> provides information about the number of axes of each subarray, as well as giving an indication of what is the type of each subarray: whether it is all numeric, all character, mixed, or nested.
<code class="docutils literal notranslate"><span class="pre">displays</span></code> adds more information, because it also shows the length of each axis:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">displays</span> <span class="m">1</span> <span class="s1">&#39;a&#39;</span> <span class="s1">&#39;abc&#39;</span> <span class="p">(</span><span class="m">2</span> <span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─4────────────────┐
│     ┌→─3┐ ┌→─2 3┐ │
│ 1 a │abc│ ↓1 2 3│ │
│   - └───┘ │4 5 6│ │
│           └~────┘ │
└∊──────────────────┘

</span></div></div>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">displayr</span></code> provides even more information, by including the depth of each subarray.
Furthermore, notice that <code class="docutils literal notranslate"><span class="pre">displayr</span></code> also shows the length of each axis, but in a different location to that of <code class="docutils literal notranslate"><span class="pre">displays</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">displayr</span> <span class="m">1</span> <span class="s1">&#39;a&#39;</span> <span class="s1">&#39;abc&#39;</span> <span class="p">(</span><span class="m">2</span> <span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌4────────────────────┐
│     ┌3───┐ ┌3─────┐ │
│ 1 a │ abc│ 2 1 2 3│ │
│   - └────┘ │ 4 5 6│ │
│            └~─────┘ │
└¯2───────────────────┘

</span></div></div>
</div>
<p>You can learn more about these three functions by visiting <a class="reference external" href="https://dfns.dyalog.com/n_display.htm">this</a> page.</p>
</div>
<div class="section" id="disp-and-dsp">
<span id="execute-and-format-control-disp-and-dsp"></span><h4><span class="section-number">7.4.1.4. </span><code class="docutils literal notranslate"><span class="pre">disp</span></code> and <code class="docutils literal notranslate"><span class="pre">dsp</span></code><a class="headerlink" href="#disp-and-dsp" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">disp</span></code> and <code class="docutils literal notranslate"><span class="pre">dsp</span></code> are two other functions that you can use for outputting arrays, but these two functions try to be more compact and less verbose.
Using <code class="docutils literal notranslate"><span class="pre">disp</span></code> resembles pretty much what our output already looks like because we have been using <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">on</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="m">2</span> <span class="m">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┐
│1 1│1 2│
├───┼───┤
│2 1│2 2│
└───┴───┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">)</span><span class="nv">copy</span> <span class="nv">dfns</span> <span class="nv">disp</span> <span class="nv">dsp</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">C:\Program Files\Dyalog\Dyalog APL-64 18.0 Unicode\ws\dfns.dws saved Tue Dec  1 20:08:40 2020
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">disp</span> <span class="o">⍳</span><span class="m">2</span> <span class="m">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┐
│1 1│1 2│
├───┼───┤
│2 1│2 2│
└───┴───┘

</span></div></div>
</div>
<p>In order to be able to see that <code class="docutils literal notranslate"><span class="pre">disp</span></code> actually does something, let us first turn <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">off</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="nv">off</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="m">2</span> <span class="m">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 1 1  1 2 
 2 1  2 2 

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">disp</span> <span class="o">⍳</span><span class="m">2</span> <span class="m">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┐
│1 1│1 2│
├───┼───┤
│2 1│2 2│
└───┴───┘

</span></div></div>
</div>
<p>The left argument to <code class="docutils literal notranslate"><span class="pre">disp</span></code> (a 1- or 2-element vector) can further customise the output:</p>
<ul class="simple">
<li><p>the first element of the left argument controls decoration of subarrays (the default is 0):</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span> <span class="nv">disp</span> <span class="m">2</span> <span class="m">2</span><span class="o">⍴</span><span class="s1">&#39;Tea&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">1</span><span class="o">⍴</span><span class="m">4</span> <span class="m">2</span><span class="p">)</span><span class="s1">&#39;&amp;&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬────┐
│Tea│4   │
│   │2   │
├───┼────┤
│&amp;  │2 40│
└───┴────┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="nv">disp</span> <span class="m">2</span> <span class="m">2</span><span class="o">⍴</span><span class="s1">&#39;Tea&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">1</span><span class="o">⍴</span><span class="m">4</span> <span class="m">2</span><span class="p">)</span><span class="s1">&#39;&amp;&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──┬────┐
↓Tea│4   │
│   │2   ↓
├──→┼~──→┤
│&amp;  │2 40│
└───┴~──→┘

</span></div></div>
</div>
<ul class="simple">
<li><p>the second element controls the centring of the elements (the default is also 0):</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span> <span class="m">0</span><span class="nv">disp</span> <span class="m">2</span> <span class="m">2</span><span class="o">⍴</span><span class="s1">&#39;Tea&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">1</span><span class="o">⍴</span><span class="m">4</span> <span class="m">2</span><span class="p">)</span><span class="s1">&#39;&amp;&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬────┐
│Tea│4   │
│   │2   │
├───┼────┤
│&amp;  │2 40│
└───┴────┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span> <span class="m">1</span><span class="nv">disp</span> <span class="m">2</span> <span class="m">2</span><span class="o">⍴</span><span class="s1">&#39;Tea&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">1</span><span class="o">⍴</span><span class="m">4</span> <span class="m">2</span><span class="p">)</span><span class="s1">&#39;&amp;&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬────┐
│Tea│ 4  │
│   │ 2  │
├───┼────┤
│ &amp; │2 40│
└───┴────┘

</span></div></div>
</div>
<p>You can learn more about <code class="docutils literal notranslate"><span class="pre">disp</span></code> if you follow <a class="reference external" href="https://dfns.dyalog.com/n_disp.htm">this</a> link.
<code class="docutils literal notranslate"><span class="pre">dsp</span></code> provides a representation of arrays that is even <em>more</em> compact and, therefore, provides even less information:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">dsp</span> <span class="m">2</span> <span class="m">2</span><span class="o">⍴</span><span class="s1">&#39;Tea&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">1</span><span class="o">⍴</span><span class="m">4</span> <span class="m">2</span><span class="p">)</span><span class="s1">&#39;&amp;&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">────────
Tea│4   
   │2   
───┼────
&amp;  │2 40

</span></div></div>
</div>
<p>The left argument (that defaults to 1) is a Boolean that indicates whether or not the top bar should be displayed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span> <span class="nv">dsp</span> <span class="m">2</span> <span class="m">2</span><span class="o">⍴</span><span class="s1">&#39;Tea&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">1</span><span class="o">⍴</span><span class="m">4</span> <span class="m">2</span><span class="p">)</span><span class="s1">&#39;&amp;&#39;</span><span class="p">(</span><span class="m">2</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Tea│4   
   │2   
───┼────
&amp;  │2 40

</span></div></div>
</div>
<p>To learn more about this utility function, you can visit <a class="reference external" href="https://dfns.dyalog.com/n_dsp.htm">this</a> page.</p>
</div>
</div>
<div class="section" id="modifying-session-output-with-user-commands">
<span id="execute-and-format-control-modifying-session-output-with-user-commands"></span><h3><span class="section-number">7.4.2. </span>Modifying Session Output with User Commands<a class="headerlink" href="#modifying-session-output-with-user-commands" title="Permalink to this headline">¶</a></h3>
<div class="section" id="a-brief-overview">
<span id="execute-and-format-control-a-brief-overview"></span><h4><span class="section-number">7.4.2.1. </span>A Brief Overview<a class="headerlink" href="#a-brief-overview" title="Permalink to this headline">¶</a></h4>
<p>User commands are developer tools, written in APL, that can be used without having to explicitly copy code into your workspace and/or save it in every workspace in which you want to use them.
User commands are typed in the session, they start with a closing bracket <code class="docutils literal notranslate"><span class="pre">]</span></code> followed by their name, and may receive further arguments after that.
For example, <code class="docutils literal notranslate"><span class="pre">]box</span></code> is a user command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="nv">on</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was OFF

</span></div></div>
</div>
<p>You can type <code class="docutils literal notranslate"><span class="pre">]</span> <span class="pre">-?</span></code> to get a list of all the available user commands, which should show list all of them with their group on the leftmost column.
Your exact output may not match the output here because you might be running a more recent version of Dyalog APL with newer user commands, you might have added your own user commands, or I might have some custom commands that you have not installed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span> <span class="o">-?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────                                                                                                                                            

120 commands:                                                                                                                                                                                                              

 ARRAY         Compare  Edit                                                                                                                                                                                               
 CALC          Factors  FromHex  PivotTable  ToHex                                                                                                                                                                         
 DEVOPS        DBuild  DTest                                                                                                                                                                                               
 EXPERIMENTAL  Config                                                                                                                                                                                                      
 FILE          CD  Collect  Compare  Edit  Find  Open  Replace  Split  ToLarge  ToQuadTS  Touch                                                                                                                            
 FN            Align  Calls  Compare  Defs  DInput  Latest  ReorderLocals                                                                                                                                                  
 LINK          Add  Break  Create  Export  Expunge  GetFileName  GetItemName  Import  Refresh  Resync  Status                                                                                                              
 MSWIN         Assemblies  Caption  CopyReg  FileAssociations  GUIProps  KeyPress                                                                                                                                          
 MYCMDS        Zen                                                                                                                                                                                                         
 NS            ScriptUpdate  Summary  Xref                                                                                                                                                                                 
 OUTPUT        Box  Boxing  Disp  Display  Find  Format  HTML  Layout  Plot  Rows  VPad                                                                                                                                    
 PERFORMANCE   Profile  RunTime  SpaceNeeded                                                                                                                                                                               
 SALT          Boot  Clean  Compare  List  Load  Refresh  RemoveVersions  Save  Set  Settings  Snap                                                                                                                        
 TATIN         CheckForLaterVersion  Documentation  Init  InstallPackage  ListPackages  ListRegistries  ListTags  ListVersions  LoadDependencies  LoadPackage  LoadTatin  Pack  PackageConfig  PackageDependencies  Publish
               UninstallPackage  UserSettings  Version                                                                                                                                                                     
 TOOLS         ADoc  Calendar  Chart  Demo  Help  Version  WEd                                                                                                                                                             
 TRANSFER      In  Out                                                                                                                                                                                                     
 UCMD          UDebug  ULoad  UMonitor  UNew  UReset  USetup  UVersion                                                                                                                                                     
 WS            Check  Compare  Document  FindRefs  FnsLike  Locate  Map  NamesLike  Nms  ObsLike  Peek  SizeOf  VarsLike                                                                                                   

]        ⍝ for general user command help                                                                                                                                                                                   
] -??    ⍝ for brief info on each command                                                                                                                                                                                  
]cmd -?  ⍝ for info on the "Cmd" command or group                                                                                                                                                                          

</span></div></div>
</div>
<p>You can get more information about a specific user command, or about a specific group, by typing <code class="docutils literal notranslate"><span class="pre">]name</span> <span class="pre">-?</span></code>.
For example, if we want more help on the <code class="docutils literal notranslate"><span class="pre">OUTPUT</span></code> group, we can type <code class="docutils literal notranslate"><span class="pre">]output</span> <span class="pre">-?</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">output</span> <span class="o">-?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">                                                                                                                                     
 OUTPUT    User commands that affect the way items are displayed:                                                                    
  Box      Display output with borders indicating shape, type and structure                                                          
  Boxing   Display output with borders indicating shape, type and structure                                                          
  Disp     Display specified array with borders indicating sub-array shape and type                                                  
  Display  Display specified array with borders indicating array and sub-array shape and type                                        
  Find     Precede output with a reference to the line of code that generated it                                                     
  Format   Format text into vector of text vectors (or matrix if called from Session) to fit ⎕PW using specified margins             
  HTML     Render HTML or SVG using an appropriate method                                                                            
  Layout   Format text into vector of text vectors (or matrix if called from Session) to fit ⎕PW using margins inferred from the text
  Plot     Plot data using an appropriate method                                                                                     
  Rows     Cut, wrap, fold or extend the display of output lines to fit the Session window                                           
  VPad     Add vertical padding to output                                                                                            

]        ⍝ for general user command help                                                                                             
]cmd -?  ⍝ for info on the "Cmd" command or group                                                                                    

</span></div></div>
</div>
<p>This is the group of user commands that we will focus on.
In particular, we will take a more careful look at the <code class="docutils literal notranslate"><span class="pre">box</span></code> (and <code class="docutils literal notranslate"><span class="pre">boxing</span></code>), <code class="docutils literal notranslate"><span class="pre">disp</span></code>, <code class="docutils literal notranslate"><span class="pre">display</span></code>, <code class="docutils literal notranslate"><span class="pre">find</span></code>, and <code class="docutils literal notranslate"><span class="pre">rows</span></code> user commands.
If you want, go ahead and run <code class="docutils literal notranslate"><span class="pre">]cmd</span> <span class="pre">-?</span></code> (where <code class="docutils literal notranslate"><span class="pre">cmd</span></code> is the name of the command you are interested in) to try and figure out what these user commands do.
After that, come back and read the following subsections to make sure you understood things correctly.
Learning to read documentation, user command usage help, etc, is a valuable skill in the world of programming, so take all the chances you can get to practice.</p>
</div>
<div class="section" id="disp-and-display">
<span id="execute-and-format-control-disp-and-display"></span><h4><span class="section-number">7.4.2.2. </span><code class="docutils literal notranslate"><span class="pre">disp</span></code> and <code class="docutils literal notranslate"><span class="pre">display</span></code><a class="headerlink" href="#disp-and-display" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">disp</span></code> and <code class="docutils literal notranslate"><span class="pre">display</span></code> names should sound familiar to you, and that is because these user commands are essentially the same as the corresponding <code class="docutils literal notranslate"><span class="pre">dfns</span></code> functions, which we talked about previously (we discussed <code class="docutils literal notranslate"><span class="pre">display</span></code> in <a class="reference internal" href="#execute-and-format-control-display-displays-and-displayr"><span class="std std-numref">Section 7.4.1.3</span></a> and we discussed <code class="docutils literal notranslate"><span class="pre">disp</span></code> in <a class="reference internal" href="#execute-and-format-control-disp-and-dsp"><span class="std std-numref">Section 7.4.1.4</span></a>).
We won’t worry too much about explaining these two user commands in detail because their way of functioning is already familiar to you.
Let us just take a quick look at the help information for <code class="docutils literal notranslate"><span class="pre">]disp</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">disp</span> <span class="o">-?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────

]OUTPUT.Disp                                                                   

Display specified array with borders indicating sub-array shape and type       
    ]Disp &lt;array&gt;                                                              

]Disp -?? ⍝ for more information and examples                                  


</span></div></div>
</div>
<p>When we use <code class="docutils literal notranslate"><span class="pre">-?</span></code> with a user command, we generally get a brief help message.
Certain user commands provide more detailed help if we ask for it, and we do so by using two question marks <code class="docutils literal notranslate"><span class="pre">-??</span></code> instead of just one:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">disp</span> <span class="o">-??</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────                   

]OUTPUT.Disp                                                                                      

Display specified array with borders indicating non-simple array shape andsub-array shape and type
    ]Disp &lt;array&gt;                                                                                 

Axes are indicated as follows:                                                                    
    ↓  leading axis   (length&gt;0)                                                                  
    →  trailing axis  (length&gt;0)                                                                  
    ⌽  leading axis   (length=0)                                                                  
    ⊖  trailing axis  (length=0)                                                                  
    ⍒  multiple leading axes                                                                      
Content types are indicated as follows:                                                           
    ~  Numeric                                                                                    
    ─  Character                                                                                  
    #  Namespace                                                                                  
    ∇  ⎕OR                                                                                        
    +  Mixed                                                                                      
If any axis is length-0 then the content is prototypical                                          

Example:                                                                                          
    ]Disp 1 1 4⍴(42'ab')⎕SE(⍪'ab',42)⍬                                                            
┌→──────┬───┬──┬─┐                                                                                
⍒┌→─┬──┐│   │ a│ │                                                                                
││42│ab││⎕SE│ b│0│                                                                                
│└~─┴─→┘│   │42↓ │                                                                                
└──────→┴#──┴+→┴⊖┘                                                                                

NOTE:  This is similar to displaying array with ]Boxing on -style=mid                             


</span></div></div>
</div>
<p>Notice how the example, in the end, is very similar to the output of the <code class="docutils literal notranslate"><span class="pre">disp</span></code> function from the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> WS:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="nv">disp</span> <span class="nv">nestedArray</span> <span class="kd">←</span> <span class="m">1</span> <span class="m">1</span> <span class="m">4</span><span class="o">⍴</span><span class="p">(</span><span class="m">42</span><span class="s1">&#39;ab&#39;</span><span class="p">)</span><span class="nf">⎕SE</span><span class="p">(</span><span class="o">⍪</span><span class="s1">&#39;ab&#39;</span><span class="o">,</span><span class="m">42</span><span class="p">)</span><span class="no">⍬</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────┬───┬──┬─┐
↓┌→─┬──┐│⎕SE│ a│0│
││42│ab││   │ b│ │
│└~─┴─→┘│   │42↓ │
└──────→┴#──┴+→┴⊖┘

</span></div></div>
</div>
<p>Similarly, we can get more detailed help for the <code class="docutils literal notranslate"><span class="pre">display</span></code> user command with <code class="docutils literal notranslate"><span class="pre">]display</span> <span class="pre">-??</span></code>, which shows a help message fairly similar to that of <code class="docutils literal notranslate"><span class="pre">]disp</span> <span class="pre">-??</span></code>.
The main difference between <code class="docutils literal notranslate"><span class="pre">]display</span></code> and <code class="docutils literal notranslate"><span class="pre">]disp</span></code> (as with the <code class="docutils literal notranslate"><span class="pre">dfns.display</span></code> and <code class="docutils literal notranslate"><span class="pre">dfns.disp</span></code> functions) is that <code class="docutils literal notranslate"><span class="pre">]display</span></code> is more verbose, when compared to <code class="docutils literal notranslate"><span class="pre">]disp</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">display</span> <span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘

</span></div></div>
</div>
<p>The output produced by <code class="docutils literal notranslate"><span class="pre">]display</span></code> is fairly similar to the output of <code class="docutils literal notranslate"><span class="pre">dfns.display</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">display</span> <span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘

</span></div></div>
</div>
<!--begin remark-->
<p><em><strong>Remark</strong></em>:</p>
<blockquote>
<div><p>We can see that <code class="docutils literal notranslate"><span class="pre">]display</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">dfns.display</span></code> and that <code class="docutils literal notranslate"><span class="pre">]disp</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">dfns.disp</span></code>, but there is one fundamental difference: only the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> functions can be called from within other functions; the user commands can only be used from within the interpreter session.</p>
</div></blockquote>
<!--end-->
<p>The previous remark justifies the existence of these pairs of functions/user commands that are so similar: the user commands are extremely handy for use in the session, but the functions are necessary if we want to use that functionality from within other functions.</p>
</div>
<div class="section" id="box-and-boxing">
<span id="execute-and-format-control-box-and-boxing"></span><h4><span class="section-number">7.4.2.3. </span><code class="docutils literal notranslate"><span class="pre">box</span></code> (and <code class="docutils literal notranslate"><span class="pre">boxing</span></code>)<a class="headerlink" href="#box-and-boxing" title="Permalink to this headline">¶</a></h4>
<p>We have already dealt with <code class="docutils literal notranslate"><span class="pre">box</span></code> a little bit, but we have only scratched the surface of what the <code class="docutils literal notranslate"><span class="pre">]box</span></code> user command can do.
Let us start by inspecting its help text:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────                 

]OUTPUT.Box                                                                                     

Display output with borders indicating shape, type and structure                                
    ]Box [on|off|reset|?] [-style={min|mid|max}] [-trains={box|tree|parens|def}] [-fns={off|on}]

]Box -?? ⍝ for more information and examples                                                    


</span></div></div>
</div>
<p>Notice that the help message above contains some type of information that we hadn’t seen before:</p>
<p><code class="docutils literal notranslate"><span class="pre">]Box</span> <span class="pre">[on|off|reset|?]</span> <span class="pre">[-style={min|mid|max}]</span> <span class="pre">[-trains={box|tree|parens|def}]</span> <span class="pre">[-fns={off|on}]</span></code></p>
<p>This part of the help message tells us the syntax of the <code class="docutils literal notranslate"><span class="pre">]box</span></code> command, that is, the different arguments and modifiers we can give the command to customise its behaviour.
The arguments are the different options inside the first group of square brackets, namely, <code class="docutils literal notranslate"><span class="pre">[on|off|reset|?]</span></code>.
The vertical pipe <code class="docutils literal notranslate"><span class="pre">|</span></code> separates the different options, so we see that <code class="docutils literal notranslate"><span class="pre">]box</span></code> takes one of four arguments.
We have already used <code class="docutils literal notranslate"><span class="pre">on</span></code> and <code class="docutils literal notranslate"><span class="pre">off</span></code>, but the help information shows we can also use the <code class="docutils literal notranslate"><span class="pre">reset</span></code> argument, as well as the <code class="docutils literal notranslate"><span class="pre">?</span></code>.
If we want to figure out what they do, we must ask for more detailed help with <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">-??</span></code>.
Take a look at the detailed help description below, and try to focus solely on finding the meaning of the <code class="docutils literal notranslate"><span class="pre">reset</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code> arguments:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-??</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────                 

]OUTPUT.Box                                                                                     

Display output with borders indicating shape, type and structure                                
    ]Box [on|off|reset|?] [-style={min|mid|max}] [-trains={box|tree|parens|def}] [-fns={off|on}]

Argument is one of:                                                                             
    ""        query on/off state only                                                           
    "on"      activate boxing                                                                   
    "off"     disable boxing                                                                    
    "reset"   restore factory settings: -style=min -trains=box -fns=off                         
    "?"       query current state including modifiers                                           

-style={min|mid|max}  amount of diagram detail                                                  
    ┌───┬──────┐    ┌→──┬──────┐    ┌→───────────────┐                                          
    │min│boxing│    │mid│boxing│    │ ┌→──┐ ┌→─────┐ │                                          
    └───┴──────┘    └──→┴─────→┘    │ │max│ │boxing│ │                                          
                                    │ └───┘ └──────┘ │                                          
    min:  no border decoration      └∊───────────────┘                                          
    mid:  axes are indicated as follows:                                                        
            ↓  leading axis   (length&gt;0)                                                        
            →  trailing axis  (length&gt;0)                                                        
            ⌽  leading axis   (length=0)                                                        
            ⊖  trailing axis  (length=0)                                                        
            ⍒  multiple leading axes                                                            
          content types are indicated as follows:                                               
            ~  numeric                                                                          
            ─  character                                                                        
            #  namespace                                                                        
            ∇  ⎕OR                                                                              
            +  mixed                                                                            
    max:  axes are indicated as follows:                                                        
            ↓  leading axes   (length&gt;0)                                                        
            →  trailing axis  (length&gt;0)                                                        
            ⌽  leading axes   (length=0)                                                        
            ⊖  trailing axis  (length=0)                                                        
          content types are indicated as follows:                                               
            ∊  nested                                                                           
            ~  numeric                                                                          
            ─  character                                                                        
            #  namespace                                                                        
            ∇  ⎕OR                                                                              
            +  mixed                                                                            
NOTES:                                                                                          
    ∘  For mid and max, content is prototypical if any axis has length=0.                       
    ∘  -style=mid is similar to always using ]Disp                                              
    ∘  -style=max is similar to always using ]Display                                           

-trains={box|tree|parens|def}  display style of trains and derived functions                    
    Display of +⌿÷≢ with -trains=...                                                            
        box          tree     parens    def                                                     
    ┌─────┬─┬─┐      ┌─┼─┐    (+⌿)÷≢   +⌿÷≢                                                     
    │┌─┬─┐│÷│≢│      ⌿ ÷ ≢                                                                      
    ││+│⌿││ │ │    ┌─┘                                                                          
    │└─┴─┘│ │ │    +                                                                            
    └─────┴─┴─┘                                                                                 
    NOTE:  -trains=parens uses default form if any component needs multiple lines to display.   

-fns={off|on}  diagram output from running functions                                            
    Display of {⌽⎕←⍵}'hello' 'world' with -fns=...                                              
         off               on                                                                   
     hello  world    ┌─────┬─────┐                                                              
    ┌─────┬─────┐    │hello│world│                                                              
    │world│hello│    └─────┴─────┘                                                              
    └─────┴─────┘    ┌─────┬─────┐                                                              
                     │world│hello│                                                              
                     └─────┴─────┘                                                              


</span></div></div>
</div>
<p>As you could (hopefully) see, the purpose of the <code class="docutils literal notranslate"><span class="pre">reset</span></code> argument is to “restore factory settings”, and the purpose of the <code class="docutils literal notranslate"><span class="pre">?</span></code> argument is to “query current state including modifiers”, but what are these modifiers?</p>
<p>The modifiers are the remaining three bracketed groups in the line</p>
<p><code class="docutils literal notranslate"><span class="pre">]Box</span> <span class="pre">[on|off|reset|?]</span> <span class="pre">[-style={min|mid|max}]</span> <span class="pre">[-trains={box|tree|parens|def}]</span> <span class="pre">[-fns={off|on}]</span></code>,</p>
<p>each starting with <code class="docutils literal notranslate"><span class="pre">-modifier_name=</span></code>, where <code class="docutils literal notranslate"><span class="pre">modifier_name</span></code> is the name of the modifier, and one of <code class="docutils literal notranslate"><span class="pre">style</span></code>, <code class="docutils literal notranslate"><span class="pre">trains</span></code>, and <code class="docutils literal notranslate"><span class="pre">fns</span></code>.
These modifiers let you customise the behaviour of <code class="docutils literal notranslate"><span class="pre">box</span></code> even further, so let us explore what each modifier does.</p>
<p><code class="docutils literal notranslate"><span class="pre">-style=</span></code> is used to control the amount of detail in the array diagrams. The default value is <code class="docutils literal notranslate"><span class="pre">min</span></code>, which adds no decoration to array borders:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="nv">on</span> <span class="o">-</span><span class="nv">style</span><span class="o">=</span><span class="nv">min</span>
<span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON -style=min

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───────┬───┬──┬┐
│┌──┬──┐│⎕SE│ a││
││42│ab││   │ b││
│└──┴──┘│   │42││
└───────┴───┴──┴┘

</span></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-style=min</span></code> modifier displays arrays much like the <code class="docutils literal notranslate"><span class="pre">box</span></code> function from the <code class="docutils literal notranslate"><span class="pre">dfns</span></code> workspace, or even the <code class="docutils literal notranslate"><span class="pre">disp</span></code> function from the same workspace.</p>
<p>If we change the style to <code class="docutils literal notranslate"><span class="pre">mid</span></code>, then we get some decorations that are similar to using the <code class="docutils literal notranslate"><span class="pre">]disp</span></code> user command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-</span><span class="nv">style</span><span class="o">=</span><span class="nv">mid</span>
<span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was -style=min

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────┬───┬──┬─┐
↓┌→─┬──┐│⎕SE│ a│0│
││42│ab││   │ b│ │
│└~─┴─→┘│   │42↓ │
└──────→┴#──┴+→┴⊖┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">disp</span> <span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────┬───┬──┬─┐
⍒┌→─┬──┐│⎕SE│ a│0│
││42│ab││   │ b│ │
│└~─┴─→┘│   │42↓ │
└──────→┴#──┴+→┴⊖┘

</span></div></div>
</div>
<p>Finally, using the <code class="docutils literal notranslate"><span class="pre">-style=max</span></code> modifier, we get decorations on the boxes that are similar to those placed by the <code class="docutils literal notranslate"><span class="pre">]display</span></code> user command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-</span><span class="nv">style</span><span class="o">=</span><span class="nv">max</span>
<span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─────────────┐
│Was -style=mid│
└──────────────┘

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="nv">off</span>
<span class="sr">]</span><span class="nv">display</span> <span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘

</span></div></div>
</div>
<p>Notice that we had to turn <code class="docutils literal notranslate"><span class="pre">]box</span></code> off, otherwise the implicit styling that <code class="docutils literal notranslate"><span class="pre">]box</span></code> creates around each array would be applied to the styling that <code class="docutils literal notranslate"><span class="pre">]display</span> <span class="pre">nestedArray</span></code> already creates, producing the following output:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="nv">on</span>
<span class="sr">]</span><span class="nv">display</span> <span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────┐
│Was OFF│
└───────┘

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→────────────────────────────┐
↓┌┌→─────────────────────────┐│
│↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ ││
│││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ ││
│││ │ 42 │ab│ │     │ b│ └~┘ ││
│││ │    └──┘ │     │42│     ││
│││ └∊────────┘     └+─┘     ││
│└└∊─────────────────────────┘│
└─────────────────────────────┘

</span></div></div>
</div>
<p>Notice the extra outer box that is around a text matrix.
That extra outer box is the result of using <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">on</span></code>.</p>
<p>This is something to be aware of, and clearly demonstrates the main difference between <code class="docutils literal notranslate"><span class="pre">]box</span></code> and the other user commands/functions we have taken a look at: the <code class="docutils literal notranslate"><span class="pre">]box</span></code> user command defines some settings that are applied implicitly to all session output, whereas the other user commands and functions need to be called explicitly.</p>
<p>The sentence above hides a very important nuance: “all session output” refers to the output that is produced as the final result of an expression that was ran, and does not refer to the explicit output that is generated by the usage of <code class="docutils literal notranslate"><span class="pre">⎕←</span></code> or <code class="docutils literal notranslate"><span class="pre">⍞←</span></code> inside other functions; that is, the <code class="docutils literal notranslate"><span class="pre">]box</span></code> settings do not influence function output by default:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">nestedArray</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="nv">F</span> <span class="kd">←</span> <span class="kt">{</span>
    <span class="vg">⎕</span><span class="kd">←</span> <span class="nv">nestedArray</span>
    <span class="m">0</span>
<span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">F</span><span class="no">⍬</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘


0


</span></div></div>
</div>
<p>This behaviour is what the <code class="docutils literal notranslate"><span class="pre">-fns=</span></code> modifier changes: by setting <code class="docutils literal notranslate"><span class="pre">-fns=on</span></code>, function output also becomes decorated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-</span><span class="nv">fns</span><span class="o">=</span><span class="nv">on</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→──────────┐
│Was -fns=on│
└───────────┘

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">F</span><span class="no">⍬</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┌→─────────────────────────┐
↓↓ ┌→────────┐     ┌→─┐ ┌⊖┐ │
││ │    ┌→─┐ │ ⎕SE ↓ a│ │0│ │
││ │ 42 │ab│ │     │ b│ └~┘ │
││ │    └──┘ │     │42│     │
││ └∊────────┘     └+─┘     │
└└∊─────────────────────────┘


0


</span></div></div>
</div>
<p>Finally, we have the <code class="docutils literal notranslate"><span class="pre">-trains=</span></code> modifier.</p>
<!-- (TODO) check that the link below works. -->
<p>The <code class="docutils literal notranslate"><span class="pre">-trains=</span></code> modifier will become much more relevant once we discuss tacit programming in <span class="xref myst">a later chapter</span>, but for now we can see that it helps us visualise functions that we derive from the usage of operators.
For example, we know that <code class="docutils literal notranslate"><span class="pre">+/</span></code> can be seen as the “sum” function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  
55


</span></div></div>
</div>
<p>But what happens if we just type the derived function in the session?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">/</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  /
┌─┘
+  

</span></div></div>
</div>
<p>We see that we get a box around each of the primitives, and that is because <code class="docutils literal notranslate"><span class="pre">]box</span></code> is on.
(If it were off, we would have no boxing whatsoever.)
This is because the default value of the <code class="docutils literal notranslate"><span class="pre">-trains=</span></code> modifier is <code class="docutils literal notranslate"><span class="pre">box</span></code>.
We can also try the <code class="docutils literal notranslate"><span class="pre">tree</span></code>, <code class="docutils literal notranslate"><span class="pre">parens</span></code>, and <code class="docutils literal notranslate"><span class="pre">def</span></code> values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">tree</span>
<span class="o">+</span><span class="na">/</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────────────┐
│Was -trains=tree│
└────────────────┘

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">  /
┌─┘
+  

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">parens</span>
<span class="o">+</span><span class="na">/</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────────────┐
│Was -trains=tree│
└────────────────┘

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">+/

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">def</span>
<span class="o">+</span><span class="na">/</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→─────────────────┐
│Was -trains=parens│
└──────────────────┘

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">+/

</span></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">parens</span></code> and <code class="docutils literal notranslate"><span class="pre">def</span></code> options look the same because <code class="docutils literal notranslate"><span class="pre">+/</span></code> is too simple of a function.
When we talk about tacit programming, it will become clear what the difference between <code class="docutils literal notranslate"><span class="pre">-trains=parens</span></code> and <code class="docutils literal notranslate"><span class="pre">-trains=def</span></code> is.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">]boxing</span></code> command is just an alias for <code class="docutils literal notranslate"><span class="pre">]box</span></code>, so there’s no need to discuss it separately.
Notice how we set some modifiers with the <code class="docutils literal notranslate"><span class="pre">]box</span></code> command and the changes also reflect on the <code class="docutils literal notranslate"><span class="pre">]boxing</span></code> command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="nv">on</span> <span class="o">-</span><span class="nv">style</span><span class="o">=</span><span class="nv">mid</span> <span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">tree</span> <span class="o">-</span><span class="nv">fns</span><span class="o">=</span><span class="nv">on</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON -style=max -trains=def -fns=on

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">boxing</span> <span class="o">?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">]boxing ON -style=mid -trains=tree -fns=on

</span></div></div>
</div>
<p>Similarly, we can use <code class="docutils literal notranslate"><span class="pre">]boxing</span> <span class="pre">reset</span></code> to set everything back to the default values, and verify that <code class="docutils literal notranslate"><span class="pre">]box</span> <span class="pre">?</span></code> reflects those changes as well:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">boxing</span> <span class="nv">reset</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">]boxing ON -style=min -trains=box -fns=off

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span> <span class="o">?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">]boxing ON -style=min -trains=box -fns=off

</span></div></div>
</div>
</div>
<div class="section" id="rows">
<span id="execute-and-format-control-rows"></span><h4><span class="section-number">7.4.2.4. </span><code class="docutils literal notranslate"><span class="pre">rows</span></code><a class="headerlink" href="#rows" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">]rows</span></code> user command, like the <code class="docutils literal notranslate"><span class="pre">]box</span></code> command, affects session output implicitly.
In other words, you use the <code class="docutils literal notranslate"><span class="pre">]rows</span></code> command to configure the session output to your liking, and then those configurations affect all session output without you having to do anything else.
Here is the help description of the <code class="docutils literal notranslate"><span class="pre">]rows</span></code> user command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="o">-?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────

]OUTPUT.Rows                                                                   

Cut, wrap, fold or extend the display of output lines to fit the Session window
    ]Rows [on|off|?] [-style=&lt;s&gt;] [-fold=&lt;f&gt;] [-fns={on|off}] [-dots=&lt;c&gt;]      

]Rows -??   ⍝ for more information and examples                                


</span></div></div>
</div>
<p>From the help description we can see that the <code class="docutils literal notranslate"><span class="pre">]rows</span></code> command exists to handle output that is too tall and/or too wide to fit the session window.
What does “too tall” or “too wide” mean?</p>
<!--begin remark-->
<p><em><strong>Remark</strong></em>:</p>
<blockquote>
<div><p>In the Jupyter interface, the screen width that <code class="docutils literal notranslate"><span class="pre">]rows</span></code> uses internally might not match the actual width you have available to display results.
It is advisable that you use RIDE or the Windows interpreter to test the user command <code class="docutils literal notranslate"><span class="pre">]rows</span></code>.</p>
</div></blockquote>
<!--end-->
<p>Let us start by talking about wide output.
When using the interpreter, the output is “too wide” if it would extend beyond the session window width.
The <a class="reference internal" href="#fig-session-wrap"><span class="std std-numref">Fig. 7.2</span></a> shows that when the output is “too wide”, it wraps to the next line(s).</p>
<div class="figure align-default" id="session-wrap">
<span id="fig-session-wrap"></span><img alt="_images/Session_Wrap.png" src="_images/Session_Wrap.png" />
<p class="caption"><span class="caption-number">Fig. 7.2 </span><span class="caption-text">Long output wrapping to the next line(s).</span><a class="headerlink" href="#session-wrap" title="Permalink to this image">¶</a></p>
</div>
<p>Despite using the session width to automatically decide if the output is too wide or not, the user can have some control over that, even before bringing in <code class="docutils literal notranslate"><span class="pre">]rows</span></code> to the table.
Through the system variable <em>print width</em> <code class="docutils literal notranslate"><span class="pre">⎕PW</span></code>, the user can control the number of characters that are allowed per line before the output is wrapped onto the next line.
You can assign an integer in the range 42 to 32767 to the variable <code class="docutils literal notranslate"><span class="pre">⎕PW</span></code> to change the <em>print width</em> of your session.
(We will take a more detailed look at system variables and functions <span class="xref myst">later on</span>.)</p>
<p>Let us create a dfn that produces a simple ruler to measure our session:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="kd">←</span> <span class="kt">{</span><span class="bp">⍵</span><span class="o">⍴</span><span class="s1">&#39;----&#39;&#39;----|&#39;</span><span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<p>And let us use it to explore what happens with output that is “too long”, as per what the <em>print width</em> determines is too long:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕PW</span> <span class="kd">←</span> <span class="m">50</span>
<span class="nv">ruler</span> <span class="m">50</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">----'----|----'----|----'----|----'----|----'----|

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="m">51</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">----'----|----'----|----'----|----'----|----'----|

      -

</span></div></div>
</div>
<p>We can see that lines that are longer than <code class="docutils literal notranslate"><span class="pre">⎕PW</span></code> characters get wrapped and indented.</p>
<p>When you produce (really) long outputs, it can be unwieldy to have the output wrap to new lines, so one might think about increasing the value of the <em>print width</em> variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕PW</span> <span class="kd">←</span> <span class="m">60</span>
<span class="nv">ruler</span> <span class="m">51</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">----'----|----'----|----'----|----'----|----'----|-

</span></div></div>
</div>
<p>Now we don’t have to scroll vertically to get past the output of this single expression.
With <code class="docutils literal notranslate"><span class="pre">]rows</span></code> we can get a similar effect, with the added benefit that we do not have to set the <em>print width</em> manually.</p>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">]rows</span></code> takes care of ensuring that the output does <em>not</em> wrap to the next line(s):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="nv">on</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was OFF

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">ruler</span> <span class="m">80</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">----'----|----'----|----'----|----'----|----'----|----'----|----'----|----'----|

</span></div></div>
</div>
<p>In fact, with <code class="docutils literal notranslate"><span class="pre">]rows</span> <span class="pre">on</span></code>, the <em>print width</em> variable is no longer relevant, and the user command calculates the current screen width when needed.</p>
<p>But the user command <code class="docutils literal notranslate"><span class="pre">]rows</span></code> can do much more than this; just remember that the help message showed a series of command modifiers that we haven’t explored yet.
Let us ask for a more detailed help description with <code class="docutils literal notranslate"><span class="pre">-??</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="o">-??</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">────────────────────────────────────────────────────────────

]OUTPUT.Rows                                                

Cut, wrap, fold or extend the display of output lines to fit
the Session window                                          
    ]Rows [on|off|?] [-style=&lt;s&gt;] [-fold=&lt;f&gt;]               
    [-fns={on|off}] [-dots=&lt;c&gt;]                             

Argument:                                                   
    ""      query main state (on/off)                       
    "on"    enable row-processing                           
    "off"   restore native ⎕PW block-wrapping               
    "?"     query full state, including modifiers           

Modifiers:                                                  

-style=&lt;s&gt;                                                  
    "long"  rows extended beyond screen width (default)     
    "cut"   rows truncated at screen width                  
    "wrap"  each row wrapped at screen width                

-fold=&lt;f&gt;                                                   
    &lt;n&gt;     number of trailing rows after fold (must be 0   
            through 9). Ignored when -style=wrap            
    "off"   no folding; all rows displayed (default)        

-fns={on|off}                                               
    "on"    also format output from running functions       
    "off"   only format session results (default)           

-dots=&lt;c&gt;                                                   
    &lt;c&gt;     character to use for ellipses (default is "·",  
            shown as "···")                                 

NOTES:                                                      
    ∘  -fold=&lt;n&gt; replaces rows towards the end of multi-row 
       output with a line of &lt;c&gt; characters so that the     
       expression that generated the output, together with  
       some leading and trailing rows of its output, remain 
       visible in the session window. -fold=&lt;n&gt; may be      
       appropriate for session-based demonstrations.        
    ∘  -fold=&lt;n&gt; is incompatible with -style=wrap. If both  
       are specified, -style=wrap prevails and -fold=&lt;n&gt; is 
       ignored.                                             
    ∘  -fold implies enabling row-processing, even if ]Rows 
       "on" was not specified.                              
    ∘  By default, only output from expressions typed into  
       the session is processed. To include output from     
       running functions, set -fns=on.                      

Example:                                                    
      ]Rows -fold=3                                         
was -fold=off                                               
      ⍳10 4   ⍝ this assumes that the session window is 13  
              lines high                                    
┌→───┬────┬────┬────┐                                       
↓1 1 │1 2 │1 3 │1 4 │                                       
├~──→┼~──→┼~──→┼~──→┤                                       
│2 1 │2 2 │2 3 │2 4 │                                       
├~──→┼~──→┼~──→┼~──→┤                                       
│3 1 │3 2 │3 3 │3 4 │                                       
├~──→┼~──→┼~──→┼~──→┤                                       
·····················                                       
├~──→┼~──→┼~──→┼~──→┤                                       
│10 1│10 2│10 3│10 4│                                       
└~──→┴~──→┴~──→┴~──→┘                                       


</span></div></div>
</div>
<p>Take your time to try to understand what the modifiers do, both by reading the help description above and by playing around with the modifiers in your session.</p>
<p>After you explore things on your own for a bit, indulge me in a brief overview of the several modifiers that <code class="docutils literal notranslate"><span class="pre">]rows</span></code> accepts.</p>
<p>We start by exploring the <code class="docutils literal notranslate"><span class="pre">-style=</span></code> modifier.
The default is to have <code class="docutils literal notranslate"><span class="pre">-style=long</span></code>, which makes the session output go beyond the screen width.
Again, when <code class="docutils literal notranslate"><span class="pre">]rows</span></code> is on, this screen width is computed dynamically and does not depend on the <em>print width</em> <code class="docutils literal notranslate"><span class="pre">⎕PW</span></code> variable.
If, instead, we use the <code class="docutils literal notranslate"><span class="pre">-style=cut</span></code> option, then the output is cut when it reaches the screen width, and it isn’t displayed at all, making it so that we never need to scroll horizontally.
Long output that is truncated in this way is marked (by default) with three dots “∙”.</p>
<p><a class="reference internal" href="#fig-session-rows-style-long-cut"><span class="std std-numref">Fig. 7.3</span></a> shows what the session looks like after running an expression that produces a line of output that is wider than the screen width.</p>
<div class="figure align-default" id="session-rows-style-long-cut">
<span id="fig-session-rows-style-long-cut"></span><img alt="_images/Session_Rows_Style_Long_Cut.png" src="_images/Session_Rows_Style_Long_Cut.png" />
<p class="caption"><span class="caption-number">Fig. 7.3 </span><span class="caption-text">“A long line of session output with two different <code class="docutils literal notranslate"><span class="pre">-style</span></code> configurations.”</span><a class="headerlink" href="#session-rows-style-long-cut" title="Permalink to this image">¶</a></p>
</div>
<p>We can see that after setting <code class="docutils literal notranslate"><span class="pre">-style=cut</span></code>, the output was replaced with “∙∙∙” near the right edge of the screen.
If we scroll horizontally to the right, we can see that <code class="docutils literal notranslate"><span class="pre">-style=long</span></code> does allow the output to run beyond the screen and <code class="docutils literal notranslate"><span class="pre">-style=cut</span></code> effectively truncates it.
This is shown in <a class="reference internal" href="#fig-session-rows-style-long-cut-right"><span class="std std-numref">Fig. 7.4</span></a>, which is a screenshot from the exact same session output as above, except we have scrolled slightly to the right.</p>
<div class="figure align-default" id="session-rows-style-long-cut-right">
<span id="fig-session-rows-style-long-cut-right"></span><img alt="_images/Session_Rows_Style_Long_Cut_Right.png" src="_images/Session_Rows_Style_Long_Cut_Right.png" />
<p class="caption"><span class="caption-number">Fig. 7.4 </span><span class="caption-text">“A long line of output and the corresponding truncated version.”</span><a class="headerlink" href="#session-rows-style-long-cut-right" title="Permalink to this image">¶</a></p>
</div>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">-style=</span></code> modifier accepts one other option, which is <code class="docutils literal notranslate"><span class="pre">-style=wrap</span></code>.
This sets the behaviour of long lines to wrap to new lines, but this isn’t exactly the same as having <code class="docutils literal notranslate"><span class="pre">]rows</span> <span class="pre">off</span></code>, because <code class="docutils literal notranslate"><span class="pre">]rows</span></code> doesn’t rely on <code class="docutils literal notranslate"><span class="pre">⎕PW</span></code> to figure out the screen width.
Notice how in the example below we have <code class="docutils literal notranslate"><span class="pre">⎕PW</span></code> set to a small value that is disregarded by <code class="docutils literal notranslate"><span class="pre">]rows</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="nv">on</span> <span class="o">-</span><span class="nv">style</span><span class="o">=</span><span class="nv">wrap</span>
<span class="nf">⎕PW</span> <span class="kd">←</span> <span class="m">50</span>
<span class="nv">ruler</span> <span class="m">60</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON -style=cut

</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">----'----|----'----|----'----|----'----|----'----|----'----|

</span></div></div>
</div>
<p>Another difference between having <code class="docutils literal notranslate"><span class="pre">]rows</span> <span class="pre">off</span></code> and <code class="docutils literal notranslate"><span class="pre">]rows</span> <span class="pre">on</span> <span class="pre">-style=wrap</span></code> is that <code class="docutils literal notranslate"><span class="pre">]rows</span> <span class="pre">off</span></code> will wrap the lines of output as a block, whereas <code class="docutils literal notranslate"><span class="pre">-style=wrap</span></code> will wrap each line individually, like <a class="reference internal" href="#fig-session-rows-off-vs-wrapping"><span class="std std-numref">Fig. 7.5</span></a> shows.</p>
<div class="figure align-default" id="session-rows-off-vs-wrapping">
<span id="fig-session-rows-off-vs-wrapping"></span><img alt="_images/Session_Rows_Off_VS_Wrapping.png" src="_images/Session_Rows_Off_VS_Wrapping.png" />
<p class="caption"><span class="caption-number">Fig. 7.5 </span><span class="caption-text">“Block wrapping versus individual line wrapping.”</span><a class="headerlink" href="#session-rows-off-vs-wrapping" title="Permalink to this image">¶</a></p>
</div>
<p>Having looked at the different options for <code class="docutils literal notranslate"><span class="pre">-style=</span></code>, we are now left with three modifiers.</p>
<p>Just like the user command <code class="docutils literal notranslate"><span class="pre">]box</span></code>, the user command <code class="docutils literal notranslate"><span class="pre">]rows</span></code> only affects direct session output by default, and doesn’t affect function output.
This can be changed by setting the <code class="docutils literal notranslate"><span class="pre">-fns=</span></code> modifier:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="nv">on</span> <span class="o">-</span><span class="nv">style</span><span class="o">=</span><span class="nv">cut</span> <span class="o">-</span><span class="nv">fns</span><span class="o">=</span><span class="nv">off</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON -style=wrap -fns=off

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">v</span> <span class="kd">←</span> <span class="m">500</span><span class="na">/</span><span class="s1">&#39;#&#39;</span> <span class="p">⋄</span> <span class="vg">⎕</span><span class="kd">←</span> <span class="nv">v</span> <span class="p">⋄</span> <span class="vg">⎕</span><span class="kd">←</span> <span class="s1">&#39;---&#39;</span> <span class="p">⋄</span> <span class="nv">v</span><span class="kt">}</span><span class="no">⍬</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">##########################################################################################################################################################################################################################################

      ####################################################################################################################################################################################################################################

      ######################################

---

#######################################################################################################################################################################################################################################···

</span></div></div>
</div>
<p>As you can see above, the first output – that was produced by the <code class="docutils literal notranslate"><span class="pre">⎕←</span> <span class="pre">v</span></code> statement inside the dfn – wrapped around because it was too long, effectively disregarding the modifier <code class="docutils literal notranslate"><span class="pre">-style=cut</span></code> from the user command <code class="docutils literal notranslate"><span class="pre">]rows</span></code>.
However, the second run of # was truncated because it was the result of the expression that was typed in the session and it was too long.</p>
<p>We have been worrying about the horizontal space that output takes up, but some output can take up too much vertical space.
The user command <code class="docutils literal notranslate"><span class="pre">]rows</span></code> can also be used to deal with that, and that is what the modifier <code class="docutils literal notranslate"><span class="pre">-fold=</span></code> is for.
If you set the modifier <code class="docutils literal notranslate"><span class="pre">-fold=n</span></code> (to an integer between 0 and 9, inclusive), then vertically long output gets its middle rows truncated, leaving only the beginning and the final <code class="docutils literal notranslate"><span class="pre">n</span></code> rows.</p>
<p>The examples that follow show the differences in output when <code class="docutils literal notranslate"><span class="pre">-fold=</span></code> is set to different values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="nv">on</span> <span class="o">-</span><span class="nv">fold</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON -fold=off

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="m">100</span> <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┐                                                                                                                                                                                                                                   
│1 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│2 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│3 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│4 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│5 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│6 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│7 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│8 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│9 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│10 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│11 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│12 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│13 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│14 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│15 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│16 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│17 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│18 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│19 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│20 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│21 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│22 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│23 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│24 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│25 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
··········································································································································································································································

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="o">-</span><span class="nv">fold</span><span class="o">=</span><span class="m">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">was -fold=0

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="m">100</span> <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┐                                                                                                                                                                                                                                   
│1 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│2 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│3 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│4 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│5 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│6 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│7 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│8 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│9 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│10 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│11 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│12 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│13 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│14 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│15 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│16 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│17 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│18 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│19 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│20 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│21 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│22 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│23 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│24 1 │                                                                                                                                                                                                                                   
··········································································································································································································································
├─────┤                                                                                                                                                                                                                                   
│100 1│                                                                                                                                                                                                                                   
└─────┘                                                                                                                                                                                                                                   

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="o">-</span><span class="nv">fold</span><span class="o">=</span><span class="m">9</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">was -fold=3

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="m">100</span> <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┐                                                                                                                                                                                                                                   
│1 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│2 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│3 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│4 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│5 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│6 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│7 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│8 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│9 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│10 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│11 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│12 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│13 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│14 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│15 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│16 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│17 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│18 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│19 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│20 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│21 1 │                                                                                                                                                                                                                                   
··········································································································································································································································
├─────┤                                                                                                                                                                                                                                   
│97 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│98 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│99 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│100 1│                                                                                                                                                                                                                                   
└─────┘                                                                                                                                                                                                                                   

</span></div></div>
</div>
<p>The final modifier that we have to discuss is <code class="docutils literal notranslate"><span class="pre">-dots=</span></code>, that allows to customise the character that is used to represent that output is truncated.
By default, the character used is “∙”, like we can see above.
Changing the value is simple:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">rows</span> <span class="o">-</span><span class="nv">dots</span><span class="o">=</span><span class="c1">#</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">was -dots=·

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="m">100</span> <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┐                                                                                                                                                                                                                                   
│1 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│2 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│3 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│4 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│5 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│6 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│7 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│8 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│9 1  │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│10 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│11 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│12 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│13 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│14 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│15 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│16 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│17 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│18 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│19 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│20 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│21 1 │                                                                                                                                                                                                                                   
##########################################################################################################################################################################################################################################
├─────┤                                                                                                                                                                                                                                   
│97 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│98 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│99 1 │                                                                                                                                                                                                                                   
├─────┤                                                                                                                                                                                                                                   
│100 1│                                                                                                                                                                                                                                   
└─────┘                                                                                                                                                                                                                                   

</span></div></div>
</div>
<p>It is advisable that you leave the modifier <code class="docutils literal notranslate"><span class="pre">-dots=</span></code> unchanged, or set it to a character that has the same properties that “∙” has: it is a character that doesn’t add much visual noise and it isn’t an ASCII character, meaning it is unlikely that the truncation marks from <code class="docutils literal notranslate"><span class="pre">]rows</span></code> will be mistaken by actual output or vice-versa.
That is why we reset <code class="docutils literal notranslate"><span class="pre">-dots=</span></code> to its original value here:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span>]rows -dots=∙
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">was -dots=#

</span></div></div>
</div>
<div class="figure align-default" id="programming-art">
<span id="fig-programming-art"></span><img alt="_images/Programming_Art.png" src="_images/Programming_Art.png" />
<p class="caption"><span class="caption-number">Fig. 7.6 </span><span class="caption-text">Dyalog APL programming is pure Art.</span><a class="headerlink" href="#programming-art" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="the-specialist-s-section">
<span id="execute-and-format-control-the-specialists-section"></span><h2><span class="section-number">7.5. </span>The Specialist’s Section<a class="headerlink" href="#the-specialist-s-section" title="Permalink to this headline">¶</a></h2>
<br />
<center><i>Each chapter is followed by a "Specialist's Section" like this one. This section is dedicated to skilled APLers, who wish to improve their knowledge.</i>
<p>You will find here rare or complex usages of the concepts presented in this chapter, or discover extended explanations which need the knowledge of some symbols that will be seen much further in the book.</p>
<p><b>If you are exploring APL for the first time, skip this section and go to the next chapter.</b></center></p>
<div class="section" id="advanced-usages-of-execute">
<span id="execute-and-format-control-advanced-usages-of-execute"></span><h3><span class="section-number">7.5.1. </span>Advanced Usages of Execute<a class="headerlink" href="#advanced-usages-of-execute" title="Permalink to this headline">¶</a></h3>
<div class="section" id="name-conflict">
<span id="execute-and-format-control-name-conflict"></span><h4><span class="section-number">7.5.1.1. </span>Name Conflict<a class="headerlink" href="#name-conflict" title="Permalink to this headline">¶</a></h4>
<p>Suppose that we would like to switch two letters inside a word.
Let us write a function which accepts the index of the letters to switch as its left argument, and the <strong>name</strong> of an existing variable as its right argument.</p>
<p>It is important to note that the function works on the <strong>name</strong> of the variable, not on its <strong>value</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="nv">Exchange</span> <span class="kd">←</span> <span class="kt">{</span>
    <span class="nv">v</span> <span class="kd">←</span> <span class="o">⌽</span><span class="bp">⍺</span>
    <span class="nv">text</span> <span class="kd">←</span> <span class="bp">⍵</span><span class="o">,</span><span class="s1">&#39;[⍺]←&#39;</span><span class="o">,</span><span class="bp">⍵</span><span class="o">,</span><span class="s1">&#39;[v]&#39;</span>
    <span class="o">⍎</span><span class="nv">text</span>
<span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<p>Now we create a character vector containing a word, call our function to exchange two characters, and then check the value of the variable again:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">word</span> <span class="kd">←</span> <span class="s1">&#39;moral&#39;</span>
<span class="m">3</span> <span class="m">5</span> <span class="nv">Exchange</span> <span class="s1">&#39;word&#39;</span>
<span class="nv">word</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">molar

</span></div></div>
</div>
<p>In our example, <code class="docutils literal notranslate"><span class="pre">⍵</span></code> was equal to <code class="docutils literal notranslate"><span class="pre">'word'</span></code>, so the statement that assigns to <code class="docutils literal notranslate"><span class="pre">text</span></code> was equivalent to <code class="docutils literal notranslate"><span class="pre">text</span> <span class="pre">←</span> <span class="pre">'word[⍺]←word[v]'</span></code>.</p>
<p>All is well up to now.
But now, let us try again on another variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span> <span class="kd">←</span> <span class="s1">&#39;rats&#39;</span>
<span class="m">1</span> <span class="m">2</span> <span class="nv">Exchange</span> <span class="s1">&#39;v&#39;</span>
<span class="nv">v</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">rats

</span></div></div>
</div>
<p>The result now is <strong>wrong</strong>, it should have been <code class="docutils literal notranslate"><span class="pre">'arts'</span></code>.
The reason is that the assignment to <code class="docutils literal notranslate"><span class="pre">text</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">text</span> <span class="pre">←</span> <span class="pre">'v[⍺]←v[v]'</span></code>, but <code class="docutils literal notranslate"><span class="pre">v</span></code> is the name of a local variable in the function.
When the last statement is executed, it exchanges items inside the <strong>local</strong> variable, not in the global one, which remains unchanged!</p>
<p>In fact, if we call <code class="docutils literal notranslate"><span class="pre">Exchange</span></code> with larger indices, we get an <code class="docutils literal notranslate"><span class="pre">INDEX</span> <span class="pre">ERROR</span></code> because the local variable <code class="docutils literal notranslate"><span class="pre">v</span></code> only has two elements:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="m">4</span> <span class="nv">Exchange</span> <span class="s1">&#39;v&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>⍎INDEX ERROR
Exchange[3] v[⍺]←v[v]
                  ∧
</pre></div>
</div>
</div>
</div>
<p>In other words, be careful when <em>execute</em> is expected to work on global names, as there may be a risk of conflict with local names.
In order to reduce this risk, programmers sometimes use complex and weird names for the local names in such functions.
Another alternative is to try and write your functions to not rely on <code class="docutils literal notranslate"><span class="pre">⍎</span></code> for this kind of things, as that creates code that is much harder to debug; instead, write functions that take arguments and return their results explicitly.
See, for example, <a class="reference internal" href="User-Defined-Functions.html#user-defined-functions-why-should-a-function-return-a-result"><span class="std std-numref">Section 5.10.2</span></a>.</p>
</div>
<div class="section" id="conditional-execution">
<span id="execute-and-format-control-conditional-execution"></span><h4><span class="section-number">7.5.1.2. </span>Conditional Execution<a class="headerlink" href="#conditional-execution" title="Permalink to this headline">¶</a></h4>
<p>For many years, <em>execute</em> has been used to conditionally execute certain expressions in a function, through the pattern <code class="docutils literal notranslate"><span class="pre">⍎(condition)/'statement'</span></code>.</p>
<p>If the condition is satisfied, <em>compress</em> returns the character string unchanged, and the statement is then executed.
On the other hand, if the condition is not satisfied, <em>compress</em> returns an empty character vector and <em>execute</em> does nothing.</p>
<p>Here is an example that gives a higher discount to customers that buy in bulk:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">discount</span> <span class="kd">←</span> <span class="m">0</span>                     <span class="c1">⍝ default discount is 0</span>
<span class="nv">quantity</span> <span class="kd">←</span> <span class="m">120</span>
<span class="o">⍎</span><span class="p">(</span><span class="nv">quantity</span><span class="o">&gt;</span><span class="m">80</span><span class="p">)</span><span class="na">/</span><span class="s1">&#39;discount ← 7&#39;</span>
<span class="vg">⎕</span><span class="kd">←</span> <span class="s1">&#39;Final discount is &#39;</span><span class="o">,⍕</span><span class="nv">discount</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Final discount is 7

</span></div></div>
</div>
<p>This form is now considered obsolete and should be replaced by an <code class="docutils literal notranslate"><span class="pre">:If</span> <span class="pre">...</span> <span class="pre">:EndIf</span></code> control structure.
There are also cases where it makes sense to rework the logic of the program slightly, so that the conditional and the resulting value are coupled together.
Going back to the previous example, one can use basic arithmetic operations to assign the correct discount value from the get-go:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">quantity</span> <span class="kd">←</span> <span class="m">120</span>
<span class="nv">discount</span> <span class="kd">←</span> <span class="p">(</span><span class="nv">quantity</span><span class="o">&gt;</span><span class="m">80</span><span class="p">)</span><span class="o">×</span><span class="m">7</span>
<span class="vg">⎕</span><span class="kd">←</span> <span class="s1">&#39;Final discount is &#39;</span><span class="o">,⍕</span><span class="nv">discount</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Final discount is 7

</span></div></div>
</div>
</div>
<div class="section" id="case-selection">
<span id="execute-and-format-control-case-selection"></span><h4><span class="section-number">7.5.1.3. </span>Case Selection<a class="headerlink" href="#case-selection" title="Permalink to this headline">¶</a></h4>
<p><em>Execute</em> is sometimes used to select one case from a set of cases.</p>
<p>Consider the following scenario: a program allows the user to extrapolate a series of numeric values.
He has the choice between three extrapolation methods: least squares, moving average, and a home-made method.
Each can be applied using one of three functions: <code class="docutils literal notranslate"><span class="pre">LeastSqr</span></code>, <code class="docutils literal notranslate"><span class="pre">MovAverage</span></code>, <code class="docutils literal notranslate"><span class="pre">HomeXtra</span></code>.
We want to write a function that takes the method number (1 to 3) as its left argument, and the values to extrapolate as the right argument.</p>
<p>You can compare two programming techniques:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="bp">∇</span> <span class="nv">r</span> <span class="kd">←</span> <span class="nv">method</span> <span class="nv">Calc1</span> <span class="nv">values</span>
    <span class="bp">:</span><span class="nv">Select</span> <span class="nv">method</span>
    <span class="bp">:</span><span class="nv">Case</span> <span class="m">1</span>
        <span class="nv">r</span> <span class="kd">←</span> <span class="nv">LeastSqr</span> <span class="nv">values</span>
    <span class="bp">:</span><span class="nv">Case</span> <span class="m">2</span>
        <span class="nv">r</span> <span class="kd">←</span> <span class="nv">MovAverage</span> <span class="nv">values</span>
    <span class="bp">:</span><span class="nv">Case</span> <span class="m">3</span>
        <span class="nv">r</span> <span class="kd">←</span> <span class="nv">HomeXtra</span> <span class="nv">values</span>
    <span class="bp">:</span><span class="nv">EndSelect</span>
<span class="bp">∇</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="bp">∇</span> <span class="nv">r</span> <span class="kd">←</span> <span class="nv">method</span> <span class="nv">Calc2</span> <span class="nv">values</span><span class="sr">;</span> <span class="nv">fun</span>
    <span class="nv">fun</span> <span class="kd">←</span> <span class="p">(</span><span class="m">3</span> <span class="m">11</span><span class="o">⍴</span><span class="s1">&#39;LeastSqr   MovAverage HomeXtra   &#39;</span><span class="p">)</span><span class="sr">[</span><span class="nv">method</span><span class="sr">;]</span>
    <span class="nv">r</span> <span class="kd">←</span> <span class="o">⍕</span><span class="nv">fun</span><span class="o">,</span><span class="s1">&#39; values&#39;</span>
<span class="bp">∇</span>
</pre></div>
</div>
</div>
</div>
<p>Let us analyse how <code class="docutils literal notranslate"><span class="pre">Calc2</span></code> works: suppose that the user has chosen the third method.
The assignment to <code class="docutils literal notranslate"><span class="pre">fun</span></code> evaluates to the character vector <code class="docutils literal notranslate"><span class="pre">'HomeXtra</span>&#160;&#160; <span class="pre">'</span></code>.</p>
<p>Once this character vector is catenated to <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">values'</span></code> we obtain <code class="docutils literal notranslate"><span class="pre">'HomeXtra</span>&#160;&#160;&#160; <span class="pre">values'</span></code>.</p>
<p>Then, <em>execute</em> calls the appropriate function and returns the desired result.</p>
<p>This form too is considered obsolete and should be avoided, if only for clarity.</p>
</div>
<div class="section" id="dynamic-variable-creation">
<span id="execute-and-format-control-dynamic-variable-creation"></span><h4><span class="section-number">7.5.1.4. </span>Dynamic Variable Creation<a class="headerlink" href="#dynamic-variable-creation" title="Permalink to this headline">¶</a></h4>
<p>Some very specific applications may require that a program creates variables whose names depend on the context.
This may seem a bit artificial, but imagine that we have three variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">prefix</span></code> is the following text matrix:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">prefix</span> <span class="kd">←</span> <span class="m">4</span> <span class="m">8</span><span class="o">⍴</span><span class="s1">&#39;prod    price   discountorders  &#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">prod    
price   
discount
orders  

</span></div></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">suffix</span></code> is a text vector:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">suffix</span> <span class="kd">←</span> <span class="s1">&#39;USA&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">USA

</span></div></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numbers</span></code> is a numeric matrix:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">numbers</span> <span class="kd">←</span> <span class="m">4</span> <span class="m">4</span><span class="o">⍴</span><span class="m">623</span> <span class="m">486</span> <span class="m">739</span> <span class="m">648</span> <span class="m">108</span> <span class="m">103</span> <span class="m">112</span> <span class="m">98</span> <span class="m">7</span> <span class="m">6</span> <span class="m">7</span> <span class="m">5</span> <span class="m">890</span> <span class="m">942</span> <span class="m">637</span> <span class="m">806</span>
</pre></div>
</div>
</div>
</div>
<p>Now we want to create variables named <code class="docutils literal notranslate"><span class="pre">prodUSA</span></code>, <code class="docutils literal notranslate"><span class="pre">priceUSA</span></code>, and so on, and fill them with the corresponding values.
A simple loop should do that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="bp">∇</span> <span class="nv">BuildVars</span> <span class="p">(</span><span class="nv">mat</span> <span class="nv">vec</span> <span class="nv">val</span><span class="p">)</span><span class="sr">;</span> <span class="nv">row</span><span class="sr">;</span> <span class="nv">name</span>
    <span class="bp">:</span><span class="nv">For</span> <span class="nv">row</span> <span class="bp">:</span><span class="nv">In</span> <span class="o">⍳</span><span class="m">1</span><span class="o">↑⍴</span><span class="nv">mat</span>
        <span class="nv">name</span> <span class="kd">←</span> <span class="nv">mat</span><span class="sr">[</span><span class="nv">row</span><span class="sr">;]</span><span class="o">,</span><span class="nv">vec</span>
        <span class="nv">name</span> <span class="kd">←</span> <span class="p">(</span><span class="nv">name</span><span class="o">≠</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="na">/</span><span class="nv">name</span>
        <span class="o">⍎</span> <span class="vg">⎕</span><span class="kd">←</span> <span class="nv">name</span><span class="o">,</span><span class="s1">&#39;←val[row;]&#39;</span>
    <span class="bp">:</span><span class="nv">End</span>
<span class="bp">∇</span>
</pre></div>
</div>
</div>
</div>
<p>Let us use the debugging output that we have added to the final line of the <code class="docutils literal notranslate"><span class="pre">:For</span></code> loop to see the code that is being executed by <code class="docutils literal notranslate"><span class="pre">⍎</span></code> on each iteration:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">BuildVars</span> <span class="p">(</span><span class="nv">prefix</span> <span class="nv">suffix</span> <span class="nv">numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">prodUSA←val[row;]

priceUSA←val[row;]

discountUSA←val[row;]

ordersUSA←val[row;]

</span></div></div>
</div>
<p>This technique is prone to introduce errors that are hard to debug due to the dynamic nature of the variables being created.
Instead, one might consider leaving the values as-is, and using something like <em>index of</em> to determine dynamically the row of <code class="docutils literal notranslate"><span class="pre">numbers</span></code> that needs to be accessed.
For example, we could store the names of the rows as a nested character vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">rowNames</span> <span class="kd">←</span> <span class="s1">&#39;prod&#39;</span> <span class="s1">&#39;price&#39;</span> <span class="s1">&#39;discount&#39;</span> <span class="s1">&#39;orders&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┬─────┬────────┬──────┐
│prod│price│discount│orders│
└────┴─────┴────────┴──────┘

</span></div></div>
</div>
<p>And then use that variable to determine what is the row of numbers we need to access:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">numbers</span><span class="sr">[</span><span class="nv">rowNames</span><span class="o">⍳⊂</span><span class="s1">&#39;prod&#39;</span><span class="sr">;]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">623 486 739 648

</span></div></div>
</div>
<p>This approach is also easy to extend if, instead of a single country in the variable <code class="docutils literal notranslate"><span class="pre">suffix</span></code>, we had a series of countries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">countries</span> <span class="kd">←</span> <span class="s1">&#39;USA&#39;</span> <span class="s1">&#39;Canada&#39;</span> <span class="s1">&#39;Portugal&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Which could be accompanied by a larger <code class="docutils literal notranslate"><span class="pre">numbers</span></code> matrix; in fact, we could even have a 3D array where each major cell corresponds to one country:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">numbers</span> <span class="kd">←</span> <span class="m">3</span> <span class="m">4</span> <span class="m">4</span><span class="o">⍴</span><span class="m">623</span> <span class="m">486</span> <span class="m">739</span> <span class="m">648</span> <span class="m">108</span> <span class="m">103</span> <span class="m">112</span> <span class="m">98</span> <span class="m">7</span> <span class="m">6</span> <span class="m">7</span> <span class="m">5</span> <span class="m">890</span> <span class="m">942</span> <span class="m">637</span> <span class="m">806</span> <span class="m">646</span> <span class="m">502</span> <span class="m">778</span> <span class="m">670</span> <span class="m">114</span> <span class="m">105</span> <span class="m">122</span> <span class="m">102</span> <span class="m">8</span> <span class="m">7</span> <span class="m">8</span> <span class="m">6</span> <span class="m">903</span> <span class="m">980</span> <span class="m">688</span> <span class="m">844</span> <span class="m">675</span> <span class="m">531</span> <span class="m">767</span> <span class="m">667</span> <span class="m">114</span> <span class="m">110</span> <span class="m">117</span> <span class="m">108</span> <span class="m">8</span> <span class="m">7</span> <span class="m">8</span> <span class="m">6</span> <span class="m">906</span> <span class="m">993</span> <span class="m">689</span> <span class="m">824</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">623 486 739 648
108 103 112  98
  7   6   7   5
890 942 637 806

646 502 778 670
114 105 122 102
  8   7   8   6
903 980 688 844

675 531 767 667
114 110 117 108
  8   7   8   6
906 993 689 824

</span></div></div>
</div>
<p>Then, we could use a similar technique to access the production of a single country, instead of dynamically creating 12 different variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">numbers</span><span class="sr">[</span><span class="nv">countries</span><span class="o">⍳⊂</span><span class="s1">&#39;Portugal&#39;</span><span class="sr">;</span><span class="nv">rowNames</span><span class="o">⍳⊂</span><span class="s1">&#39;prod&#39;</span><span class="sr">;]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">675 531 767 667

</span></div></div>
</div>
</div>
<div class="section" id="dyadic-execute">
<span id="execute-and-format-control-dyadic-execute"></span><h4><span class="section-number">7.5.1.5. </span>Dyadic Execute<a class="headerlink" href="#dyadic-execute" title="Permalink to this headline">¶</a></h4>
<p>In the dyadic use of <em>execute</em>, the left argument can be the name of a <em>namespace</em> or a <em>namespace reference</em>.
The statement provided as the right argument will then be executed in the <em>namespace</em> specified as the left argument.</p>
<p>For example, we can do a dynamic assignment to the global scope from within a dfn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;var&#39;</span> <span class="kt">{</span><span class="s1">&#39;#&#39;</span><span class="o">⍎</span><span class="bp">⍺</span><span class="o">,</span><span class="s1">&#39; ← &#39;</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span> <span class="m">42</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">42

</span></div></div>
</div>
<p>Instead of <code class="docutils literal notranslate"><span class="pre">'#'</span></code> we can use the actual namespace reference:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;var&#39;</span> <span class="kt">{</span><span class="c1">#⍎⍺,&#39; ← &#39;,⍕⍵} 73</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">73

</span></div></div>
</div>
<p>With the left argument being a namespace reference, you can also do “zero footprint” execution with <code class="docutils literal notranslate"><span class="pre">(⎕NS⍬)⍎expr</span></code>, where <code class="docutils literal notranslate"><span class="pre">expr</span></code> is what you want to execute.
Here, “zero footprint” means that after the expression is executed, nothing remains, other than the things that the expression explicitly did/built outside of its namespace.</p>
</div>
</div>
<div class="section" id="formatting-data">
<span id="execute-and-format-control-formatting-data"></span><h3><span class="section-number">7.5.2. </span>Formatting Data<a class="headerlink" href="#formatting-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="lack-of-precision">
<span id="execute-and-format-control-lack-of-precision"></span><h4><span class="section-number">7.5.2.1. </span>Lack of Precision<a class="headerlink" href="#lack-of-precision" title="Permalink to this headline">¶</a></h4>
<p>If the number of specified significant digits exceeds the computer’s internal precision, low order digits are replaced with an underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>).
This character can be replaced by another one using specification <code class="docutils literal notranslate"><span class="pre">'S'</span></code>.
For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;F20.1&#39;</span> <span class="nf">⎕FMT</span> <span class="m">1e18</span><span class="o">÷</span><span class="m">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3333333333333333__._

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;S⊂_?⊃F20.1&#39;</span> <span class="nf">⎕FMT</span> <span class="m">1e18</span><span class="o">÷</span><span class="m">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3333333333333333??.?

</span></div></div>
</div>
</div>
<div class="section" id="formatting-using-the-microsoft-net-framework">
<span id="execute-and-format-control-formatting-using-the-microsoft-net-framework"></span><h4><span class="section-number">7.5.2.2. </span>Formatting Using the Microsoft .NET Framework<a class="headerlink" href="#formatting-using-the-microsoft-net-framework" title="Permalink to this headline">¶</a></h4>
<p>Dyalog APL has an interface to Microsoft’s .NET framework, which is introduced in <span class="xref myst">a later chapter</span>.
The .NET framework includes a vast collection of utility programs, including functions to interpret and format data according to rules defined for a given <em>locale</em>, or <em>culture</em>, or <em>language</em> (which you can customise on your operating system).</p>
<p>Let us start by declaring our intent to use the .NET framework:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕USING</span> <span class="kd">←</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Then let us do a quick check to see if it loaded:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">System</span><span class="na">.</span><span class="nv">Math</span><span class="na">.</span><span class="nv">BigMul</span> <span class="m">1e9</span> <span class="m">1e9</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1000000000000000000

</span></div></div>
</div>
<p>Now we illustrate some of the capabilities of the <code class="docutils literal notranslate"><span class="pre">String.Format</span></code> method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">String.Format</span></code> function takes three arguments: an instance of the <code class="docutils literal notranslate"><span class="pre">NumberFormatInfo</span></code> class, a format string, and a vector of data.
An appropriate <code class="docutils literal notranslate"><span class="pre">NumberFormatInfo</span></code> instance can be retrieved from an object that contains information about the current culture of the system.</p>
<p>We start by querying for the current culture:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">cc</span> <span class="kd">←</span> <span class="nv">System</span><span class="na">.</span><span class="nv">Globalization</span><span class="na">.</span><span class="nv">CultureInfo</span><span class="na">.</span><span class="nv">CurrentCulture</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">en-US

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">cc</span><span class="na">.</span><span class="nv">EnglishName</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">English (United States)

</span></div></div>
</div>
<p>Now we can call the <code class="docutils literal notranslate"><span class="pre">String.Format</span></code> method, that returns a string, which appears in APL as a character vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">pi</span> <span class="kd">←</span> <span class="o">○</span><span class="m">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">System</span><span class="na">.</span><span class="nv">String</span><span class="na">.</span><span class="nv">Format</span> <span class="nv">cc</span><span class="na">.</span><span class="nv">NumberFormat</span> <span class="s1">&#39;{0:F}&#39;</span> <span class="p">(</span><span class="o">,</span><span class="nv">pi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.14

</span></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">0</span></code> in <code class="docutils literal notranslate"><span class="pre">{0:F}</span></code> is an index (selecting the first item in the data array), and <code class="docutils literal notranslate"><span class="pre">F</span></code> specifies fixed-point formatting.
The default number of digits and the decimal separator to use are specified in the <code class="docutils literal notranslate"><span class="pre">NumberFormatInfo</span></code> object, which has a number of properties that we can inspect, if we need to know more about how numbers are formatted in the selected culture:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">cc</span><span class="na">.</span><span class="nv">NumberFormat</span><span class="na">.</span><span class="p">(</span><span class="nv">NumberDecimalSeparator</span> <span class="nv">NumberDecimalDigits</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬─┐
│.│2│
└─┴─┘

</span></div></div>
</div>
<p>Of course, we don’t have to use the default format; we can also specify the number of decimal digits that we want.
In the following string we format the first number as a fixed-point number with 5 decimal digits and the second as a currency amount with 2 digits (<code class="docutils literal notranslate"><span class="pre">C2</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">format</span> <span class="kd">←</span> <span class="s1">&#39;Pi is {0:F5} and I have {1:C2}&#39;</span>
<span class="nv">System</span><span class="na">.</span><span class="nv">String</span><span class="na">.</span><span class="nv">Format</span> <span class="nv">cc</span><span class="na">.</span><span class="nv">NumberFormat</span> <span class="nv">format</span> <span class="p">(</span><span class="nv">pi</span><span class="o">×</span><span class="m">1</span> <span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Pi is 3.14159 and I have $6.28

</span></div></div>
</div>
<p>We also don’t have to use the current culture, we can select any of the cultures known to the .NET framework:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">fr</span> <span class="kd">←</span> <span class="nf">⎕NEW</span> <span class="nv">System</span><span class="na">.</span><span class="nv">Globalization</span><span class="na">.</span><span class="nv">CultureInfo</span> <span class="p">(</span><span class="o">⊂</span><span class="s1">&#39;fr-FR&#39;</span><span class="p">)</span>
<span class="nv">System</span><span class="na">.</span><span class="nv">String</span><span class="na">.</span><span class="nv">Format</span> <span class="nv">fr</span><span class="na">.</span><span class="nv">NumberFormat</span> <span class="nv">format</span> <span class="p">(</span><span class="nv">pi</span><span class="o">×</span><span class="m">1</span> <span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Pi is 3,14159 and I have 6,28 €

</span></div></div>
</div>
<p>We can format dates:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span> <span class="nv">jun29</span> <span class="kd">←</span> <span class="nf">⎕NEW</span> <span class="nv">System</span><span class="na">.</span><span class="nv">DateTime</span> <span class="p">(</span><span class="m">2021</span> <span class="m">6</span> <span class="m">29</span> <span class="m">17</span> <span class="m">40</span> <span class="m">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">29-Jun-21 5:40:00 PM

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">System</span><span class="na">.</span><span class="nv">String</span><span class="na">.</span><span class="nv">Format</span> <span class="nv">cc</span><span class="na">.</span><span class="nv">NumberFormat</span> <span class="s1">&#39;{0:D}&#39;</span> <span class="p">(</span><span class="o">,</span><span class="nv">jun29</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Tuesday, 29 June, 2021

</span></div></div>
</div>
<p>There is also a wide variety of options and parameters for formatting dates, for example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">format</span> <span class="kd">←</span> <span class="s1">&#39;Short date: {0:d}, custom date: {0:dd MMMM yy hh:mm}&#39;</span>
<span class="nv">System</span><span class="na">.</span><span class="nv">String</span><span class="na">.</span><span class="nv">Format</span> <span class="nv">cc</span><span class="na">.</span><span class="nv">NumberFormat</span> <span class="nv">format</span> <span class="p">(</span><span class="o">,</span><span class="nv">jun29</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Short date: 29-Jun-21, custom date: 29 June 21 05:40

</span></div></div>
</div>
<p>In the case of dates (and many other classes), the <code class="docutils literal notranslate"><span class="pre">System.DateTime</span></code> class itself has a <code class="docutils literal notranslate"><span class="pre">toString</span></code> method which hooks up to the same underlying functionality:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">jun29</span><span class="na">.</span><span class="nv">ToString</span> <span class="s1">&#39;{yyyy, dd MMMM}&#39;</span> <span class="nv">fr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">{2021, 29 juin}

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">jun29</span><span class="na">.</span><span class="nv">ToString</span> <span class="o">⊂</span><span class="s1">&#39;{dd MMMM yy}&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">{29 June 21}

</span></div></div>
</div>
<p>The .NET base classes generally also contain a function called <code class="docutils literal notranslate"><span class="pre">Parse</span></code>, which performs the inverse operation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">System</span><span class="na">.</span><span class="nv">Double</span><span class="na">.</span><span class="nv">Parse</span> <span class="o">⊂</span><span class="s1">&#39;3.14&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.14

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">System</span><span class="na">.</span><span class="nv">Double</span><span class="na">.</span><span class="nv">Parse</span> <span class="s1">&#39;3,14&#39;</span> <span class="nv">fr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.14

</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">System</span><span class="na">.</span><span class="nv">DateTime</span><span class="na">.</span><span class="nv">Parse</span> <span class="o">⊂</span><span class="s1">&#39;29 june 2021 17:40&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">29-Jun-21 5:40:00 PM

</span></div></div>
</div>
<p>The examples above have only scratched the surface of the wide variety of formatting options which are available.
More documentation of the available formatting options is available online at <a class="reference external" href="https://docs.microsoft.com">https://docs.microsoft.com</a> (search for “formatting types”).</p>
<p>The related system function <code class="docutils literal notranslate"><span class="pre">⎕DT</span></code> might also be relevant if you are particularly interested in working with dates/times.</p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog-kernel"
        },
        kernelOptions: {
            kernelName: "dyalog-kernel",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog-kernel'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="First-Aid-Kit.html" title="previous page"><span class="section-number">6. </span>First-Aid Kit</a>
    <a class='right-next' id="next-link" href="Appendices.html" title="next page"><span class="section-number">8. </span>Appendices</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Bernard Legrand, contributions by Kim S. Andreasen, Daniel Baronet, Gitte Christensen, Peter Donnelly, Morten Kromberg, John Scholes, Adrian Smith and Tim JA. Smith. Reworked by Rodrigo Girão Serrão.<br/>
        
          <div class="extra_footer">
            <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
</a></p>
<p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>