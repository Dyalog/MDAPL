
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>12. Tacit Programming &#8212; Mastering Dyalog APL</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="13. Appendices" href="Appendices.html" />
    <link rel="prev" title="11. Operators" href="Operators.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Mastering Dyalog APL</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Introduction.html">
   1. Introduction - Will You Play APL With Me?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Getting-Started.html">
   2. Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Data-and-Variables.html">
   3. Data and Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Some-Primitive-Functions.html">
   4. Some Primitive Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="User-Defined-Functions.html">
   5. User-Defined Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="First-Aid-Kit.html">
   6. First-Aid Kit
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Execute-and-Format-Control.html">
   7. Execute &amp; Format Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Working-on-Data-Shape.html">
   8. Working on Data Shape
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Special-Syntax.html">
   9. Special Syntax
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Nested-Arrays-Continued.html">
   10. Nested Arrays (Continued)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Operators.html">
   11. Operators
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   12. Tacit Programming
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendices.html">
   13. Appendices
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/Dyalog/MDAPL"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/Dyalog/MDAPL/edit/master/docs/Tacit-Programming.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/Tacit-Programming.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#combining-functions-with-operators">
   12.1. Combining Functions with Operators
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#derived-functions-are-tacit">
     12.1.1. Derived Functions are Tacit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operator-binding-order">
     12.1.2. Operator Binding Order
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inspecting-tacit-functions">
   12.2. Inspecting Tacit Functions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#box">
     12.2.1. Box
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tree">
     12.2.2. Tree
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parens">
     12.2.3. Parens
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#def">
     12.2.4. Def
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-composition">
   12.3. Function Composition
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#beside">
     12.3.1. Beside
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#monadic-derived-function">
       12.3.1.1. Monadic derived function
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dyadic-derived-function">
       12.3.1.2. Dyadic derived function
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atop">
     12.3.2. Atop
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-usages-of-atop">
       12.3.2.1. Example usages of atop
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#function-atop-tack">
       12.3.2.2. Function atop tack
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#over">
     12.3.3. Over
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparison-of-the-three-operators">
     12.3.4. Comparison of the Three Operators
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#to-compose-or-not-to-compose">
     12.3.5. To Compose or Not To Compose
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#binding">
   12.4. Binding
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#commute-selfie-and-constant">
   12.5. Commute, Selfie, and Constant
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#commute-and-selfie">
     12.5.1. Commute and Selfie
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#constant">
     12.5.2. Constant
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-trains">
   12.6. Function Trains
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-atop">
     12.6.1. 2-train Atop
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-fork">
     12.6.2. 3-train Fork
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#monadic-fork">
       12.6.2.1. Monadic Fork
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dyadic-fork">
       12.6.2.2. Dyadic Fork
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#arrays-in-forks">
       12.6.2.3. Arrays in Forks
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#longer-trains">
     12.6.3. Longer Trains
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-trains">
     12.6.4. Using Trains
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#carriages-in-a-train">
     12.6.5. Carriages in a Train
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hybrid-function-operators">
     12.6.6. Hybrid Function-operators
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inverting-trains">
     12.6.7. Inverting Trains
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   12.7. Exercises
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solutions">
   12.8. Solutions
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Tacit Programming</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#combining-functions-with-operators">
   12.1. Combining Functions with Operators
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#derived-functions-are-tacit">
     12.1.1. Derived Functions are Tacit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operator-binding-order">
     12.1.2. Operator Binding Order
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inspecting-tacit-functions">
   12.2. Inspecting Tacit Functions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#box">
     12.2.1. Box
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tree">
     12.2.2. Tree
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parens">
     12.2.3. Parens
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#def">
     12.2.4. Def
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-composition">
   12.3. Function Composition
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#beside">
     12.3.1. Beside
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#monadic-derived-function">
       12.3.1.1. Monadic derived function
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dyadic-derived-function">
       12.3.1.2. Dyadic derived function
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atop">
     12.3.2. Atop
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-usages-of-atop">
       12.3.2.1. Example usages of atop
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#function-atop-tack">
       12.3.2.2. Function atop tack
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#over">
     12.3.3. Over
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparison-of-the-three-operators">
     12.3.4. Comparison of the Three Operators
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#to-compose-or-not-to-compose">
     12.3.5. To Compose or Not To Compose
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#binding">
   12.4. Binding
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#commute-selfie-and-constant">
   12.5. Commute, Selfie, and Constant
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#commute-and-selfie">
     12.5.1. Commute and Selfie
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#constant">
     12.5.2. Constant
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-trains">
   12.6. Function Trains
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-atop">
     12.6.1. 2-train Atop
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-fork">
     12.6.2. 3-train Fork
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#monadic-fork">
       12.6.2.1. Monadic Fork
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dyadic-fork">
       12.6.2.2. Dyadic Fork
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#arrays-in-forks">
       12.6.2.3. Arrays in Forks
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#longer-trains">
     12.6.3. Longer Trains
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-trains">
     12.6.4. Using Trains
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#carriages-in-a-train">
     12.6.5. Carriages in a Train
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hybrid-function-operators">
     12.6.6. Hybrid Function-operators
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inverting-trains">
     12.6.7. Inverting Trains
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   12.7. Exercises
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solutions">
   12.8. Solutions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="tacit-programming">
<span id="tacit-programming-tacit-programming"></span><h1><span class="section-number">12. </span>Tacit Programming<a class="headerlink" href="#tacit-programming" title="Permalink to this headline">#</a></h1>
<p>Tacit programming is a programming paradigm that APL supports.
In order to understand what tacit programming is, we need to know what the word “tacit” means, in English:</p>
<blockquote>
<div><p>“Tacit, adjective: understood or implied without being stated.”</p>
</div></blockquote>
<p>In tacit programming, the thing that is implied without being stated is what arguments the functions receive.
In other words, in tacit programming we create functions by combining other functions <em>without</em> specifying where the arguments go.
This sounds much more confusing than what it really is, so let us study some examples.</p>
<div class="section" id="combining-functions-with-operators">
<span id="tacit-programming-combining-functions-with-operators"></span><h2><span class="section-number">12.1. </span>Combining Functions with Operators<a class="headerlink" href="#combining-functions-with-operators" title="Permalink to this headline">#</a></h2>
<div class="section" id="derived-functions-are-tacit">
<span id="tacit-programming-derived-functions-are-tacit"></span><h3><span class="section-number">12.1.1. </span>Derived Functions are Tacit<a class="headerlink" href="#derived-functions-are-tacit" title="Permalink to this headline">#</a></h3>
<p>The simplest example of tacit programming arises from the use of the primitive operators.
Recall these two helper functions from a previous exercise:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Trim</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">3</span><span class="o">↑</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
<span class="nv">IsLong</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="m">3</span><span class="o">&lt;≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>These are two regular dfns.
Now, we can use them to create a function <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> that will trim all the elements of the argument vector that are too long:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">TrimLong</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="nv">Trim</span><span class="na">¨</span><span class="p">)</span><span class="na">@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
<span class="nv">TrimLong</span><span class="w"> </span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┬─────┬───────┬─────────┐
│1│1 2│1 2 3│1 2 3 4│1 2 3 4 5│
└─┴───┴─────┴───────┴─────────┘
┌─┬───┬─────┬─────┬─────┐
│1│1 2│1 2 3│1 2 3│1 2 3│
└─┴───┴─────┴─────┴─────┘
</span></div></div>
</div>
<p>As it stands, the dfn <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> has nothing special about.
However, we can get rid of the braces and the omega <code class="docutils literal notranslate"><span class="pre">⍵</span></code> because those things are redundant:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">TrimLong</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="nv">Trim</span><span class="na">¨</span><span class="p">)</span><span class="na">@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
<span class="nv">TrimLong</span><span class="w"> </span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┬─────┬─────┬─────┐
│1│1 2│1 2 3│1 2 3│1 2 3│
└─┴───┴─────┴─────┴─────┘
</span></div></div>
</div>
<p>This alternative implementation works because the operator <em>at</em> needs two operands to derive a new function, and by providing the two operands, we assign the <em>derived function</em> directly to the variable <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code>.
We do not need to wrap the <em>derived function</em> in a dfn.
In fact, when we learned about <em>at</em> in <a class="reference internal" href="Operators.html#operators-at"><span class="std std-numref">Section 11.7</span></a>, we learned exactly how the <em>derived function</em> will handle its right argument:</p>
<ul class="simple">
<li><p>the right argument will be passed directly to the right operand of <em>at</em>, which is <code class="docutils literal notranslate"><span class="pre">IsLong¨</span></code>; then</p></li>
<li><p>the elements of the right argument for which <code class="docutils literal notranslate"><span class="pre">IsLong</span></code> evaluates to 1 are collected as passed to the left operand <code class="docutils literal notranslate"><span class="pre">Trim¨</span></code>.</p></li>
</ul>
<p>Looking closely at the tacit definition of <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> we see that we actually have two levels of tacit programming.
Notice how the right operand of the operator <em>at</em> is <code class="docutils literal notranslate"><span class="pre">IsLong¨</span></code>.
Why is it <code class="docutils literal notranslate"><span class="pre">IsLong¨</span></code> and not just <code class="docutils literal notranslate"><span class="pre">IsLong</span></code>?</p>
<p>The dfn <code class="docutils literal notranslate"><span class="pre">IsLong</span></code> takes a vector and determines if it has more than three elements, but we already know that the right operand of <em>at</em> will receive a nested vector.
In our example above, that was <code class="docutils literal notranslate"><span class="pre">⍳¨⍳5</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┬─────┬───────┬─────────┐
│1│1 2│1 2 3│1 2 3 4│1 2 3 4 5│
└─┴───┴─────┴───────┴─────────┘
</span></div></div>
</div>
<p>Thus, if we want to determine which nested elements of the argument vector are too long, we need to use the operator <em>each</em> to modify <code class="docutils literal notranslate"><span class="pre">IsLong</span></code>.
The use of <em>each</em> modifies how <code class="docutils literal notranslate"><span class="pre">IsLong</span></code> works and that modification is done tacitly because of the definition of <em>each</em>: we do not need to write anything to explain that the function <code class="docutils literal notranslate"><span class="pre">IsLong</span></code> is going to be applied to each scalar of the argument to <code class="docutils literal notranslate"><span class="pre">IsLong¨</span></code>.</p>
<p>Let us try another tacit definition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">MaxWindow</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>The (tacit!) function <code class="docutils literal notranslate"><span class="pre">MaxWindow</span></code> takes a matrix argument and computes the maximum value in every 3 by 3 window:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="nv">mat</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="o">⍴</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="o">,⍳</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 1 2 1
2 3 1 2 1 2
3 1 2 1 2 3
1 2 1 2 3 1
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">MaxWindow</span><span class="w"> </span><span class="nv">mat</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3 3 3 2 2
3 3 3 3 3 3
3 3 3 3 3 3
3 3 2 3 3 3
</span></div></div>
</div>
<p>Suppose that we want to modify this function so that we can apply it to higher-rank arrays.
Our goal is that the function <code class="docutils literal notranslate"><span class="pre">MaxWindow</span></code> gets applied to each 2-cell (each sub-matrix), so we can do that with the operator <em>rank</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">HighRankMaxWindow</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">MaxWindow</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="nv">cuboid</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="o">⍴</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="m">1</span><span class="o">+⍳</span><span class="m">3</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 2 3 4 1
2 3 2 3 4 1 2
3 2 3 4 1 2 3
2 3 4 1 2 3 2
3 4 1 2 3 2 3

4 1 2 3 2 3 4
1 2 3 2 3 4 1
2 3 2 3 4 1 2
3 2 3 4 1 2 3
2 3 4 1 2 3 2
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">HighRankMaxWindow</span><span class="w"> </span><span class="nv">cuboid</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3 3 4 4 4 4
3 3 4 4 4 4 4
3 4 4 4 4 4 3
4 4 4 4 4 3 3
4 4 4 4 3 3 3

4 4 3 3 4 4 4
4 4 3 4 4 4 4
3 3 4 4 4 4 4
3 4 4 4 4 4 3
3 4 4 4 4 3 3
</span></div></div>
</div>
<p>We could have defined <code class="docutils literal notranslate"><span class="pre">HighRankMaxWindow</span></code> directly:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">HighRankMaxWindow</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="operator-binding-order">
<span id="tacit-programming-operator-binding-order"></span><h3><span class="section-number">12.1.2. </span>Operator Binding Order<a class="headerlink" href="#operator-binding-order" title="Permalink to this headline">#</a></h3>
<p>We have seen two tacit functions that make use of multiple operators to derive successive functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">TrimLong</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="nv">Trim</span><span class="na">¨</span><span class="p">)</span><span class="na">@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
<span class="nv">HighRankMaxWindow</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>However, both functions have superfluous parenthesis, because we have not been considering the order in which operators bind in Dyalog APL.</p>
<p>When we have an expression, we do not need to parenthesise from the right.
For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 3 4 5 6
</span></div></div>
</div>
<p>is just</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">⍳</span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 3 4 5 6
</span></div></div>
</div>
<p>When using multiple operators together, we do not need to parenthesise from the left.
For example, the function <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> was defined as</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">TrimLong</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="nv">Trim</span><span class="na">¨</span><span class="p">)</span><span class="na">@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>but it could have been defined as</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">TrimLong</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">Trim</span><span class="na">¨@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
<span class="nv">TrimLong</span><span class="w"> </span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┬─────┬─────┬─────┐
│1│1 2│1 2 3│1 2 3│1 2 3│
└─┴───┴─────┴─────┴─────┘
</span></div></div>
</div>
<p>The leftmost set of parentheses was not necessary because operators bind from the left.
Thus, the expression <code class="docutils literal notranslate"><span class="pre">Trim¨&#64;IsLong¨</span></code> would have been equivalent to <code class="docutils literal notranslate"><span class="pre">((Trim¨)&#64;IsLong)¨</span></code>.
This shows that the leftmost set of parentheses is not necessary, whereas the rightmost set <strong>is</strong> necessary, otherwise the rightmost operator <em>each</em> binds to the derived function <code class="docutils literal notranslate"><span class="pre">Trim¨&#64;IsLong</span></code> instead of the dfn <code class="docutils literal notranslate"><span class="pre">IsLong</span></code>.</p>
<p>Similarly, the definition of <code class="docutils literal notranslate"><span class="pre">HighRankMaxWindow</span></code> has an extra set of parentheses.
Instead of <code class="docutils literal notranslate"><span class="pre">({⌈/,⍺↓⍵}⌺3</span> <span class="pre">3)⍤2</span></code>, we can write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">HighRankMaxWindow</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
<span class="nv">HighRankMaxWindow</span><span class="w"> </span><span class="nv">cuboid</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3 3 4 4 4 4
3 3 4 4 4 4 4
3 4 4 4 4 4 3
4 4 4 4 4 3 3
4 4 4 4 3 3 3

4 4 3 3 4 4 4
4 4 3 4 4 4 4
3 3 4 4 4 4 4
3 4 4 4 4 4 3
3 4 4 4 4 3 3
</span></div></div>
</div>
<p>Now, we will learn about a tool that will help us study tacit functions and, in particular, understand what parentheses are needed and which ones are not.</p>
</div>
</div>
<div class="section" id="inspecting-tacit-functions">
<span id="tacit-programming-inspecting-tacit-functions"></span><h2><span class="section-number">12.2. </span>Inspecting Tacit Functions<a class="headerlink" href="#inspecting-tacit-functions" title="Permalink to this headline">#</a></h2>
<p>The user command <code class="docutils literal notranslate"><span class="pre">]box</span></code> that you first learned in <a class="reference internal" href="Data-and-Variables.html#data-and-variables-nested-arrays"><span class="std std-numref">Section 3.6.3</span></a> can also be used to customise how tacit functions are displayed.
This customisation is done through the switch <code class="docutils literal notranslate"><span class="pre">-trains</span></code>.</p>
<p>Take a look at the help message below and read the different options for the switch <code class="docutils literal notranslate"><span class="pre">-trains</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="o">-?</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">───────────────────────────────────────────────────────────────────────────────                               

]OUTPUT.Box                                                                                                   

Display output with borders indicating shape, type and structure                                              
    ]Box [on|off|reset|?] [-style={non|min|mid|max}] [-view={non|min|mid|max}] [-trains={box|tree|parens|def}]
    [-fns[=off|on]]                                                                                           

]Box -?? ⍝ for more information and examples                                                                  

</span></div></div>
</div>
<p>This switch is called “trains” because trains are the more general form of tacit programming in Dyalog.
We will learn about trains in <a class="reference internal" href="#tacit-programming-function-trains"><span class="std std-numref">Section 12.6</span></a>.</p>
<p>Let us go through the multiple options available in the subsections that follow.</p>
<div class="section" id="box">
<span id="tacit-programming-box"></span><h3><span class="section-number">12.2.1. </span>Box<a class="headerlink" href="#box" title="Permalink to this headline">#</a></h3>
<p>The option <code class="docutils literal notranslate"><span class="pre">box</span></code> draws boxes that indicate the binding order of operators and operands.
Thus, inner boxes indicate that their contents bind first, and the contents of outer boxes bind later, possibly with content from inner boxes.</p>
<p>A couple of examples will follow.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">box</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was -trains=box
</span></div></div>
</div>
<p>First, we will see how the version of <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> that does not have superfluous parentheses is represented:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Trim</span><span class="na">¨@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────────┬─┬──────────┐
│┌─────┬─┐│@│┌──────┬─┐│
││{3↑⍵}│¨││ ││{3&lt;≢⍵}│¨││
│└─────┴─┘│ │└──────┴─┘│
└─────────┴─┴──────────┘
</span></div></div>
</div>
<p>As we can see, with the box diagram, we see that the operands of the operator <em>at</em> are the two boxes on its side:</p>
<ul class="simple">
<li><p>on the left, the box contains two other boxes, the dfn <code class="docutils literal notranslate"><span class="pre">{3↑⍵}</span></code> and the operator <code class="docutils literal notranslate"><span class="pre">¨</span></code>, so we get <code class="docutils literal notranslate"><span class="pre">{3↑⍵}¨</span></code> as the left operand; and</p></li>
<li><p>on the right, the box contains two other boxes, the dfn <code class="docutils literal notranslate"><span class="pre">{3&lt;≢⍵}</span></code> and the operator <code class="docutils literal notranslate"><span class="pre">¨</span></code>, so we get <code class="docutils literal notranslate"><span class="pre">{3&lt;≢⍵}¨</span></code> as the right operand.</p></li>
</ul>
<p>If we drop the right set of parentheses, the box diagram changes to reflect the fact that the rightmost <em>each</em> has as left operand everything else:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Trim</span><span class="na">¨@</span><span class="nv">IsLong</span><span class="na">¨</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────────────────────┬─┐
│┌─────────┬─┬──────┐│¨│
││┌─────┬─┐│@│{3&lt;≢⍵}││ │
│││{3↑⍵}│¨││ │      ││ │
││└─────┴─┘│ │      ││ │
│└─────────┴─┴──────┘│ │
└────────────────────┴─┘
</span></div></div>
</div>
<p>If you look closely, the box diagrams look like nested vectors.
A 2-element vector represents the left operand of an operator and its operator, and a 3-element vector represents the left operand, a dyadic operator, and the right operand.</p>
<p>Working from the innermost box, the operator <em>each</em> binds with <code class="docutils literal notranslate"><span class="pre">{3↑⍵}</span></code> to create the first derived function <code class="docutils literal notranslate"><span class="pre">F1</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="nv">F1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;{3↑⍵}&#39;</span><span class="w"> </span><span class="s1">&#39;¨&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┬─┐
│{3↑⍵}│¨│
└─────┴─┘
</span></div></div>
</div>
<p>Then, the operator <em>at</em> binds with <code class="docutils literal notranslate"><span class="pre">F1</span></code> on the left and with <code class="docutils literal notranslate"><span class="pre">{3&lt;≢⍵}</span></code> on the right to create the second derived function <code class="docutils literal notranslate"><span class="pre">F2</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">F1</span><span class="w"> </span><span class="s1">&#39;@&#39;</span><span class="w"> </span><span class="s1">&#39;{3&lt;≢⍵}&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────────┬─┬──────┐
│┌─────┬─┐│@│{3&lt;≢⍵}│
││{3↑⍵}│¨││ │      │
│└─────┴─┘│ │      │
└─────────┴─┴──────┘
</span></div></div>
</div>
<p>Finally, the last <em>each</em> binds with <code class="docutils literal notranslate"><span class="pre">F2</span></code> on the left to create the third and final derived function <code class="docutils literal notranslate"><span class="pre">F3</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="nv">F3</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="s1">&#39;¨&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────────────────────┬─┐
│┌─────────┬─┬──────┐│¨│
││┌─────┬─┐│@│{3&lt;≢⍵}││ │
│││{3↑⍵}│¨││ │      ││ │
││└─────┴─┘│ │      ││ │
│└─────────┴─┴──────┘│ │
└────────────────────┴─┘
</span></div></div>
</div>
<p>Similarly, we can see that <code class="docutils literal notranslate"><span class="pre">HighRankMaxWindow</span></code> does not need any parentheses to be interpreted as we needed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────────────────┬─┬─┐
│┌────────┬─┬───┐│⍤│2│
││{⌈/,⍺↓⍵}│⌺│3 3││ │ │
│└────────┴─┴───┘│ │ │
└────────────────┴─┴─┘
</span></div></div>
</div>
<p>The operator <em>stencil</em> got bound with its operands first, and that derived function was the left operand to <em>rank</em>.</p>
</div>
<div class="section" id="tree">
<span id="tacit-programming-tree"></span><h3><span class="section-number">12.2.2. </span>Tree<a class="headerlink" href="#tree" title="Permalink to this headline">#</a></h3>
<p>The option <code class="docutils literal notranslate"><span class="pre">tree</span></code> draws the tacit function in a tree structure, with the top/root of the tree being the operator that binds last.
A monadic operator gets a branch to its left operand and a dyadic operator gets two branches, one for each operand.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">tree</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was -trains=tree
</span></div></div>
</div>
<p>If we inspect the tacit definition of <code class="docutils literal notranslate"><span class="pre">HighRankMaxWindow</span></code> first, it should show the operator <em>rank</em> at the top with a sub-tree on the left to represent the left operand <code class="docutils literal notranslate"><span class="pre">{⌈/,⍺↓⍵}⌺3</span> <span class="pre">3</span></code> and a branch on the right pointing to the right operand <code class="docutils literal notranslate"><span class="pre">2</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">HighRankMaxWindow</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     ⍤
    ┌┴┐
    ⌺ 2
┌───┴────┐
{⌈/,⍺↓⍵} (2⍴3)
</span></div></div>
</div>
<p>This tree structure shows that the function <code class="docutils literal notranslate"><span class="pre">HighRankMaxWindow</span></code> is a function derived from the operator <em>rank</em>.
Then, to interpret the left operand, we have to inspect the sub-tree on the left:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    ⌺
┌───┴────┐
{⌈/,⍺↓⍵} (2⍴3)
</pre></div>
</div>
<p>The left sub-tree shows that the left operand is a function derived from the operator <em>stencil</em> with a left operand dfn and a right operand vector.</p>
<p>We can also inspect the tree structure of the expression for <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> <strong>without</strong> any parentheses:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="m">3</span><span class="o">↑</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨@</span><span class="kt">{</span><span class="m">3</span><span class="o">&lt;≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     ¨
   ┌─┘
   @
  ┌┴┐
  ¨ {3&lt;≢⍵}
┌─┘
{3↑⍵}
</span></div></div>
</div>
<p>The fact that the root of the tree is the operator <em>each</em> shows that we needed a set of parentheses somewhere.
The tree should have the operator <em>at</em> at the root with another derived function on each branch:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="m">3</span><span class="o">↑</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨@</span><span class="p">(</span><span class="kt">{</span><span class="m">3</span><span class="o">&lt;≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">     @
  ┌──┴──┐
  ¨     ¨
┌─┘   ┌─┘
{3↑⍵} {3&lt;≢⍵}
</span></div></div>
</div>
</div>
<div class="section" id="parens">
<span id="tacit-programming-parens"></span><h3><span class="section-number">12.2.3. </span>Parens<a class="headerlink" href="#parens" title="Permalink to this headline">#</a></h3>
<p>The option <code class="docutils literal notranslate"><span class="pre">-trains=parens</span></code> will always add as many parentheses as possible, even if superfluous, to make explicit the binding of the operators and their operators:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">parens</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was -trains=parens
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="m">3</span><span class="o">↑</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨@</span><span class="kt">{</span><span class="m">3</span><span class="o">&lt;≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">(({3↑⍵}¨)@{3&lt;≢⍵})¨
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">({⌈/,⍺↓⍵}⌺(2⍴3))⍤2
</span></div></div>
</div>
<p>Note that if any of the elements to be displayed take up multiple lines, then the function will be displayed as if <code class="docutils literal notranslate"><span class="pre">]box</span></code> were OFF.
This display format may look unusual, so we show two functions in that format so you get acquainted with it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="nv">OFF</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was ON
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="m">3</span><span class="o">↑</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨@</span><span class="kt">{</span><span class="m">3</span><span class="o">&lt;≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">        ∇{3↑⍵}
     ∇ ¨ @      ∇{3&lt;≢⍵}
     ∇  ¨
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="o">⌈</span><span class="na">/</span><span class="o">,</span><span class="bp">⍺</span><span class="o">↓</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="na">⍤</span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">       ∇{⌈/,⍺↓⍵}
     ∇ ⌺ 3 3  ⍤ 2
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="nv">ON</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was OFF
</span></div></div>
</div>
</div>
<div class="section" id="def">
<span id="tacit-programming-def"></span><h3><span class="section-number">12.2.4. </span>Def<a class="headerlink" href="#def" title="Permalink to this headline">#</a></h3>
<p>The option <code class="docutils literal notranslate"><span class="pre">-trains=def</span></code> will show the simplest expression that still defines the same function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">def</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was -trains=def
</span></div></div>
</div>
<p>For example, if we display our original implementation of <code class="docutils literal notranslate"><span class="pre">TrimLong</span></code> that contained superfluous parenthesis, this option will remove them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">Trim</span><span class="na">¨</span><span class="p">)</span><span class="na">@</span><span class="p">(</span><span class="nv">IsLong</span><span class="na">¨</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">{3↑⍵}¨@({3&lt;≢⍵}¨)
</span></div></div>
</div>
<p>Whenever you are writing a derived function and are not sure if the operands will bind like you need them to, use these tools to inspect the derived function and understand what you need to do to make sure you define your function correctly.</p>
<p>Let us reset <code class="docutils literal notranslate"><span class="pre">]box</span></code> to using the option <code class="docutils literal notranslate"><span class="pre">-trains=tree</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="o">-</span><span class="nv">trains</span><span class="o">=</span><span class="nv">tree</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Was -trains=tree
</span></div></div>
</div>
<p>Deriving functions from operators is the simplest form of tacit programming.
In the sections that follow, we will learn about function composition and trains which provide other mechanisms for tacit programming.</p>
</div>
</div>
<div class="section" id="function-composition">
<span id="tacit-programming-function-composition"></span><h2><span class="section-number">12.3. </span>Function Composition<a class="headerlink" href="#function-composition" title="Permalink to this headline">#</a></h2>
<p>Function composition refers to the act of defining a new function at the expense of smaller functions that get applied in the pattern specified by the combining operators.</p>
<p>Trains, explained in detail in <a class="reference internal" href="#tacit-programming-function-trains"><span class="std std-numref">Section 12.6</span></a>, can also be thought of as a form of function composition, but this section will focus on the three operators that Dyalog provides for function composition.</p>
<p>The three operators introduced here, <em>beside</em>, <em>atop</em>, and <em>over</em>, are dyadic operators that take their operands and produce a single, composite operation.
One can regard these operators as easy ways of specifying inline “mini-functions”.
As such, these operators do not add functionality to the language that could not be obtained by other means; they just represent a very convenient notation to express some common patterns.</p>
<p>We start by introducing <em>beside</em>.</p>
<div class="section" id="beside">
<span id="tacit-programming-beside"></span><h3><span class="section-number">12.3.1. </span>Beside<a class="headerlink" href="#beside" title="Permalink to this headline">#</a></h3>
<p><em>Beside</em> is a dyadic operator represented by <em>jot</em> <code class="docutils literal notranslate"><span class="pre">∘</span></code>, which you can type with <kbd>APL</kbd>+<kbd>j</kbd>, as you already know.
In this section, we will cover the forms of <em>beside</em> where the operands are functions.
The section on argument binding (<a class="reference external" href="#Binding">here</a>) will cover the forms in which <em>beside</em> has an array operand.</p>
<p><em>Beside</em> takes the two operand functions and applies them to the argument(s) with a pattern that depends on the valence of the derived function:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">F∘G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>, both <code class="docutils literal notranslate"><span class="pre">F</span></code> and <code class="docutils literal notranslate"><span class="pre">G</span></code> are used as monadic functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F∘G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code> is used dyadically and <code class="docutils literal notranslate"><span class="pre">G</span></code> is used monadically.</p></li>
</ul>
<p>The patterns shown above can also be represented in diagrams like the ones in <a class="reference internal" href="#fig-beside-diagram"><span class="std std-numref">Fig. 12.1</span></a>.</p>
<div class="figure align-default" id="beside-diagram">
<span id="fig-beside-diagram"></span><img alt="_images/Beside_Diagram.svg" src="_images/Beside_Diagram.svg" /><p class="caption"><span class="caption-number">Fig. 12.1 </span><span class="caption-text">Diagram showing how the operator <em>beside</em> composes its operands.</span><a class="headerlink" href="#beside-diagram" title="Permalink to this image">#</a></p>
</div>
<p>The composition with <em>beside</em>, <code class="docutils literal notranslate"><span class="pre">F∘G</span></code>, can be interpreted as “preprocess the right argument of <code class="docutils literal notranslate"><span class="pre">F</span></code> with <code class="docutils literal notranslate"><span class="pre">G</span></code>”.</p>
<p>The operator <em>beside</em> is rarely used alone.
After all, the expressions above show that instead of writing <code class="docutils literal notranslate"><span class="pre">F∘G</span> <span class="pre">⍵</span></code> one could just write <code class="docutils literal notranslate"><span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code> or, instead of writing <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F∘G</span> <span class="pre">⍵</span></code>, one could just write <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>.
<em>Beside</em> is often used together with the operator <em>each</em>, as this may give important advantages for execution time and memory consumption.
Another example usage of <em>beside</em> is to create a derived function to be used together with the operator <em>reduce</em>.
We will show examples of these usages below.</p>
<div class="section" id="monadic-derived-function">
<span id="tacit-programming-monadic-derived-function"></span><h4><span class="section-number">12.3.1.1. </span>Monadic derived function<a class="headerlink" href="#monadic-derived-function" title="Permalink to this headline">#</a></h4>
<p>Quite often you would like to apply two monadic functions to each item of an array.
This is very easy to do with the help of the powerful operator <em>each</em>.</p>
<p>Let us look at the simple example in which we just want to find the rank of each item of the variable <code class="docutils literal notranslate"><span class="pre">weird</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="nv">weird</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">456</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="w"> </span><span class="s1">&#39;Dyalog&#39;</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">8</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="p">))</span><span class="w"> </span><span class="p">(</span><span class="m">17</span><span class="w"> </span><span class="m">51</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Twisted&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┬────────────┐
│456  │┌──────┬───┐│
│     ││Dyalog│44 ││
│     │├──────┼───┤│
│     ││27    │8 6││
│     ││      │2 4││
│     │└──────┴───┘│
├─────┼────────────┤
│17 51│Twisted     │
└─────┴────────────┘
</span></div></div>
</div>
<p>The rank of <code class="docutils literal notranslate"><span class="pre">array</span></code> is <code class="docutils literal notranslate"><span class="pre">≢⍴array</span></code>, so the rank of each item of <code class="docutils literal notranslate"><span class="pre">weird</span></code> is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="na">¨</span><span class="o">⍴</span><span class="na">¨</span><span class="nv">weird</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 2
1 1
</span></div></div>
</div>
<p>In the expression above, the <code class="docutils literal notranslate"><span class="pre">⍴¨</span></code> creates a (potentially big) array containing the shape of each item of <code class="docutils literal notranslate"><span class="pre">weird</span></code>.
Then, the <code class="docutils literal notranslate"><span class="pre">≢¨</span></code> gets the length of each vector of the intermediate result.
Remember: the rank of an array is the length of the shape of the array.</p>
<p>This is inefficient for two reasons:</p>
<ol class="simple">
<li><p>Firstly, APL must allocate memory to hold the intermediate array, which will be discarded as soon as the entire expression has been evaluated.</p></li>
</ol>
<p>We can see this intermediate result if we insert a <code class="docutils literal notranslate"><span class="pre">⎕←</span></code> between <code class="docutils literal notranslate"><span class="pre">≢¨</span></code> and <code class="docutils literal notranslate"><span class="pre">⍴¨</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="na">¨</span><span class="w"> </span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="o">⍴</span><span class="na">¨</span><span class="w"> </span><span class="nv">weird</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┐
│ │2 2│
├─┼───┤
│2│7  │
└─┴───┘
0 2
1 1
</span></div></div>
</div>
<ol class="simple">
<li><p>Secondly, internally APL must loop through a potentially large number of items twice.</p></li>
</ol>
<p>With the help of <em>beside</em>, we can eliminate both problems:
APL only needs to traverse the array once, applying both functions to each item in succession.
During the processing of each item, only a very small intermediate array will be created holding the shape of each item, and it will be discarded before processing the next item:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="na">∘</span><span class="o">⍴</span><span class="na">¨</span><span class="w"> </span><span class="nv">weird</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 2
1 1
</span></div></div>
</div>
<p>The expression <code class="docutils literal notranslate"><span class="pre">≢∘⍴¨</span></code> is another example of tacit programming.
From the example above, we know that <code class="docutils literal notranslate"><span class="pre">≢∘⍴¨</span></code> computes the rank of each item in a nested array, if applied monadically.
However, that expression contains two functions and two operators, and in no way we specify explicitly what arguments go where.
Hence, <code class="docutils literal notranslate"><span class="pre">≢∘⍴¨</span></code> is an example of tacit programming.</p>
<p>As another example usage of <em>beside</em>, consider the expression below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">/∘</span><span class="o">⍳</span><span class="na">¨</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 10 28
</span></div></div>
</div>
<p>This expression adds up the items of <code class="docutils literal notranslate"><span class="pre">⍳2</span></code>, those of <code class="docutils literal notranslate"><span class="pre">⍳4</span></code>, and finally those of <code class="docutils literal notranslate"><span class="pre">⍳7</span></code>.
Using <em>beside</em> to compose the <em>plus reduction</em> and the <em>index generator</em> functions uses up less space than using the operator <em>each</em> twice because the intermediate result would be a nested vector with all the vectors created by the <em>index generator</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">/¨</span><span class="w"> </span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="o">⍳</span><span class="na">¨</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───────┬─────────────┐
│1 2│1 2 3 4│1 2 3 4 5 6 7│
└───┴───────┴─────────────┘
3 10 28
</span></div></div>
</div>
<p>If the initial argument contained more integers and they were all large integers, the intermediate result would be unnecessarily long.</p>
<p>In the third example that follows, both operands to <em>beside</em> are user-defined functions we have seen before:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Sqrt</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">*</span><span class="m">0.5</span><span class="kt">}</span><span class="w"></span>
<span class="nv">Average</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Sqrt</span><span class="na">∘</span><span class="nv">Average</span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">7</span><span class="p">)(</span><span class="m">8</span><span class="w"> </span><span class="m">11</span><span class="p">)(</span><span class="m">21</span><span class="w"> </span><span class="m">51</span><span class="p">)(</span><span class="m">16</span><span class="w"> </span><span class="m">9</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3.08221 6 3.53553
</span></div></div>
</div>
</div>
<div class="section" id="dyadic-derived-function">
<span id="tacit-programming-dyadic-derived-function"></span><h4><span class="section-number">12.3.1.2. </span>Dyadic derived function<a class="headerlink" href="#dyadic-derived-function" title="Permalink to this headline">#</a></h4>
<p>Here is an example of composition of <em>times</em> and <em>index generator</em> with the operator <em>beside</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="o">×</span><span class="na">∘</span><span class="o">⍳</span><span class="na">¨</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───────────┬───────────┐
│1 2│10 20 30 40│100 200 300│
└───┴───────────┴───────────┘
</span></div></div>
</div>
<p>The expression above multiplies <code class="docutils literal notranslate"><span class="pre">1</span></code> with <code class="docutils literal notranslate"><span class="pre">⍳2</span></code>, then it multiplies <code class="docutils literal notranslate"><span class="pre">10</span></code> with <code class="docutils literal notranslate"><span class="pre">⍳4</span></code>, and finally, it multiplies <code class="docutils literal notranslate"><span class="pre">100</span></code> with <code class="docutils literal notranslate"><span class="pre">⍳3</span></code>.</p>
<p>Another example involves the approximation of the <strong>golden mean</strong>, which can be calculated by this infinite series:</p>
<div class="math notranslate nohighlight">
\[
1 +\div~ 1 +\div~ 1 +\div~ 1 +\div~ 1 +\div~ 1 +\div~ \cdots
\]</div>
<p>As you can see, we have inserted <code class="docutils literal notranslate"><span class="pre">+÷</span></code> between the items of a series of ones.
This operation is a <em>reduction</em> by <code class="docutils literal notranslate"><span class="pre">+÷</span></code>, but the operator <em>reduce</em> only accepts a single function on its left.
To overcome this, we can use the operator <em>beside</em> to compose the two functions <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">÷</span></code> together, thereby creating a single, derived function that may be used together with <em>reduce</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">∘</span><span class="o">÷</span><span class="na">/</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.625
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">∘</span><span class="o">÷</span><span class="na">/</span><span class="w"> </span><span class="m">50</span><span class="o">⍴</span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.61803
</span></div></div>
</div>
</div>
</div>
<div class="section" id="atop">
<span id="tacit-programming-atop"></span><h3><span class="section-number">12.3.2. </span>Atop<a class="headerlink" href="#atop" title="Permalink to this headline">#</a></h3>
<p><em>Atop</em> is a dyadic operator represented by <em>jot diaeresis</em> <code class="docutils literal notranslate"><span class="pre">⍤</span></code>, which you can type with <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>J</kbd>, which is the same glyph as the one used for the operator <em>rank</em>.</p>
<p>The difference between the operator <em>rank</em> and the operator <em>atop</em> lies in the right operand:</p>
<ul class="simple">
<li><p>for the operator <em>rank</em>, the right operand is an array; and</p></li>
<li><p>for the operator <em>atop</em>, the right operand is a function.</p></li>
</ul>
<p><em>Atop</em> takes the two operand functions and applies them to the argument(s) with a pattern that depends on the valence of the derived function:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">F⍤G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>, both <code class="docutils literal notranslate"><span class="pre">F</span></code> and <code class="docutils literal notranslate"><span class="pre">G</span></code> are used as monadic functions and this is exactly the same as <code class="docutils literal notranslate"><span class="pre">F∘G</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F⍤G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">⍵</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code> is used monadically and <code class="docutils literal notranslate"><span class="pre">G</span></code> is used dyadically.</p></li>
</ul>
<p>The patterns shown above can also be represented in diagrams like the ones in <a class="reference internal" href="#fig-atop-diagram"><span class="std std-numref">Fig. 12.2</span></a>.</p>
<div class="figure align-default" id="atop-diagram">
<span id="fig-atop-diagram"></span><img alt="_images/Atop_Diagram.svg" src="_images/Atop_Diagram.svg" /><p class="caption"><span class="caption-number">Fig. 12.2 </span><span class="caption-text">Diagram showing how the operator <em>atop</em> composes its operands.</span><a class="headerlink" href="#atop-diagram" title="Permalink to this image">#</a></p>
</div>
<p>The left operand is applied <em>atop</em> the right operand.
In other words, the left operand function is applied after the right operand is applied to the available arguments.
Yet another way of describing the operator <em>atop</em> is by saying that <code class="docutils literal notranslate"><span class="pre">F⍤G</span></code> post-processes the result of <code class="docutils literal notranslate"><span class="pre">G</span></code> with <code class="docutils literal notranslate"><span class="pre">F</span></code>.</p>
<p>We will show some example usages below.</p>
<p>Much like <em>beside</em>, seen before, and <em>over</em>, which will be shown next, the operator <em>atop</em> is typically used in conjunction with other operators, for example <em>each</em> or <em>reduce</em>.</p>
<div class="section" id="example-usages-of-atop">
<span id="tacit-programming-example-usages-of-atop"></span><h4><span class="section-number">12.3.2.1. </span>Example usages of atop<a class="headerlink" href="#example-usages-of-atop" title="Permalink to this headline">#</a></h4>
<p>Suppose that you need to determine whether a number comes before or after another number.
This type of comparison can be made with one of the many comparison primitives: <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">≤</span></code>, <code class="docutils literal notranslate"><span class="pre">≥</span></code>, and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.
However, the comparison primitives return Boolean results, which are either 0 or 1.</p>
<p>If you wanted a more fine-grained comparison that distinguishes whether the left argument is before the right argument, after the right argument, or is the same as the right argument, you could use a derived function with <em>atop</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="o">×</span><span class="na">⍤</span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 0 ¯1
</span></div></div>
</div>
<p>The result of <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">×⍤-</span> <span class="pre">⍵</span></code> is one of three values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> if <code class="docutils literal notranslate"><span class="pre">⍺</span></code> comes after <code class="docutils literal notranslate"><span class="pre">⍵</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> if <code class="docutils literal notranslate"><span class="pre">⍺</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">⍵</span></code>; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">¯1</span></code> if <code class="docutils literal notranslate"><span class="pre">⍺</span></code> comes before <code class="docutils literal notranslate"><span class="pre">⍵</span></code>.</p></li>
</ul>
<p>The dyadic derived function <code class="docutils literal notranslate"><span class="pre">×⍤-</span></code> can be interpreted as “the sign of the difference”, which can be seen as post-processing the difference of the two arguments with the function <em>sign</em>.</p>
<p>It is true that the expression shown above could be rewritten without <em>atop</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">×</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 0 ¯1
</span></div></div>
</div>
<p>But that is not necessarily a better alternative to using the derived function <code class="docutils literal notranslate"><span class="pre">×⍤-</span></code> and, in some cases, rewriting <code class="docutils literal notranslate"><span class="pre">×⍤-</span></code> without the <em>atop</em> may not be an alternative.</p>
</div>
<div class="section" id="function-atop-tack">
<span id="tacit-programming-function-atop-tack"></span><h4><span class="section-number">12.3.2.2. </span>Function atop tack<a class="headerlink" href="#function-atop-tack" title="Permalink to this headline">#</a></h4>
<p>There is a common usage pattern for the operator <em>atop</em> that involves using a tack.</p>
<p>Consider the monadic derived function <code class="docutils literal notranslate"><span class="pre">≢⍤⊢⌸</span></code> that uses the operator <em>key</em> and the operator <em>atop</em>, where the left operand to <code class="docutils literal notranslate"><span class="pre">⌸</span></code> is <code class="docutils literal notranslate"><span class="pre">≢⍤⊢</span></code> because operators bind from the left.
The monadic derived function <code class="docutils literal notranslate"><span class="pre">≢⍤⊢⌸</span></code> counts how many times each unique item appears in its argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="na">⍤</span><span class="o">⊢</span><span class="na">⌸</span><span class="w"> </span><span class="s1">&#39;MISSISSIPPI&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 4 4 2
</span></div></div>
</div>
<p>The result above means that one of the letters show up 1 time, two other letters show up 4 times each, and the fourth letter shows up 2 times.
These counts are in the order of the unique elements, so we can easily find out the letters associated with the counts:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">∪</span><span class="s1">&#39;MISSISSIPPI&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">MISP
</span></div></div>
</div>
<p>The point of using <code class="docutils literal notranslate"><span class="pre">F⍤⊢⌸</span></code> is that the operator <em>key</em> passes two arguments to its left operand (to give more flexibility to the user) but we only care about one of those, so we use the appropriate tack to select the argument we want, and then apply <code class="docutils literal notranslate"><span class="pre">F</span></code> to that argument.</p>
<p>A similar pattern is exhibited in this alternative implementation of <em>n-wise reduction</em> as a <em>dop</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">_NWiseReduce</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍺⍺</span><span class="na">/⍤</span><span class="o">⊢</span><span class="na">⌺</span><span class="bp">⍺</span><span class="o">⊢</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
<span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="nv">_NWiseReduce</span><span class="w"> </span><span class="o">⍳</span><span class="m">10</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 5 7 9 11 13 15 17 19
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">⍺⍺/⍤⊢⌺⍺</span></code> is a single derived function and we can inspect its structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{}</span><span class="na">/⍤</span><span class="o">⊢</span><span class="na">⌺</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">    ⌺
   ┌┴┐
   ⍤ 0
  ┌┴┐
  / ⊢
┌─┘
{}
</span></div></div>
</div>
<p>In the expression above, we substituted the left operand <code class="docutils literal notranslate"><span class="pre">⍺⍺</span></code> of the dop with <code class="docutils literal notranslate"><span class="pre">{}</span></code> because writing <code class="docutils literal notranslate"><span class="pre">⍺⍺</span></code> outside of a dop gives a <code class="docutils literal notranslate"><span class="pre">SYNTAX</span> <span class="pre">ERROR</span></code>.
Similarly, we used <code class="docutils literal notranslate"><span class="pre">0</span></code> as the right operand of <code class="docutils literal notranslate"><span class="pre">⌺</span></code> because we cannot write <code class="docutils literal notranslate"><span class="pre">⍺</span></code> outside of a <em>dfn</em>/<em>dop</em>.</p>
<p>So, in inspecting the structure of <code class="docutils literal notranslate"><span class="pre">⍺⍺/⍤⊢⌺⍺</span></code>, we see that <code class="docutils literal notranslate"><span class="pre">⍺⍺/⍤⊢</span></code> is the left operand of the operator <em>stencil</em>.
Recall that the left operand of the operator <em>stencil</em> takes two arguments:</p>
<ul class="simple">
<li><p>the left argument gives information about the padding of the current sub-array; and</p></li>
<li><p>the right argument is the sub-array being processed.</p></li>
</ul>
<p>Because we do not need the information about the left argument, we use <code class="docutils literal notranslate"><span class="pre">⍺⍺/⍤⊢</span></code> to apply <code class="docutils literal notranslate"><span class="pre">⍺⍺/</span></code> directly to the right argument.</p>
</div>
</div>
<div class="section" id="over">
<span id="tacit-programming-over"></span><h3><span class="section-number">12.3.3. </span>Over<a class="headerlink" href="#over" title="Permalink to this headline">#</a></h3>
<p><em>Over</em> is a dyadic operator represented by <em>circle diaeresis</em> <code class="docutils literal notranslate"><span class="pre">⍥</span></code>, which you can type with <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd> (that is the letter “Oh”, and not the number zero).</p>
<p><em>Over</em> takes two operand functions and applies them to the argument(s) with a pattern that depends on the valence of the derived function:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">F⍥G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>, both <code class="docutils literal notranslate"><span class="pre">F</span></code> and <code class="docutils literal notranslate"><span class="pre">G</span></code> are used as monadic functions and this is exactly the same as <code class="docutils literal notranslate"><span class="pre">F∘G</span></code> or <code class="docutils literal notranslate"><span class="pre">F⍤G</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F⍥G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">(G</span> <span class="pre">⍵)</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code> is used dyadically and <code class="docutils literal notranslate"><span class="pre">G</span></code> is used monadically.</p></li>
</ul>
<p>The patterns shown above can also be represented in diagrams like the ones in <a class="reference internal" href="#fig-over-diagram"><span class="std std-numref">Fig. 12.3</span></a>.</p>
<div class="figure align-default" id="over-diagram">
<span id="fig-over-diagram"></span><img alt="_images/Over_Diagram.svg" src="_images/Over_Diagram.svg" /><p class="caption"><span class="caption-number">Fig. 12.3 </span><span class="caption-text">Diagram showing how the operator <em>over</em> composes its operands.</span><a class="headerlink" href="#over-diagram" title="Permalink to this image">#</a></p>
</div>
<p>The usage <code class="docutils literal notranslate"><span class="pre">F⍥G</span></code> of the operator <em>over</em> can be interpreted as “apply <code class="docutils literal notranslate"><span class="pre">F</span></code> after pre-processing all arguments with <code class="docutils literal notranslate"><span class="pre">G</span></code>”.</p>
<p>We will show some example usages below.</p>
<p>Of the three compositional operators discussed so far, <em>beside</em>, <em>atop</em>, and <em>over</em>, the operator <em>over</em> is the one that is more commonly used alone.</p>
<p>We will show some example usages below.</p>
<p>How can we check if two words start with the same letter?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">word1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;banana&#39;</span><span class="w"></span>
<span class="nv">word2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;bat&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>We can use <em>first</em> to get the first character of each word and see if they match:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⊃</span><span class="nv">word1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">⊃</span><span class="nv">word2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>Alternatively, we can check for <em>equality over the first character</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">word1</span><span class="w"> </span><span class="o">=</span><span class="na">⍥</span><span class="o">⊃</span><span class="w"> </span><span class="nv">word2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>Suppose that we represent an interval of numbers with a 2-item vector with the two endpoints.
For example, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">3.34</span></code> would be the interval of all the numbers between <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">3.34</span></code>.</p>
<p>The centre of an interval can be computed as such:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Centre</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷</span><span class="m">2</span><span class="kt">}</span><span class="w"></span>
<span class="nv">Centre</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3.34</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.67
</span></div></div>
</div>
<p>The distance between two intervals can be defined as the distance between the centres, which we can compute with <code class="docutils literal notranslate"><span class="pre">-⍥Centre</span></code>.</p>
<p>So, the distance between the intervals <code class="docutils literal notranslate"><span class="pre">¯1</span> <span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">3.34</span></code> is</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="w"> </span><span class="m">3.34</span><span class="w"> </span><span class="o">-</span><span class="na">⍥</span><span class="nv">Centre</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2.17
</span></div></div>
</div>
<p>If we swap the order of the two arguments, we see that the distance becomes negative:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">-</span><span class="na">⍥</span><span class="nv">Centre</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3.34</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯2.17
</span></div></div>
</div>
<p>This does not make much sense, so we might want to fix this by saying that we want the <em>absolute value after the difference of the centres</em>, which is done by using the operator <em>atop</em> to “post-process” the result of the subtraction:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="na">⍤</span><span class="o">-</span><span class="na">⍥</span><span class="nv">Centre</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3.34</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2.17
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="na">⍤</span><span class="o">-</span><span class="na">⍥</span><span class="nv">Centre</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">  ⍥
 ┌┴┐
 ⍤ {(+/⍵)÷2}
┌┴┐
| -
</span></div></div>
</div>
</div>
<div class="section" id="comparison-of-the-three-operators">
<span id="tacit-programming-comparison-of-the-three-operators"></span><h3><span class="section-number">12.3.4. </span>Comparison of the Three Operators<a class="headerlink" href="#comparison-of-the-three-operators" title="Permalink to this headline">#</a></h3>
<p>The three compositional operators <em>beside</em>, <em>atop</em>, and <em>over</em>, all behave in the same way if the derived function is used monadically.
The difference lies in the dyadic use of the derived function, as the table below shows.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Operator</p></th>
<th class="text-align:left head"><p>Monadic use</p></th>
<th class="text-align:left head"><p>Dyadic use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">F∘G</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">F∘G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F∘G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">F⍤G</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">F⍤G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F⍤G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">⍵</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">F⍥G</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">F⍥G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F⍥G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">(G</span> <span class="pre">⍵)</span></code></p></td>
</tr>
</tbody>
</table>
<p>These differences can also be summarised in <a class="reference internal" href="#fig-compositional-operators-comparison"><span class="std std-numref">Fig. 12.4</span></a>:</p>
<div class="figure align-default" id="compositional-operators-comparison">
<span id="fig-compositional-operators-comparison"></span><img alt="_images/Compositional_Operators_Comparison.svg" src="_images/Compositional_Operators_Comparison.svg" /><p class="caption"><span class="caption-number">Fig. 12.4 </span><span class="caption-text">Diagram comparing the dyadic uses of the three compositional operators.</span><a class="headerlink" href="#compositional-operators-comparison" title="Permalink to this image">#</a></p>
</div>
</div>
<div class="section" id="to-compose-or-not-to-compose">
<span id="tacit-programming-to-compose-or-not-to-compose"></span><h3><span class="section-number">12.3.5. </span>To Compose or Not To Compose<a class="headerlink" href="#to-compose-or-not-to-compose" title="Permalink to this headline">#</a></h3>
<p>As stated in the beginning of this section, the three operators <em>beside</em>, <em>atop</em>, and <em>over</em>, do not add new primitive behaviour.
In fact, for each of those operators, we have shown equivalent expressions that do <strong>not</strong> use the operators and that achieve the same effect.</p>
<p>However, there are advantages to using compositional operators to create derived functions.
Here are some of those advantages:</p>
<ul class="simple">
<li><p>the derived function can be assigned a name;</p></li>
<li><p>function composition with these operators works inside trains (<a class="reference external" href="#Function-Trains">which will be introduced soon</a>); and</p></li>
<li><p>these operators clarify the meaning of your programs when used correctly. In other words, good usage of <em>beside</em>, <em>atop</em>, and <em>over</em>, can make it easier to read and understand a program.</p></li>
</ul>
<p>With practice, you will develop a better understanding for when using these operators explicitly is a good choice.
In part, it will also come down to personal taste: some prefer to use plenty of compositional operators and others prefer to use none, but optimal usage of these operators lies somewhere in between those two extremes.</p>
</div>
</div>
<div class="section" id="binding">
<span id="tacit-programming-binding"></span><h2><span class="section-number">12.4. </span>Binding<a class="headerlink" href="#binding" title="Permalink to this headline">#</a></h2>
<p>The glyph <em>jot</em> <code class="docutils literal notranslate"><span class="pre">∘</span></code> has yet another use as a dyadic operator.
If one of the operands, and only one, is an array, then <code class="docutils literal notranslate"><span class="pre">∘</span></code> stands for the operator <em>bind</em>.</p>
<p>The operator <em>bind</em> is used to set a fixed argument (the array operand) to a given function (the function operand).
Depending on whether the array operand is on the left or on the right of the function operand, the operator <em>bind</em> sets the left or right argument of the function, respectively.</p>
<p>More explicitly, in <code class="docutils literal notranslate"><span class="pre">array∘F</span></code>, the operator <em>bind</em> sets the left argument of the function <code class="docutils literal notranslate"><span class="pre">F</span></code> to be <code class="docutils literal notranslate"><span class="pre">array</span></code>, and in <code class="docutils literal notranslate"><span class="pre">F∘array</span></code>, the operator <em>bind</em> sets the right argument of the function <code class="docutils literal notranslate"><span class="pre">F</span></code> to be <code class="docutils literal notranslate"><span class="pre">array</span></code>.</p>
<p>Next, we take a look at a few examples of the operator <em>bind</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="na">∘</span><span class="o">↑</span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Houston&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">21</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">55</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┬───┬────────┬───────┐
│1 2 3│Hou│21 53 78│11 22 0│
└─────┴───┴────────┴───────┘
</span></div></div>
</div>
<p>This expression applies <code class="docutils literal notranslate"><span class="pre">3↑</span></code> to each of the items of the right argument.
So far, this is not a very good example, as the expression would work and give the same result even without the operator <em>bind</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="o">↑</span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Houston&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">21</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">55</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┬───┬────────┬───────┐
│1 2 3│Hou│21 53 78│11 22 0│
└─────┴───┴────────┴───────┘
</span></div></div>
</div>
<p>However, binding the value 3 to <em>take</em> makes it possible to combine the function with yet another function, so that we can again obtain the advantage of not creating unnecessary intermediate values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⌽</span><span class="na">∘</span><span class="p">(</span><span class="m">3</span><span class="na">∘</span><span class="o">↑</span><span class="p">)</span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Houston&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">21</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">55</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────┬───┬────────┬───────┐
│3 2 1│uoH│78 53 21│0 22 11│
└─────┴───┴────────┴───────┘
</span></div></div>
</div>
<p>Moreover, if the array operand is not a scalar, it may be impossible to omit the operator <em>bind</em>.
In the example that follows, the operator <em>bind</em> must be present, otherwise we get a <code class="docutils literal notranslate"><span class="pre">LENGTH</span> <span class="pre">ERROR</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="na">∘</span><span class="o">⍴</span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Houston&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">21</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">55</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬──┬─────┬─────┐
│1 2│Ho│21 53│11 22│
│3 4│us│78 55│11 22│
└───┴──┴─────┴─────┘
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍴</span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Houston&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">21</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">55</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LENGTH ERROR
      2 2⍴¨(⍳5)&#39;Houston&#39;(21 53 78 55)(11 22)
         ∧
</pre></div>
</div>
</div>
</div>
<p>When we use the operator <em>bind</em>, we create a derived function that is monadic, which means the derived function always takes a single right argument.
Thus, an expression like <code class="docutils literal notranslate"><span class="pre">(F∘arr1)</span> <span class="pre">arr2</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">arr2</span> <span class="pre">F</span> <span class="pre">arr1</span></code>, because the operator <em>bind</em> created the derived function <code class="docutils literal notranslate"><span class="pre">F∘arr1</span></code> where the <strong>right</strong> argument of <code class="docutils literal notranslate"><span class="pre">F</span></code> is set to <code class="docutils literal notranslate"><span class="pre">arr1</span></code>.</p>
<p>For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">*</span><span class="na">∘</span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">169</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 9 13
</span></div></div>
</div>
<p>Once bound to 0.5, the function <em>power</em> behaves like the function square root, which expects a right argument (the number(s) to compute the square root of).</p>
<p>In this form, the derived function must be parenthesised so that the operand 0.5 is separated from the right argument vector.
Another alternative, that we saw in <a class="reference internal" href="Operators.html"><span class="doc std std-doc">the chapter about operators</span></a>, is to use a tack:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="na">∘</span><span class="m">0.5</span><span class="w"> </span><span class="o">⊢</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">169</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 9 13
</span></div></div>
</div>
</div>
<div class="section" id="commute-selfie-and-constant">
<span id="tacit-programming-commute-selfie-and-constant"></span><h2><span class="section-number">12.5. </span>Commute, Selfie, and Constant<a class="headerlink" href="#commute-selfie-and-constant" title="Permalink to this headline">#</a></h2>
<p>The three operators <em>commute</em>, <em>selfie</em>, and <em>constant</em>, are the three usages of the glyph <em>tilde diaeresis</em> <code class="docutils literal notranslate"><span class="pre">⍨</span></code>.
By now, you should be able to guess that the key combination to type <code class="docutils literal notranslate"><span class="pre">⍨</span></code> is <kbd>APL</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd>.
After all, the function <em>without</em> <code class="docutils literal notranslate"><span class="pre">~</span></code> is <kbd>APL</kbd>+<kbd>t</kbd>.</p>
<div class="section" id="commute-and-selfie">
<span id="tacit-programming-commute-and-selfie"></span><h3><span class="section-number">12.5.1. </span>Commute and Selfie<a class="headerlink" href="#commute-and-selfie" title="Permalink to this headline">#</a></h3>
<p>As its name implies, <em>commute</em> is a monadic operator which commutes the arguments of its derived function.</p>
<p>For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2
</span></div></div>
</div>
<p>but if we use the operator <em>commute</em>, then</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="o">÷</span><span class="na">⍨</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.5
</span></div></div>
</div>
<p>That is, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">F⍨</span> <span class="pre">y</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">F</span> <span class="pre">x</span></code>.</p>
<p>When the derived function <code class="docutils literal notranslate"><span class="pre">F⍨</span></code> is used monadically, as in <code class="docutils literal notranslate"><span class="pre">F⍨</span> <span class="pre">y</span></code>, then the same argument gets used on both sides of the function.
Thus, <code class="docutils literal notranslate"><span class="pre">F⍨</span> <span class="pre">y</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">F</span> <span class="pre">y</span></code>.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">⍴⍨</span> <span class="pre">3</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">3⍴3</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="na">⍨</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3 3
</span></div></div>
</div>
<p>Based only on these simple examples, one might think that the operators <em>commute</em> and <em>selfie</em> are useless (typing <code class="docutils literal notranslate"><span class="pre">⍴⍨3</span></code> is no easier than typing <code class="docutils literal notranslate"><span class="pre">3⍴3</span></code>).
However, both may be used to reduce the number of parentheses needed in an expression.</p>
<p>For example, suppose we want to create a vector like <code class="docutils literal notranslate"><span class="pre">3⍴3</span></code> or <code class="docutils literal notranslate"><span class="pre">5⍴5</span></code>, using the last item of an arbitrary vector <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
<p>A direct approach would be to write <code class="docutils literal notranslate"><span class="pre">((≢v)⌷v)⍴(≢v)⌷v</span></code> or <code class="docutils literal notranslate"><span class="pre">(⊃⌽v)⍴⊃⌽v</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="o">≢</span><span class="nv">v</span><span class="p">)</span><span class="o">⌷</span><span class="nv">v</span><span class="p">)</span><span class="o">⍴</span><span class="p">(</span><span class="o">≢</span><span class="nv">v</span><span class="p">)</span><span class="o">⌷</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 4 4 4
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⊃⌽</span><span class="nv">v</span><span class="p">)</span><span class="o">⍴⊃⌽</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 4 4 4
</span></div></div>
</div>
<p>The operator <em>selfie</em> allows a simpler expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⍴</span><span class="na">⍨</span><span class="o">⊃⌽</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 4 4 4
</span></div></div>
</div>
<p>It is not only for “cosmetic” reasons that it is desirable to avoid repeating an expression.
It also means that the interpreter only has to evaluate the expression once, possibly saving some execution time.
Furthermore, avoiding a verbatim repetition of a piece of code improves maintainability considerably.
If the expression needs to be modified, it is simply too easy to forget to modify all instances of it, or to make mistakes in some of the modifications.</p>
<p>Some APL programmers still prefer to use an intermediate variable or an inline direct function to obtain the same benefits in terms of efficiency and maintainability:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">last</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">⊃⌽</span><span class="nv">v</span><span class="w"></span>
<span class="nv">last</span><span class="o">⍴</span><span class="nv">last</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 4 4 4
</span></div></div>
</div>
<p>It is mostly a matter of taste which of the possible solutions different programmers prefer.
The case illustrates that the APL language typically allows the same task to be solved in many different ways.</p>
<p>The operator <em>commute</em> can also allow for simpler expressions.
For example, if we wanted to <em>compress</em> the even numbers of the vector <code class="docutils literal notranslate"><span class="pre">v</span></code>, we would write something like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">~</span><span class="m">2</span><span class="o">|</span><span class="nv">v</span><span class="p">)</span><span class="na">/</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8 6 4
</span></div></div>
</div>
<p>With the operator <em>commute</em>, we can write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="na">/⍨</span><span class="o">~</span><span class="m">2</span><span class="o">|</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8 6 4
</span></div></div>
</div>
<p>The pattern <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">/⍨</span></code> can be read as “the items of <code class="docutils literal notranslate"><span class="pre">array</span></code> that…”.</p>
<p>The operators <em>commute</em> and <em>selfie</em> can also be helpful in trains.
This will be understandable when we study trains in <a class="reference internal" href="#tacit-programming-function-trains"><span class="std std-numref">Section 12.6</span></a>.</p>
</div>
<div class="section" id="constant">
<span id="tacit-programming-constant"></span><h3><span class="section-number">12.5.2. </span>Constant<a class="headerlink" href="#constant" title="Permalink to this headline">#</a></h3>
<p>The operator <em>constant</em> is a monadic operator which takes an array operand <code class="docutils literal notranslate"><span class="pre">array</span></code>.
The derived function is an ambivalent constant function that always returns <code class="docutils literal notranslate"><span class="pre">array</span></code>.
Thus, <code class="docutils literal notranslate"><span class="pre">array⍨</span></code> is equivalent to the dfn <code class="docutils literal notranslate"><span class="pre">{array}</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="na">⍨</span><span class="w"> </span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="na">⍨</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Houston&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">21</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">55</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Cat&#39;</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Dog&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3
</span></div></div>
</div>
</div>
</div>
<div class="section" id="function-trains">
<span id="tacit-programming-function-trains"></span><h2><span class="section-number">12.6. </span>Function Trains<a class="headerlink" href="#function-trains" title="Permalink to this headline">#</a></h2>
<p>A function train, often referred to as just a train, is a function that is derived from a sequence of two or more functions.
This sequence of functions must be isolated from its arguments.
Notice the difference in results between this uninteresting APL expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="o">-,+</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8
</span></div></div>
</div>
<p>And this one, where the three functions are parenthesised:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="p">(</span><span class="o">-,+</span><span class="p">)</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8 12
</span></div></div>
</div>
<p>Throughout this section you will learn what <code class="docutils literal notranslate"><span class="pre">(-,+)</span></code> means as a function train and you will understand why the result of <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">(-,+)</span> <span class="pre">2</span></code> is the vector <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">12</span></code>.</p>
<p>A function train with two functions is called an atop (or a 2-train) and a function train with three functions is called a fork (or a 3-train).
They are the two building blocks of trains with arbitrary length, and we will start by looking at them.</p>
<div class="section" id="train-atop">
<span id="tacit-programming-2-train-atop"></span><h3><span class="section-number">12.6.1. </span>2-train Atop<a class="headerlink" href="#train-atop" title="Permalink to this headline">#</a></h3>
<p>A train with two functions is called an atop, which is also the name of an operator introduced in <a class="reference internal" href="#tacit-programming-atop"><span class="std std-numref">Section 12.3.2</span></a>.
The 2-train and the operator <em>atop</em> share their name because they function in the same way:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(F</span> <span class="pre">G)</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F⍤G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">(F</span> <span class="pre">G)</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F⍤G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">F</span> <span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">⍵</span></code>.</p></li>
</ul>
<p>For example, <code class="docutils literal notranslate"><span class="pre">(|-)</span></code> is <em>the absolute value of the difference</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="p">(</span><span class="o">|-</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="p">(</span><span class="o">|-</span><span class="p">)</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5
</span></div></div>
</div>
<p>Much like with functions that are combined with operators, we can inspect trains by typing them in the session:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">|-</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌┴┐
| -
</span></div></div>
</div>
<p>Trains can also be assigned to names.
When we do so, we do not need to parenthesise the sequence of functions because the functions are already isolated from the arguments:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">AbsDiff</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">|-</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="nv">AbsDiff</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5
</span></div></div>
</div>
</div>
<div class="section" id="train-fork">
<span id="tacit-programming-3-train-fork"></span><h3><span class="section-number">12.6.2. </span>3-train Fork<a class="headerlink" href="#train-fork" title="Permalink to this headline">#</a></h3>
<p>A train with three functions is called a fork.
In the fork <code class="docutils literal notranslate"><span class="pre">(F</span> <span class="pre">G</span> <span class="pre">H)</span></code>, the two outer functions <code class="docutils literal notranslate"><span class="pre">F</span></code> and <code class="docutils literal notranslate"><span class="pre">H</span></code> are applied first, and then the function <code class="docutils literal notranslate"><span class="pre">G</span></code> in the middle is applied to the results of the two outer functions.</p>
<p>If we type a fork in the session, we see a diagram that hints at the fact that origin of the name “fork”, because the diagram looks like a fork with three tines.
If we use an “empty” dfn <code class="docutils literal notranslate"><span class="pre">{}</span></code> as a placeholder for a function, we can see the fork-like diagram:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{}{}{}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──┼──┐
{} {} {}
</span></div></div>
</div>
<div class="section" id="monadic-fork">
<span id="tacit-programming-monadic-fork"></span><h4><span class="section-number">12.6.2.1. </span>Monadic Fork<a class="headerlink" href="#monadic-fork" title="Permalink to this headline">#</a></h4>
<p>In the monadic case, we have that <code class="docutils literal notranslate"><span class="pre">(F</span> <span class="pre">G</span> <span class="pre">H)</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(F</span> <span class="pre">⍵)</span> <span class="pre">G</span> <span class="pre">(H</span> <span class="pre">⍵)</span></code>.
For example, the fork <code class="docutils literal notranslate"><span class="pre">(⌽≡⊢)</span></code>, when used monadically, checks if the argument vector is a palindrome.
(Recall that a palindrome is a sequence that reads the same when reversed.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⌽≡⊢</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;TACOCAT&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⌽≡⊢</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⌽≡⊢</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;MISSISSIPPI&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>Notice that, in a fork that is used monadically, the two outer functions are used monadically but the middle function is always used dyadically.</p>
</div>
<div class="section" id="dyadic-fork">
<span id="tacit-programming-dyadic-fork"></span><h4><span class="section-number">12.6.2.2. </span>Dyadic Fork<a class="headerlink" href="#dyadic-fork" title="Permalink to this headline">#</a></h4>
<p>In the dyadic case, we have that <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">(F</span> <span class="pre">G</span> <span class="pre">H)</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(⍺</span> <span class="pre">F</span> <span class="pre">⍵)</span> <span class="pre">G</span> <span class="pre">(⍺</span> <span class="pre">H</span> <span class="pre">⍵)</span></code>.
So, if a fork is used dyadically, both arguments get passed to both outer functions, and then the results are given as arguments to the middle function.</p>
<p>The train <code class="docutils literal notranslate"><span class="pre">(-,+)</span></code>, from the beginning of this section, was used dyadically, so now we can understand it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="p">(</span><span class="o">-,+</span><span class="p">)</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8 12
</span></div></div>
</div>
<p>Is the same as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">8 12
</span></div></div>
</div>
<p>Another good example of a dyadic fork is <code class="docutils literal notranslate"><span class="pre">(≠⊆⊢)</span></code>, which can be used to split a vector on a separator.
Below, you can see this fork being used to split a sentence into words:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">(</span><span class="o">≠⊆⊢</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;this is a sentence with some words&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┬──┬─┬────────┬────┬────┬─────┐
│this│is│a│sentence│with│some│words│
└────┴──┴─┴────────┴────┴────┴─────┘
</span></div></div>
</div>
<p>This fork is equivalent to the following expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">sentence</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;this is a sentence with some words&#39;</span><span class="w"></span>
<span class="p">(</span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">≠</span><span class="w"> </span><span class="nv">sentence</span><span class="p">)</span><span class="w"> </span><span class="o">⊆</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">⊢</span><span class="w"> </span><span class="nv">sentence</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┬──┬─┬────────┬────┬────┬─────┐
│this│is│a│sentence│with│some│words│
└────┴──┴─┴────────┴────┴────┴─────┘
</span></div></div>
</div>
<p>Of course, the right tack is used to say that the right argument to <code class="docutils literal notranslate"><span class="pre">⊆</span></code> should be the right argument of the fork, unchanged.
In fact, the expression above can be simplified to</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">≠</span><span class="w"> </span><span class="nv">sentence</span><span class="p">)</span><span class="w"> </span><span class="o">⊆</span><span class="w"> </span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┬──┬─┬────────┬────┬────┬─────┐
│this│is│a│sentence│with│some│words│
└────┴──┴─┴────────┴────┴────┴─────┘
</span></div></div>
</div>
</div>
<div class="section" id="arrays-in-forks">
<span id="tacit-programming-arrays-in-forks"></span><h4><span class="section-number">12.6.2.3. </span>Arrays in Forks<a class="headerlink" href="#arrays-in-forks" title="Permalink to this headline">#</a></h4>
<p>The left tine of a fork does not have to be a function.
In fact, it can be any array, which will then be used as the left argument to the function in the centre of the fork.</p>
<p>For example, the fork <code class="docutils literal notranslate"><span class="pre">(1=×)</span></code> checks if a number is positive:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=×</span><span class="p">)</span><span class="w"> </span><span class="m">13.4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=×</span><span class="p">)</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=×</span><span class="p">)</span><span class="w"> </span><span class="m">¯73.42</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>However, the right tine of a fork cannot be an array.
The right tine of a fork must be a function.
If it were an array, then APL would not interpret that as a fork, but as a normal APL expression that happens to be parenthesised.</p>
<p>For example, one might think that <code class="docutils literal notranslate"><span class="pre">(⊢*0.5)</span></code> is a fork that implements the function square root.
However, if you use this “fork”, this is what happens:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⊢*</span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="m">16</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.64872 16
</span></div></div>
</div>
<p>APL sees the expression <code class="docutils literal notranslate"><span class="pre">(⊢*0.5)</span> <span class="pre">16</span></code> as a 2-item vector, where the first item is <code class="docutils literal notranslate"><span class="pre">⊢*0.5</span></code>, which is just <code class="docutils literal notranslate"><span class="pre">*0.5</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="m">0.5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.64872
</span></div></div>
</div>
<p>If we wanted to insist on writing the function square root as a train, we could fix this by using the operator <em>constant</em>, to turn the value 0.5 into a function that always returns 0.5:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⊢*</span><span class="m">0.5</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="m">16</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4
</span></div></div>
</div>
</div>
</div>
<div class="section" id="longer-trains">
<span id="tacit-programming-longer-trains"></span><h3><span class="section-number">12.6.3. </span>Longer Trains<a class="headerlink" href="#longer-trains" title="Permalink to this headline">#</a></h3>
<p>A function train does not have to be limited to two or three functions.
Function trains can have an arbitrarily large size.</p>
<p>In a function train with four or more functions, APL starts combining functions into 3-trains from the right.
For example, to parse the train <code class="docutils literal notranslate"><span class="pre">(≢≠⊆⊢)</span></code>, APL starts by looking at <code class="docutils literal notranslate"><span class="pre">≠⊆⊢</span></code> as a 3-train, which creates a derived function <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">←</span> <span class="pre">≠⊆⊢</span></code>.
Now, we can look at <code class="docutils literal notranslate"><span class="pre">(≢≠⊆⊢)</span></code> as <code class="docutils literal notranslate"><span class="pre">(≢T)</span></code> which is a 2-train, an atop.
<code class="docutils literal notranslate"><span class="pre">T</span></code> is the train that we used to split a sentence into its words, so we see that the train <code class="docutils literal notranslate"><span class="pre">(≢T)</span></code> can be used to count how many words are in a sentence:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">(</span><span class="o">≢≠⊆⊢</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;this sentence has five words&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5
</span></div></div>
</div>
<p>As a beginner, it is recommended that you use the session to inspect the structure of longer trains:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢≠⊆⊢</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┴─┐
≢ ┌─┼─┐
  ≠ ⊆ ⊢
</span></div></div>
</div>
<p>The diagrams that the session draws will help you inspect the structure of the derived function.</p>
<p>As another example, consider the train <code class="docutils literal notranslate"><span class="pre">(5&lt;(≢≠⊆⊢))</span></code>.
In this train, the parentheses make the structure explicit:</p>
<ul class="simple">
<li><p>the outer train is a fork where the left tine is actually an array (the scalar 5), the middle tine is the function <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and the right tine is another train; and</p></li>
<li><p>the right tine is the 4-train from before.</p></li>
</ul>
<p>Again, the session helps us visualise this structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="o">&lt;</span><span class="p">(</span><span class="o">≢≠⊆⊢</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┼───┐
5 &lt; ┌─┴─┐
    ≢ ┌─┼─┐
      ≠ ⊆ ⊢
</span></div></div>
</div>
<p>With the train above, we can check, for example, if a sentence has more than five words:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="o">&lt;</span><span class="p">(</span><span class="o">≢≠⊆⊢</span><span class="p">))</span><span class="w"> </span><span class="s1">&#39;this sentence has five words&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="o">&lt;</span><span class="p">(</span><span class="o">≢≠⊆⊢</span><span class="p">))</span><span class="w"> </span><span class="s1">&#39;this longer sentence contains a total of nine words&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>If we look at a 5-train, we see that a 5-train is a fork with a right tine that is also a fork.
In the expression below, we use <code class="docutils literal notranslate"><span class="pre">{Fi}</span></code> as a placeholder for an arbitrary function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F5</span><span class="kt">}</span><span class="w"> </span><span class="kt">{</span><span class="nv">F4</span><span class="kt">}</span><span class="w"> </span><span class="kt">{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┼─────────┐
{F5} {F4} ┌────┼────┐
          {F3} {F2} {F1}
</span></div></div>
</div>
<p>When APL parses the expression above to create the appropriate derived function, it starts by taking the three rightmost functions and creating a fork, that we will call <code class="docutils literal notranslate"><span class="pre">T1</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">T1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Then, APL uses that fork <code class="docutils literal notranslate"><span class="pre">T1</span></code> as the right tine of the fork that uses the fourth and fifth functions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F5</span><span class="kt">}</span><span class="w"> </span><span class="kt">{</span><span class="nv">F4</span><span class="kt">}</span><span class="w"> </span><span class="nv">T1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┼─────────┐
{F5} {F4} ┌────┼────┐
          {F3} {F2} {F1}
</span></div></div>
</div>
<p>Much like in regular expressions, in function trains we can use parenthesis to change the way APL parses things.
For example, if we parenthesise the three central functions, we create a 3-train where the middle tine is itself a fork:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F5</span><span class="kt">}</span><span class="w"> </span><span class="p">(</span><span class="kt">{</span><span class="nv">F4</span><span class="kt">}{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}</span><span class="p">)</span><span class="w"> </span><span class="kt">{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─────────┼──────┐
{F5} ┌────┼────┐ {F1}
     {F4} {F3} {F2}
</span></div></div>
</div>
<p>If we type a 6-train, we see that the sixth function is applied atop the corresponding 5-train:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F6</span><span class="kt">}</span><span class="w">  </span><span class="kt">{</span><span class="nv">F5</span><span class="kt">}</span><span class="w"> </span><span class="kt">{</span><span class="nv">F4</span><span class="kt">}</span><span class="w"> </span><span class="kt">{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┴────┐
{F6} ┌────┼─────────┐
     {F5} {F4} ┌────┼────┐
               {F3} {F2} {F1}
</span></div></div>
</div>
<p>As you may have guessed by now, the length of the function train determines whether we have an atop or a fork, and that distinction depends on the parity of the length of the train:</p>
<ul class="simple">
<li><p>a function train with an odd number of functions is a fork; and</p></li>
<li><p>a function train with an even number of functions is an atop.</p></li>
</ul>
<p>Naturally, a typical train will get increasingly more difficult to understand (for humans) as it grows, so you should keep that in mind when writing your own trains.
Nonetheless, even long trains have a uniform structure that the tree diagram makes clear:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F9</span><span class="kt">}{</span><span class="nv">F8</span><span class="kt">}{</span><span class="nv">F7</span><span class="kt">}{</span><span class="nv">F6</span><span class="kt">}{</span><span class="nv">F5</span><span class="kt">}{</span><span class="nv">F4</span><span class="kt">}{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┼─────────┐                            
{F9} {F8} ┌────┼─────────┐                  
          {F7} {F6} ┌────┼─────────┐        
                    {F5} {F4} ┌────┼────┐   
                              {F3} {F2} {F1}
</span></div></div>
</div>
<p>We can exploit the uniformity in the structure of (long) trains to write the specification of how trains of arbitrary length work:</p>
<div class="tip admonition">
<p class="admonition-title">Rule</p>
<ul class="simple">
<li><p>In trains, the functions in odd positions are the functions that receive the arguments of the train directly and those functions are used monadically or dyadically, depending on whether the train is called monadically or dyadically.</p></li>
<li><p>The functions in even positions are used dyadically with the results of the surrounding functions as arguments.</p></li>
<li><p>If the leftmost function of a train is in an even position, that function will be applied atop the remainder of the train.</p></li>
</ul>
</div>
<p>Let us inspect an arbitrary train with 8 functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F8</span><span class="kt">}{</span><span class="nv">F7</span><span class="kt">}{</span><span class="nv">F6</span><span class="kt">}{</span><span class="nv">F5</span><span class="kt">}{</span><span class="nv">F4</span><span class="kt">}{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┴────┐                            
{F8} ┌────┼─────────┐                  
     {F7} {F6} ┌────┼─────────┐        
               {F5} {F4} ┌────┼────┐   
                         {F3} {F2} {F1}
</span></div></div>
</div>
<p>The functions in positions 1, 3, 5, and 7, will receive the train arguments directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌────┴────┐
{F8} ┌────┼─────────┐
     {F7} {F6} ┌────┼─────────┐
     ↑↑↑↑      {F5} {F4} ┌────┼────┐
               ↑↑↑↑      {F3} {F2} {F1}
                         ↑↑↑↑      ↑↑↑↑
</pre></div>
</div>
<p>Then, the functions in even positions will receive, as arguments, the results of the surrounding functions.
Notice the <code class="docutils literal notranslate"><span class="pre">←</span></code> and <code class="docutils literal notranslate"><span class="pre">→</span></code> next to the intersections of the tree diagram:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌────┴────┐
{F8} ┌───→┼←────────┐
     {F7} {F6} ┌───→┼←────────┐
     ↑↑↑↑      {F5} {F4} ┌───→┼←───┐
               ↑↑↑↑      {F3} {F2} {F1}
                         ↑↑↑↑      ↑↑↑↑
</pre></div>
</div>
<p>Finally, if the leftmost function is in an even position, that function will be applied <em>atop</em> the remainder of the train.
In this example, that means <code class="docutils literal notranslate"><span class="pre">F8</span></code> would be applied to the result returned by <code class="docutils literal notranslate"><span class="pre">F6</span></code>.</p>
</div>
<div class="section" id="using-trains">
<span id="tacit-programming-using-trains"></span><h3><span class="section-number">12.6.4. </span>Using Trains<a class="headerlink" href="#using-trains" title="Permalink to this headline">#</a></h3>
<p>Tacit programming, and trains in particular, are infamous for being too complicated and convoluted.
This is debatable and there are benefits to using trains.
Some of the associated benefits are concrete and can be measured.
For example, function trains lend themselves nicely to idiom recognition, which means they can be faster:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="m">10</span><span class="o">↑</span><span class="nv">vec</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">?</span><span class="m">1e6</span><span class="o">⍴</span><span class="m">1e6</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">154020 445155 812948 17402 834033 557036 691461 355647 475123 447026
</span></div></div>
</div>
<div class="cell tag_skip-execution docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">runtime</span><span class="w"> </span><span class="o">-</span><span class="nv">c</span><span class="w"> </span><span class="p">(</span><span class="nv">vec</span><span class="o">≥</span><span class="m">999000</span><span class="p">)</span><span class="o">⍳</span><span class="m">1</span><span class="w"> </span><span class="nv">vec</span><span class="p">(</span><span class="o">⍳</span><span class="na">∘</span><span class="m">1</span><span class="o">≥</span><span class="p">)</span><span class="m">999000</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">                                                                            
  (vec≥999000)⍳1  → 8.9E¯5 |    0% ⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕ 
  vec(⍳∘1≥)999000 → 3.7E¯7 | -100%                                          
</span></div></div>
</div>
<p>Some other advantages of using trains are subjective and/or impossible to quantify.
We will expose some of them here.</p>
<p>Trains provide a mathematically pure way of specifying data transformations, given that trains are functions derived from the composition of other functions.
Thus, trains are an interesting alternative for when you need to define functions that transform your data without producing side-effects.
This “purity”, which can be hard to define and somewhat subjective, is what allows function trains to be inverted by the operator <em>power</em>, as is shown in <a class="reference internal" href="#tacit-programming-inverting-trains"><span class="std std-numref">Section 12.6.7</span></a>.</p>
<p>Because function trains do not use any characters to specify the function composition or the way the arguments flow (because trains use tacit programming), it can be argued that trains are a more direct way of expressing pure computations, when compared to dfns or tradfns.</p>
</div>
<div class="section" id="carriages-in-a-train">
<span id="tacit-programming-carriages-in-a-train"></span><h3><span class="section-number">12.6.5. </span>Carriages in a Train<a class="headerlink" href="#carriages-in-a-train" title="Permalink to this headline">#</a></h3>
<p>Function trains do not need to be composed solely of primitive functions.
Any function can be used in a function train, namely other function trains, dfns, tradfns, and functions derived from operators.
Below, you can find a couple of examples.</p>
<p>First, we create a fork that checks if a non-empty vector contains only a single unique element.
In this fork, the right tine is a named dfn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">CountUnique</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="o">≢∪</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=</span><span class="nv">CountUnique</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>There is nothing preventing us from using the dfn directly:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=</span><span class="kt">{</span><span class="o">≢∪</span><span class="bp">⍵</span><span class="kt">}</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>Now, we replace the dfn with an equivalent formulation using the operator <em>beside</em> to compose the two functions that we need on the right tine:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=≢</span><span class="na">∘</span><span class="o">∪</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>Because the derived function is being used monadically, we know that <code class="docutils literal notranslate"><span class="pre">≢∘∪</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">≢⍤∪</span></code> and <code class="docutils literal notranslate"><span class="pre">≢⍥∪</span></code>.
On top of that, we know that <code class="docutils literal notranslate"><span class="pre">≢⍤∪</span></code> is the same as the 2-train <code class="docutils literal notranslate"><span class="pre">(≢∪)</span></code>, so we can replace the right tine with another train:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">=</span><span class="p">(</span><span class="o">≢∪</span><span class="p">))</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>As you can see, there is a lot of flexibility associated with function trains.
Naturally, making use of this flexibility can cost you in readability.</p>
<p>For example, compare the two trains that follow:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">(</span><span class="o">≠≢</span><span class="na">⍤</span><span class="o">⊆⊢</span><span class="p">)</span><span class="w"> </span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">(</span><span class="o">≢≠⊆⊢</span><span class="p">)</span><span class="w"> </span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<p>The two trains are equivalent, but they differ in the way we specify that the function <em>tally</em> must be applied.
In the train <code class="docutils literal notranslate"><span class="pre">(≠≢⍤⊆⊢)</span></code>, we use the operator <em>atop</em> to specify we do the <em>tally of the partition</em>, whereas in the 4-train <code class="docutils literal notranslate"><span class="pre">(≢≠⊆⊢)</span></code>, we have the <em>tally</em> atop the fork <code class="docutils literal notranslate"><span class="pre">(≠⊆⊢)</span></code>.</p>
<p>We can even see that the corresponding diagrams differ:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≠≢</span><span class="na">⍤</span><span class="o">⊆⊢</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┼─┐
≠ ⍤ ⊢
 ┌┴┐
 ≢ ⊆
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">≢≠⊆⊢</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┴─┐
≢ ┌─┼─┐
  ≠ ⊆ ⊢
</span></div></div>
</div>
<p>When possible, avoid using operators inside trains because it breaks the uniform pattern of trains.</p>
<p>A train with 9 functions is a fork with a uniform structure, as shown by its diagram:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F9</span><span class="kt">}{</span><span class="nv">F8</span><span class="kt">}{</span><span class="nv">F7</span><span class="kt">}{</span><span class="nv">F6</span><span class="kt">}{</span><span class="nv">F5</span><span class="kt">}{</span><span class="nv">F4</span><span class="kt">}{</span><span class="nv">F3</span><span class="kt">}{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┼─────────┐                            
{F9} {F8} ┌────┼─────────┐                  
          {F7} {F6} ┌────┼─────────┐        
                    {F5} {F4} ┌────┼────┐   
                              {F3} {F2} {F1}
</span></div></div>
</div>
<p>If we insert some operators, the diagram loses regularity and becomes harder to follow:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="nv">F9</span><span class="kt">}{</span><span class="nv">F8</span><span class="kt">}</span><span class="na">⍤</span><span class="kt">{</span><span class="nv">F7</span><span class="kt">}</span><span class="na">∘</span><span class="kt">{</span><span class="nv">F6</span><span class="kt">}{</span><span class="nv">F5</span><span class="kt">}{</span><span class="nv">F4</span><span class="kt">}{</span><span class="nv">F3</span><span class="kt">}</span><span class="na">⍥</span><span class="kt">{</span><span class="nv">F2</span><span class="kt">}{</span><span class="nv">F1</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌──┴───┐                
{F9} ┌─┼─────────┐      
     ∘ {F5} ┌────┼─┐    
    ┌┴┐     {F4} ⍥ {F1} 
    ⍤ {F6}     ┌─┴──┐   
  ┌─┴──┐       {F3} {F2}
  {F8} {F7}             
</span></div></div>
</div>
</div>
<div class="section" id="hybrid-function-operators">
<span id="tacit-programming-hybrid-function-operators"></span><h3><span class="section-number">12.6.6. </span>Hybrid Function-operators<a class="headerlink" href="#hybrid-function-operators" title="Permalink to this headline">#</a></h3>
<p>Some primitives are both functions and operators, like <em>reduce</em> <code class="docutils literal notranslate"><span class="pre">/</span></code> and <em>reduce-first</em> <code class="docutils literal notranslate"><span class="pre">⌿</span></code>.
One must be careful when using hybrid function-operators in function trains if the intended purpose is to use them as functions.</p>
<p>Here is an expression that selects the positive numbers of a numeric vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">¯0.4</span><span class="w"> </span><span class="m">¯1.3</span><span class="w"> </span><span class="m">¯0.9</span><span class="w"> </span><span class="m">3.2</span><span class="w"> </span><span class="m">4.5</span><span class="w"> </span><span class="m">0.6</span><span class="w"> </span><span class="m">4.9</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">¯2.3</span><span class="w"> </span><span class="m">0.3</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">0</span><span class="na">∘</span><span class="o">&lt;</span><span class="nv">v</span><span class="p">)</span><span class="na">/</span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.2 4.5 0.6 4.9 0.3
</span></div></div>
</div>
<p>One might try to rewrite that expression as a fork like so:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="na">/</span><span class="o">⊢</span><span class="p">)</span><span class="w"> </span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>However, it clearly does not work.
The issue is that <code class="docutils literal notranslate"><span class="pre">/</span></code> is being parsed as the operator <em>reduce</em>, so it is trying to use <code class="docutils literal notranslate"><span class="pre">0∘&lt;</span></code> as its operand.
To force the glyph <em>slash</em> to be parsed as the function <em>compress</em>, one can write the function <em>compress</em> as the right operand of the atop <code class="docutils literal notranslate"><span class="pre">⊢⍤/</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;⊢</span><span class="na">⍤/</span><span class="o">⊢</span><span class="p">)</span><span class="w"> </span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.2 4.5 0.6 4.9 0.3
</span></div></div>
</div>
<p>This workaround forces the glyph <em>slash</em> to be seen as the function <em>compress</em> (and not the operator) because the atop <code class="docutils literal notranslate"><span class="pre">⍤</span></code> needs a right operand.
The atop <code class="docutils literal notranslate"><span class="pre">⊢⍤F</span></code> is equivalent to the function <code class="docutils literal notranslate"><span class="pre">F</span></code>, so putting <code class="docutils literal notranslate"><span class="pre">⊢⍤/</span></code> in the train will not change its behaviour.</p>
<p>Another possible fix is to wrap the glyph in a dfn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="kt">{</span><span class="bp">⍺</span><span class="na">/</span><span class="bp">⍵</span><span class="kt">}</span><span class="o">⊢</span><span class="p">)</span><span class="w"> </span><span class="nv">v</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.2 4.5 0.6 4.9 0.3
</span></div></div>
</div>
</div>
<div class="section" id="inverting-trains">
<span id="tacit-programming-inverting-trains"></span><h3><span class="section-number">12.6.7. </span>Inverting Trains<a class="headerlink" href="#inverting-trains" title="Permalink to this headline">#</a></h3>
<p>The operator <em>power</em> can take a negative right operand, which will invert the function and then apply it.
An advantage of using compositional operators and/or function trains is that the derived functions are amenable to inversion by the operator <em>power</em>.
The operator <em>power</em> can invert some of these functions because they are pure functions, and thus there are formulas that allow the interpreter to know how to invert the functions.</p>
<p>Below, you can find a train that adds 1 to the square of the argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">+×</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">101
</span></div></div>
</div>
<p>This train can be inverted by the operator power:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">1</span><span class="o">+×</span><span class="na">⍨</span><span class="p">)</span><span class="na">⍣</span><span class="m">¯1</span><span class="w"> </span><span class="o">⊢</span><span class="w"> </span><span class="m">101</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">10
</span></div></div>
</div>
<p>However, the equivalent dfn cannot be inverted:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="m">1</span><span class="o">+×</span><span class="na">⍨</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⍣</span><span class="m">¯1</span><span class="w"> </span><span class="o">⊢</span><span class="w"> </span><span class="m">101</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DOMAIN ERROR
      {1+×⍨⍵}⍣¯1⊢101
            ∧
</pre></div>
</div>
</div>
</div>
<p>There are limitations to what (tacit) functions the operator <em>power</em> can invert, but this capability is nonetheless surprising.</p>
</div>
</div>
<div class="section" id="exercises">
<span id="tacit-programming-exercises"></span><h2><span class="section-number">12.7. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">#</a></h2>
<div class="exercise admonition" id="ex-operators-reduction">

<p class="admonition-title"><span class="caption-number">Exercise 12.1 </span></p>
<div class="section" id="exercise-content">
<p>What is the result of the expression <code class="docutils literal notranslate"><span class="pre">2∘×⍤+/</span> <span class="pre">3</span> <span class="pre">5</span></code>?
What about <code class="docutils literal notranslate"><span class="pre">2∘×⍤+/</span> <span class="pre">3</span> <span class="pre">5</span> <span class="pre">7</span></code>?</p>
</div>
</div>
<div class="exercise admonition" id="ex-bind-comparison">

<p class="admonition-title"><span class="caption-number">Exercise 12.2 </span></p>
<div class="section" id="exercise-content">
<p>Use the operator <em>bind</em> to create derived functions that accept numeric arrays and return a Boolean mask indicating:</p>
<ul class="simple">
<li><p>what values are positive;</p></li>
<li><p>what values are equal to <code class="docutils literal notranslate"><span class="pre">¯1</span></code>; and</p></li>
<li><p>what values are less than or equal to <code class="docutils literal notranslate"><span class="pre">3.5</span></code>.</p></li>
</ul>
</div>
</div>
<div class="exercise admonition" id="ex-fill-in-the-op">

<p class="admonition-title"><span class="caption-number">Exercise 12.3 </span></p>
<div class="section" id="exercise-content">
<p>Replace the underscores <code class="docutils literal notranslate"><span class="pre">_</span></code> with the correct compositional operators so that the results become correct:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">,</span><span class="nv">_</span><span class="o">≢</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">      </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">,</span><span class="nv">_</span><span class="o">≢</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">      </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">,</span><span class="nv">_</span><span class="o">≢</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="ex-fill-in-the-op-2">

<p class="admonition-title"><span class="caption-number">Exercise 12.4 </span></p>
<div class="section" id="exercise-content">
<p>Replace the underscores <code class="docutils literal notranslate"><span class="pre">_</span></code> with the correct compositional operators so that the results become correct:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="na">/</span><span class="nv">_</span><span class="o">|</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
<span class="m">3</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="o">⍳</span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="na">/⍨</span><span class="nv">_</span><span class="o">~</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="o">÷</span><span class="nv">_</span><span class="o">+</span><span class="nv">_</span><span class="o">÷</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">1.33333</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="ex-remove-parentheses">

<p class="admonition-title"><span class="caption-number">Exercise 12.5 </span></p>
<div class="section" id="exercise-content">
<p>Rewrite the expressions below without parentheses.
Use the operator <em>commute</em> instead.</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="p">(</span><span class="o">∪</span><span class="nv">w</span><span class="p">)</span><span class="o">⍳</span><span class="nv">w</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;MISSISSIPPI&#39;</span><span class="w"></span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">      </span><span class="o">≢</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">≠</span><span class="nv">sentence</span><span class="p">)</span><span class="o">⊆</span><span class="nv">sentence</span><span class="w"></span>
<span class="m">7</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">,</span><span class="p">(</span><span class="o">⌊</span><span class="p">(</span><span class="o">≢</span><span class="nf">⎕A</span><span class="p">)</span><span class="o">÷</span><span class="m">4</span><span class="p">))</span><span class="o">⍴</span><span class="nf">⎕A</span><span class="w"></span>
<span class="nv">ABCDEF</span><span class="w"></span>
<span class="nv">GHIJKL</span><span class="w"></span>

<span class="nv">MNOPQR</span><span class="w"></span>
<span class="nv">STUVWX</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="ex-constant-mask-at">

<p class="admonition-title"><span class="caption-number">Exercise 12.6 </span></p>
<div class="section" id="exercise-content">
<p>Take the character vector <code class="docutils literal notranslate"><span class="pre">sentence</span></code> and create a Boolean mask that indicates what elements of <code class="docutils literal notranslate"><span class="pre">sentence</span></code> are blank spaces (<code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code>).
That mask, in conjunction with the operators <em>at</em> and <em>constant</em>, can also be used to replace all the spaces with a different character.
Replace all spaces with asterisks (<code class="docutils literal notranslate"><span class="pre">'*'</span></code>) using this technique.</p>
</div>
</div>
<p>In typical code, this technique is useful when the Boolean mask is used for other computations other than the replacement with <em>at</em>.</p>
<div class="exercise admonition" id="ex-behind">

<p class="admonition-title"><span class="caption-number">Exercise 12.7 </span></p>
<div class="section" id="exercise-content">
<p>The operator <em>beside</em> in <code class="docutils literal notranslate"><span class="pre">F∘G</span></code> can be interpreted as “preprocess the right argument of <code class="docutils literal notranslate"><span class="pre">F</span></code> with <code class="docutils literal notranslate"><span class="pre">G</span></code>”.
Implement a dop <code class="docutils literal notranslate"><span class="pre">_B_</span></code> such that <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">⍵</span></code>.
This operator is sometimes referred to as <em>behind</em> and is interpreted as “preprocess the left argument of <code class="docutils literal notranslate"><span class="pre">F</span></code> with <code class="docutils literal notranslate"><span class="pre">G</span></code>”.
Try to implement it in terms of <em>beside</em> and <em>commute</em>.</p>
<p><strong>Hint</strong>: start from <code class="docutils literal notranslate"><span class="pre">F∘G</span></code>.</p>
</div>
</div>
<p>Use these expressions to verify your implementation:</p>
<div class="cell tag_skip-execution docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯2</span><span class="w"> </span><span class="o">|</span><span class="nv">_B_</span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell tag_skip-execution docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="na">∘</span><span class="o">↑</span><span class="nv">_B_</span><span class="o">,</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 4 5 6
</span></div></div>
</div>
<div class="exercise admonition" id="ex-average">

<p class="admonition-title"><span class="caption-number">Exercise 12.8 </span></p>
<div class="section" id="exercise-content">
<p>The dfn <code class="docutils literal notranslate"><span class="pre">{(+/⍵)÷≢⍵}</span></code> computes the average of a numeric vector.
Rewrite it as a fork.</p>
</div>
</div>
<div class="exercise admonition" id="ex-multiplication-table">

<p class="admonition-title"><span class="caption-number">Exercise 12.9 </span></p>
<div class="section" id="exercise-content">
<p>The monadic tacit function <code class="docutils literal notranslate"><span class="pre">∘.×⍨∘⍳</span></code> computes the multiplication table for the numbers from 1 to the right argument.
Rewrite it as a fork.</p>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="na">∘.</span><span class="o">×</span><span class="na">⍨∘</span><span class="o">⍳</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1  2  3  4  5
2  4  6  8 10
3  6  9 12 15
4  8 12 16 20
5 10 15 20 25
</span></div></div>
</div>
<div class="exercise admonition" id="ex-trains-beside">

<p class="admonition-title"><span class="caption-number">Exercise 12.10 </span></p>
<div class="section" id="exercise-content">
<p>The train <code class="docutils literal notranslate"><span class="pre">(FG)</span></code> behaves the same way as the derived function <code class="docutils literal notranslate"><span class="pre">F⍤G</span></code>.
Write a train that behaves the same way as <code class="docutils literal notranslate"><span class="pre">F∘G</span></code> when <code class="docutils literal notranslate"><span class="pre">F∘G</span></code> is used dyadically.</p>
</div>
</div>
<div class="exercise admonition" id="ex-trains-over">

<p class="admonition-title"><span class="caption-number">Exercise 12.11 </span></p>
<div class="section" id="exercise-content">
<p>The train <code class="docutils literal notranslate"><span class="pre">(FG)</span></code> behaves in the same way as the derived function <code class="docutils literal notranslate"><span class="pre">F⍤G</span></code>.
Write two trains that behave the same way as <code class="docutils literal notranslate"><span class="pre">F⍥G</span></code> when <code class="docutils literal notranslate"><span class="pre">F⍥G</span></code> is used dyadically:</p>
<ul class="simple">
<li><p>one train that uses nested trains but no compositional operators; and</p></li>
<li><p>one train that uses compositional operators but no nested trains.</p></li>
</ul>
</div>
</div>
<div class="exercise admonition" id="ex-trains-behind">

<p class="admonition-title"><span class="caption-number">Exercise 12.12 </span></p>
<div class="section" id="exercise-content">
<p>Write a train that behaves like <code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span></code> when <code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span></code> is used dyadically, assuming <code class="docutils literal notranslate"><span class="pre">_B_</span></code> is the operator <em>behind</em> from a previous exercise.</p>
</div>
</div>
<div class="exercise admonition" id="ex-maths-as-tacit-monadic">

<p class="admonition-title"><span class="caption-number">Exercise 12.13 </span></p>
<div class="section" id="exercise-content">
<p>Rewrite the dfns that follow as function trains:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="kt">{</span><span class="o">|×</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">¯3.14</span><span class="w"></span>
<span class="m">1</span><span class="w"></span>
<span class="w">      </span><span class="kt">{</span><span class="o">*</span><span class="m">2</span><span class="o">×</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="m">54.5982</span><span class="w"></span>
<span class="w">      </span><span class="kt">{</span><span class="m">2</span><span class="o">+</span><span class="m">5</span><span class="o">×</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">¯3.14</span><span class="w"></span>
<span class="m">¯13.7</span><span class="w"></span>
<span class="w">      </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">-</span><span class="m">2</span><span class="o">*</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">0.5</span><span class="w"></span>
<span class="m">¯0.914214</span><span class="w"></span>
<span class="w">      </span><span class="kt">{</span><span class="o">|</span><span class="bp">⍵</span><span class="o">-</span><span class="m">2</span><span class="o">*</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">0.5</span><span class="w"></span>
<span class="m">0.914214</span><span class="w"></span>
<span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="bp">⍵</span><span class="o">*</span><span class="m">2</span><span class="p">)</span><span class="o">+</span><span class="bp">⍵</span><span class="o">*</span><span class="m">3</span><span class="kt">}</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="m">12</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="ex-maths-as-tacit-dyadic">

<p class="admonition-title"><span class="caption-number">Exercise 12.14 </span></p>
<div class="section" id="exercise-content">
<p>Rewrite the dfns that follow as function trains:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="kt">{</span><span class="o">÷</span><span class="bp">⍵</span><span class="o">-</span><span class="bp">⍺</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">1</span><span class="w"></span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="bp">⍺</span><span class="o">+</span><span class="bp">⍵</span><span class="p">)</span><span class="o">×</span><span class="bp">⍺</span><span class="o">-</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">¯7</span><span class="w"></span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="kt">{</span><span class="m">1</span><span class="o">+</span><span class="p">(</span><span class="bp">⍺</span><span class="o">+</span><span class="bp">⍵</span><span class="p">)</span><span class="o">×</span><span class="bp">⍺</span><span class="o">-</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">¯6</span><span class="w"></span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">*</span><span class="m">1</span><span class="o">+</span><span class="bp">⍺</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">256</span><span class="w"></span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="o">⍳</span><span class="bp">⍵</span><span class="p">)</span><span class="o">*</span><span class="m">1</span><span class="o">+</span><span class="bp">⍺</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">1</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">256</span><span class="w"></span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">*</span><span class="m">1</span><span class="o">+⍳</span><span class="bp">⍺</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">16</span><span class="w"> </span><span class="m">64</span><span class="w"> </span><span class="m">256</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="exercise admonition" id="ex-rewrite-train">

<p class="admonition-title"><span class="caption-number">Exercise 12.15 </span></p>
<div class="section" id="exercise-content">
<p>The dfn <code class="docutils literal notranslate"><span class="pre">{,1↑⍵+⍉⍵}</span></code> is a monadic dfn that accepts numeric matrix that are square (that is, that have the same number of rows and columns).
Of the trains below, which ones are equivalent to this dfn when called monadically?</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(,1↑⊢+⍉)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(,∘1∘↑⊢+⍉)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(,⍉1∘↑⍤+⊢)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(,1↑+∘⍉⍨)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">((,1∘↑)⍉+⊢)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(,∘(1∘↑)⊢+⍉)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(≢↑⍉,⍤+⊢)</span></code></p></li>
</ol>
<p>You are welcome to inspect the (tree) diagrams of the trains, but do not run the trains.
The objective of the exercise is to analyse the trains and reason about them.</p>
</div>
</div>
</div>
<div class="section" id="solutions">
<span id="tacit-programming-solutions"></span><h2><span class="section-number">12.8. </span>Solutions<a class="headerlink" href="#solutions" title="Permalink to this headline">#</a></h2>
<div class="solution admonition" id="Tacit-Programming-solution-15">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-operators-reduction"> Exercise 12.1</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>What is the result of the expression <code class="docutils literal notranslate"><span class="pre">2∘×⍤+/</span> <span class="pre">3</span> <span class="pre">5</span></code>?
What about <code class="docutils literal notranslate"><span class="pre">2∘×⍤+/</span> <span class="pre">3</span> <span class="pre">5</span> <span class="pre">7</span></code>?</p>
<p>Because operators bind from the left, <code class="docutils literal notranslate"><span class="pre">2∘×⍤+/</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">((2∘×)⍤+)/</span></code>.
The leftmost function is <code class="docutils literal notranslate"><span class="pre">2∘×</span></code> which is <em>times</em> bound to a left argument 2, which is the function <em>double</em>.
The function <em>double</em> is being used <em>atop</em> the function <em>plus</em>, so the reduction is a <em>reduction by addition followed by doubling</em>.
Therefore, the expression <code class="docutils literal notranslate"><span class="pre">2∘×⍤+/</span> <span class="pre">3</span> <span class="pre">5</span></code> will result in 16:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="na">∘</span><span class="o">×</span><span class="na">⍤</span><span class="o">+</span><span class="na">/</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">16
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="na">∘</span><span class="o">×</span><span class="m">3</span><span class="o">+</span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">16
</span></div></div>
</div>
<p>Similarly, if the vector argument is <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">5</span> <span class="pre">7</span></code>, we start by adding 5 and 7 and doubling, which gives 24.
Then, we add 3 to 24 and double, which gives 54:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="na">∘</span><span class="o">×</span><span class="na">⍤</span><span class="o">+</span><span class="na">/</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">54
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-16">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-bind-comparison"> Exercise 12.2</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>Positive values are greater than 0, which can be computed with this derived function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="na">∘</span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> ∘
┌┴┐
&gt; 0
</span></div></div>
</div>
<p>Values equal to <code class="docutils literal notranslate"><span class="pre">¯1</span></code> can be computed with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯1</span><span class="na">∘</span><span class="o">=</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> ∘
┌┴─┐
¯1 =
</span></div></div>
</div>
<p>Values less than or equal to 3.5 can be found with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≤</span><span class="na">∘</span><span class="m">3.5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> ∘
┌┴┐
≤ 3.5
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-17">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-fill-in-the-op"> Exercise 12.3</a></p>
<div class="section" id="solution-content">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">,</span><span class="na">⍥</span><span class="o">≢</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">,</span><span class="na">∘</span><span class="o">≢</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">4 5 6 3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">,</span><span class="na">⍤</span><span class="o">≢</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-18">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-fill-in-the-op-2"> Exercise 12.4</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>Replace the underscores <code class="docutils literal notranslate"><span class="pre">_</span></code> with the correct compositional operators so that the results become correct:</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="na">/</span><span class="nv">_</span><span class="o">|</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
<span class="m">3</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="o">⍳</span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="na">/⍨</span><span class="nv">_</span><span class="o">~</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="o">÷</span><span class="nv">_</span><span class="o">+</span><span class="nv">_</span><span class="o">÷</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="m">1.33333</span><span class="w"></span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="na">/⍤</span><span class="o">|</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">19</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="na">/⍨∘</span><span class="o">~</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 3 5 6
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">2</span><span class="w"> </span><span class="o">÷</span><span class="na">⍤</span><span class="o">+</span><span class="na">⍥</span><span class="o">÷</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1.33333
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-19">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-remove-parentheses"> Exercise 12.5</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>Rewrite the expressions below without parentheses.
Use the operator <em>commute</em> instead.</p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="p">(</span><span class="o">∪</span><span class="nv">w</span><span class="p">)</span><span class="o">⍳</span><span class="nv">w</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;MISSISSIPPI&#39;</span><span class="w"></span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">      </span><span class="o">≢</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">≠</span><span class="nv">sentence</span><span class="p">)</span><span class="o">⊆</span><span class="nv">sentence</span><span class="w"></span>
<span class="m">7</span><span class="w"></span>
<span class="w">      </span><span class="p">((</span><span class="o">⌊</span><span class="p">(</span><span class="o">≢</span><span class="nf">⎕A</span><span class="p">)</span><span class="o">÷</span><span class="m">9</span><span class="p">)</span><span class="o">,</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">⍴</span><span class="nf">⎕A</span><span class="w"></span>
<span class="nv">ABC</span><span class="w"></span>
<span class="nv">DEF</span><span class="w"></span>
<span class="nv">GHI</span><span class="w"></span>

<span class="nv">JKL</span><span class="w"></span>
<span class="nv">MNO</span><span class="w"></span>
<span class="nv">PQR</span><span class="w"></span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">w</span><span class="o">⍳</span><span class="na">⍨</span><span class="o">∪</span><span class="nv">w</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;MISSISSIPPI&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 3 2 3 3 2 4 4 2
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="nv">sentence</span><span class="o">⊆</span><span class="na">⍨</span><span class="s1">&#39; &#39;</span><span class="o">≠</span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕A</span><span class="o">⍴</span><span class="na">⍨</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">,</span><span class="na">⍨</span><span class="o">⌊</span><span class="m">9</span><span class="o">÷</span><span class="na">⍨</span><span class="o">≢</span><span class="nf">⎕A</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">ABC
DEF
GHI

JKL
MNO
PQR
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-20">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-constant-mask-at"> Exercise 12.6</a></p>
<div class="section" id="solution-content">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">mask</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="o">=</span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="na">/</span><span class="nv">mask</span><span class="w">  </span><span class="c1">⍝ number of blank spaces</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">6
</span></div></div>
</div>
<p>The operator <em>constant</em> <code class="docutils literal notranslate"><span class="pre">⍨</span></code> turns the vector <code class="docutils literal notranslate"><span class="pre">mask</span></code> into a function that returns the mask that determines where the asterisk is going to be put:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;*&#39;</span><span class="na">@</span><span class="p">(</span><span class="nv">mask</span><span class="na">⍨</span><span class="p">)</span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">this*is*a*sentence*with*some*words
</span></div></div>
</div>
<p>If the mask had not been calculated previously, we could achieve the same effect with a right operand dfn that <em>computes</em> the mask:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;*&#39;</span><span class="na">@</span><span class="kt">{</span><span class="s1">&#39; &#39;</span><span class="o">=</span><span class="bp">⍵</span><span class="kt">}</span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">this*is*a*sentence*with*some*words
</span></div></div>
</div>
<p>We could even use a compositional operator:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;*&#39;</span><span class="na">@</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="na">∘</span><span class="o">=</span><span class="p">)</span><span class="nv">sentence</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">this*is*a*sentence*with*some*words
</span></div></div>
</div>
<p>In this exercise, we tried to emulate the context in which the mask has already been computed because it was used for something else.
In cases like this, it is not needed to recompute the mask.</p>
<div class="solution admonition" id="Tacit-Programming-solution-21">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-behind"> Exercise 12.7</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>A direct implementation could be:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">_B_</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="bp">⍺⍺</span><span class="w"> </span><span class="bp">⍺</span><span class="p">)</span><span class="bp">⍵⍵</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯2</span><span class="w"> </span><span class="o">|</span><span class="nv">_B_</span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="na">∘</span><span class="o">↑</span><span class="nv">_B_</span><span class="o">,</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 4 5 6
</span></div></div>
</div>
<p>Alternatively, one can implement <em>behind</em> in terms of <em>beside</em> and <em>commute</em>.
Using the hint, we can start with <code class="docutils literal notranslate"><span class="pre">F∘G</span></code>.</p>
<p>We want to have <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">⍵</span></code> and we have <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F∘G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span></code>.
The first thing that is wrong with this version is that <code class="docutils literal notranslate"><span class="pre">G</span></code> is being applied to <code class="docutils literal notranslate"><span class="pre">⍵</span></code> and not <code class="docutils literal notranslate"><span class="pre">⍺</span></code>, so we can fix this by using the operator <em>commute</em> once.</p>
<p>If we have <code class="docutils literal notranslate"><span class="pre">F∘G⍨</span></code>, then <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F∘G⍨</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">F∘G</span> <span class="pre">⍺</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍺</span></code>.
Thus, <code class="docutils literal notranslate"><span class="pre">G</span></code> is being applied to the correct argument, but then <code class="docutils literal notranslate"><span class="pre">F</span></code> is getting its arguments <code class="docutils literal notranslate"><span class="pre">⍵</span></code> and <code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">⍺</span></code> in the wrong order.
To fix this, we need to apply a second <em>commute</em> to the function <code class="docutils literal notranslate"><span class="pre">F</span></code> alone.</p>
<p>If we use the pattern <code class="docutils literal notranslate"><span class="pre">F⍨∘G⍨</span></code> then we have <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F⍨∘G~</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">F⍨∘G</span> <span class="pre">⍺</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">F⍨</span> <span class="pre">G</span> <span class="pre">⍺</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">⍵</span></code>, which is what we wanted.
We can implement this in our dop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">_B_</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵⍵</span><span class="na">⍨∘</span><span class="bp">⍺⍺</span><span class="na">⍨</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯2</span><span class="w"> </span><span class="o">|</span><span class="nv">_B_</span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="na">∘</span><span class="o">↑</span><span class="nv">_B_</span><span class="o">,</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 4 5 6
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-22">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-average"> Exercise 12.8</a></p>
<div class="section" id="solution-content">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Avg</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">+</span><span class="na">/</span><span class="o">÷≢</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Avg</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2.5
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-23">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-multiplication-table"> Exercise 12.9</a></p>
<div class="section" id="solution-content">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="na">∘.</span><span class="o">×⍳</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1  2  3  4  5
2  4  6  8 10
3  6  9 12 15
4  8 12 16 20
5 10 15 20 25
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-24">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-trains-beside"> Exercise 12.10</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">F∘G</span></code> is used dyadically, we have <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F∘G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(⍺⊣⍵)</span> <span class="pre">F</span> <span class="pre">G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(⍺⊣⍵)</span> <span class="pre">F</span> <span class="pre">(G</span> <span class="pre">⍺⊢⍵)</span> <span class="pre">←→</span> <span class="pre">(⍺⊣⍵)</span> <span class="pre">F</span> <span class="pre">(⍺</span> <span class="pre">G⍤⊢</span> <span class="pre">⍵)</span></code>.
Therefore, the train <code class="docutils literal notranslate"><span class="pre">(⊣FG⍤⊢)</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">F∘G</span></code> when both are used dyadically.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="o">+</span><span class="na">∘</span><span class="o">|</span><span class="w"> </span><span class="m">¯2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">5</span><span class="w"> </span><span class="p">(</span><span class="o">⊣+|</span><span class="na">⍤</span><span class="o">⊢</span><span class="p">)</span><span class="w"> </span><span class="m">¯2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-25">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-trains-over"> Exercise 12.11</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">F⍥G</span></code> is used dyadically, we have <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">F⍥G</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">(G</span> <span class="pre">⍵)</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺⊣⍵)</span> <span class="pre">F</span> <span class="pre">(G</span> <span class="pre">⍺⊢⍵)</span></code>.
Both <code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">⍺⊣⍵</span></code> and <code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">⍺⊢⍵</span></code> exhibit the pattern of an atop, which can be written as a 2-train or with the operator <em>atop</em>.</p>
<p>If we use 2-trains, we get <code class="docutils literal notranslate"><span class="pre">((G⊣)F(G⊢))</span></code>.
If we use the operator <em>atop</em>, we get <code class="docutils literal notranslate"><span class="pre">(G⍤⊣FG⍤⊢)</span></code>.
These are the same as <code class="docutils literal notranslate"><span class="pre">F⍥G</span></code> if used dyadically:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="na">⍥</span><span class="o">≢</span><span class="w"> </span><span class="nf">⎕A</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">36
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">((</span><span class="o">≢⊣</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="o">≢⊢</span><span class="p">))</span><span class="w"> </span><span class="nf">⎕A</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">36
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">≢</span><span class="na">⍤</span><span class="o">⊣+≢</span><span class="na">⍤</span><span class="o">⊢</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕A</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">36
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-26">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-trains-behind"> Exercise 12.12</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span></code> used dyadically gives <code class="docutils literal notranslate"><span class="pre">⍺</span> <span class="pre">G</span> <span class="pre">_B_</span> <span class="pre">F</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">(G</span> <span class="pre">⍺)</span> <span class="pre">F</span> <span class="pre">⍵</span></code>, which is somewhat symmetric to <code class="docutils literal notranslate"><span class="pre">F∘G</span> <span class="pre">←→</span> <span class="pre">⍺</span> <span class="pre">F</span> <span class="pre">(G</span> <span class="pre">⍵)</span></code>.
Thus, if the fork for <em>beside</em> was <code class="docutils literal notranslate"><span class="pre">(⊣FG⍤⊢)</span></code> we get that the fork for <em>behind</em> is <code class="docutils literal notranslate"><span class="pre">(G⍤⊣F⊢)</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯2</span><span class="w"> </span><span class="o">|</span><span class="nv">_B_</span><span class="o">+</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯2</span><span class="w"> </span><span class="p">(</span><span class="o">|</span><span class="na">⍤</span><span class="o">⊣+⊢</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">7
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-27">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-maths-as-tacit-monadic"> Exercise 12.13</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>In the case of the first dfn <code class="docutils literal notranslate"><span class="pre">{|×⍵}</span></code>, it is so short that we realise <code class="docutils literal notranslate"><span class="pre">(|×)</span></code> is just an atop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">|×</span><span class="p">)</span><span class="w"> </span><span class="m">¯3.14</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>When rewriting a dfn or another expression as a function train, arrays (whether the argument or constant arrays used in the expression) have to go in the odd positions.
Dyadic functions that combine results that are computed from the argument tend to be the functions that go in the even positions.</p>
<p>For example, in the dfn <code class="docutils literal notranslate"><span class="pre">{*2×⍵}</span></code> we see the arrays <code class="docutils literal notranslate"><span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">⍵</span></code> and we could try to put them in the odd positions of a train: <code class="docutils literal notranslate"><span class="pre">(...</span> <span class="pre">_</span> <span class="pre">2</span> <span class="pre">_</span> <span class="pre">⊢)</span></code>.
We use the function <em>right tack</em> instead of <code class="docutils literal notranslate"><span class="pre">⍵</span></code> because, in tacit programming we do not mention the arguments explicitly.
Then, we see that the function <em>times</em> is a dyadic function combining the <code class="docutils literal notranslate"><span class="pre">2</span></code> and the <code class="docutils literal notranslate"><span class="pre">⍵</span></code>, so that can be the centre function in the fork of the first three functions: <code class="docutils literal notranslate"><span class="pre">(...</span> <span class="pre">_</span> <span class="pre">2</span> <span class="pre">×</span> <span class="pre">⊢)</span></code>.
Finally, we see that the function <em>exponential</em> is applied atop the result, so the train becomes <code class="docutils literal notranslate"><span class="pre">(*2×⊢)</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">*</span><span class="m">2</span><span class="o">×⊢</span><span class="p">)</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">54.5982
</span></div></div>
</div>
<p>Similarly, in the dfn <code class="docutils literal notranslate"><span class="pre">{2+5×⍵}</span></code>, we see three arrays and no computations are done to the left of the <code class="docutils literal notranslate"><span class="pre">2</span></code>, so we can expect to try and fit that dfn in a train that looks like <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">_</span> <span class="pre">5</span> <span class="pre">_</span> <span class="pre">⊢)</span></code>.
Conveniently enough, it is enough to insert the same functions in the same positions, and the train is correct:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="m">2</span><span class="o">+</span><span class="m">5</span><span class="o">×⊢</span><span class="p">)</span><span class="w"> </span><span class="m">¯3.14</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯13.7
</span></div></div>
</div>
<p>The same reasoning works for the dfns <code class="docutils literal notranslate"><span class="pre">{⍵-2*⍵}</span></code> and <code class="docutils literal notranslate"><span class="pre">{|⍵-2*⍵}</span></code>, giving the trains below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⊢-</span><span class="m">2</span><span class="o">*⊢</span><span class="p">)</span><span class="w"> </span><span class="m">0.5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯0.914214
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">|⊢-</span><span class="m">2</span><span class="o">*⊢</span><span class="p">)</span><span class="w"> </span><span class="m">0.5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0.914214
</span></div></div>
</div>
<p>In the dfn <code class="docutils literal notranslate"><span class="pre">{(⍵*2)+⍵*3}</span></code>, we see that the function <code class="docutils literal notranslate"><span class="pre">+</span></code> is combining the results of computing <code class="docutils literal notranslate"><span class="pre">⍵*2</span></code> and <code class="docutils literal notranslate"><span class="pre">⍵*3</span></code>, thus <code class="docutils literal notranslate"><span class="pre">+</span></code> seems like the centre function of a fork <code class="docutils literal notranslate"><span class="pre">(F</span> <span class="pre">+</span> <span class="pre">G)</span></code>.
Now, we need <code class="docutils literal notranslate"><span class="pre">F</span></code> to compute <code class="docutils literal notranslate"><span class="pre">⍵*2</span></code> and we need <code class="docutils literal notranslate"><span class="pre">G</span></code> to compute <code class="docutils literal notranslate"><span class="pre">⍵*3</span></code>.</p>
<p>If you look at the expression <code class="docutils literal notranslate"><span class="pre">⍵*2</span></code> as being the function <em>square</em> applied to <code class="docutils literal notranslate"><span class="pre">⍵</span></code>, and if you look at the expression <code class="docutils literal notranslate"><span class="pre">⍵*3</span></code> as the function <em>cube</em> applied to <code class="docutils literal notranslate"><span class="pre">⍵</span></code>, then the fork <code class="docutils literal notranslate"><span class="pre">(*∘2+*∘3)</span></code> might look more natural to you.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">*</span><span class="na">∘</span><span class="m">2</span><span class="o">+*</span><span class="na">∘</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12
</span></div></div>
</div>
<p>If you start to associate the argument(s) with the functions <em>left</em> and <em>right tack</em>, you might see <code class="docutils literal notranslate"><span class="pre">⍵*2</span></code> as the “fork” <code class="docutils literal notranslate"><span class="pre">(⊢*2)</span></code>, except that forks cannot have arrays on the right.
You could fix this by writing <code class="docutils literal notranslate"><span class="pre">(2*⍨⊢)</span></code> or <code class="docutils literal notranslate"><span class="pre">(⊢*2⍨)</span></code>.
Thus, you would come up with a fork like <code class="docutils literal notranslate"><span class="pre">((2*⍨⊢)+(3*⍨⊢))</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="m">2</span><span class="o">*</span><span class="na">⍨</span><span class="o">⊢</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="m">3</span><span class="o">*</span><span class="na">⍨</span><span class="o">⊢</span><span class="p">))</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">12
</span></div></div>
</div>
<div class="solution admonition" id="Tacit-Programming-solution-28">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-maths-as-tacit-dyadic"> Exercise 12.14</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>In trains that are used dyadically, whenever we find a function that is being used with both the left and right arguments, that is a strong indication that that function should be in an odd position of a train.
For example, for the first dfn <code class="docutils literal notranslate"><span class="pre">{÷⍵-⍺}</span></code>, we see the function <em>minus</em> being applied to both arguments, albeit in the wrong order.
This means that <code class="docutils literal notranslate"><span class="pre">(...</span> <span class="pre">-⍨)</span></code> is a good start for our train.
Then, we can finish our train with the function <em>reciprocal</em> atop the subtraction:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="o">÷-</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1
</span></div></div>
</div>
<p>Likewise, the dfn <code class="docutils literal notranslate"><span class="pre">{(⍺+⍵)×⍺-⍵}</span></code> shows the functions <em>plus</em> and <em>minus</em> being used dyadically, hinting at a fork of the form <code class="docutils literal notranslate"><span class="pre">(+</span> <span class="pre">...</span> <span class="pre">-)</span></code>.
Then, it is just a matter of inserting the function <em>times</em> in the centre:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="o">+×-</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯7
</span></div></div>
</div>
<p>Again, we see two functions being used dyadically with <code class="docutils literal notranslate"><span class="pre">⍺</span></code> and <code class="docutils literal notranslate"><span class="pre">⍵</span></code>, that are likely to go in odd positions.
On top of that, we see the array <code class="docutils literal notranslate"><span class="pre">1</span></code> being used explicitly.
Constant arrays also go in odd positions, so we have a possible train structure that looks like <code class="docutils literal notranslate"><span class="pre">(1</span> <span class="pre">_</span> <span class="pre">+</span> <span class="pre">_</span> <span class="pre">-)</span></code>.
Then, we fill in the gaps and arrive at the train below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="o">++×-</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯6
</span></div></div>
</div>
<p>In dyadic trains where one of the arguments shows up isolated, that is likely to be a place to use a <em>left</em> or <em>right tack</em>, depending on whether we need <code class="docutils literal notranslate"><span class="pre">⍺</span></code> or <code class="docutils literal notranslate"><span class="pre">⍵</span></code>, respectively.
Below, by inspecting the positions of the arguments and the literal arrays, we can suspect our train will have a structure like <code class="docutils literal notranslate"><span class="pre">(⊢</span> <span class="pre">_</span> <span class="pre">1</span> <span class="pre">_</span> <span class="pre">⊣)</span></code>.
To finish this train, we insert the functions that are missing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="o">⊢*</span><span class="m">1</span><span class="o">+⊣</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">256
</span></div></div>
</div>
<p>When part of the expression that is being translated contains a function that is applied to only one of the arguments, we must work around that in some way.
For example, in the dfn <code class="docutils literal notranslate"><span class="pre">{(⍳⍵)*1+⍺}</span></code>, we can modify the train <code class="docutils literal notranslate"><span class="pre">(⊢*1+⊣)</span></code> by having the <em>index generator atop the right tack</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="na">⍤</span><span class="o">⊢*</span><span class="m">1</span><span class="o">+⊣</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 16 81 256
</span></div></div>
</div>
<p>In the example of the dfn <code class="docutils literal notranslate"><span class="pre">{⍵*1+⍳⍺}</span></code> we can do the exact same thing to apply the <em>index generator atop the left tack</em>, resulting in the train</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="o">⊢*</span><span class="m">1</span><span class="o">+⍳</span><span class="na">⍤</span><span class="o">⊣</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">16 64 256
</span></div></div>
</div>
<p>Another alternative would be to use the operator <em>beside</em> so that the function <em>plus</em> becomes <em>plus with the right argument pre-processed by the index generator</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="o">⊢*</span><span class="m">1</span><span class="o">+</span><span class="na">∘</span><span class="o">⍳⊣</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">16 64 256
</span></div></div>
</div>
<p>(Note that, in the prose above, the “right argument” of <em>plus</em> that is pre-processed is actually the left argument of the train.)</p>
<div class="solution admonition" id="Tacit-Programming-solution-29">

<p class="admonition-title">Solution to<a class="reference internal" href="#ex-rewrite-train"> Exercise 12.15</a></p>
<div class="section" id="solution-content">
</div>
</div>
<p>The dfn <code class="docutils literal notranslate"><span class="pre">{,1↑⍵+⍉⍵}</span></code> takes a square numeric matrix, adds it with its transpose, and then returns the first row of the resulting matrix as a vector.
Here is an example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="kt">{</span><span class="o">,</span><span class="m">1</span><span class="o">↑</span><span class="bp">⍵</span><span class="o">+⍉</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
<p>Of the seven trains shown, the only one that is not equivalent to this dfn is the second option, <code class="docutils literal notranslate"><span class="pre">(,∘1∘↑⊢+⍉)</span></code>.</p>
<p>The second option is not equivalent to the dfn because of the derived function <code class="docutils literal notranslate"><span class="pre">,∘1∘↑</span></code> that is applied atop the fork <code class="docutils literal notranslate"><span class="pre">(⊢+⍉)</span></code>.
The derived function <code class="docutils literal notranslate"><span class="pre">,∘1∘↑</span></code> is parsed as <code class="docutils literal notranslate"><span class="pre">(,∘1)∘↑</span></code> because operators bind from the left.
Thus, after we add the matrix to its transpose, we mix the matrix (which leaves it unchanged) and then we catenate the scalar <code class="docutils literal notranslate"><span class="pre">1</span></code> to its right, adding a column of ones:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,</span><span class="na">∘</span><span class="m">1</span><span class="na">∘</span><span class="o">↑⊢+⍉</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 2  8 14 20 26 1
 8 14 20 26 32 1
14 20 26 32 38 1
20 26 32 38 44 1
26 32 38 44 50 1
</span></div></div>
</div>
<p>Now, we explain why the other trains are equivalent to the dfn.
The very first one, <code class="docutils literal notranslate"><span class="pre">(,1↑⊢+⍉)</span></code> is a direct translation of the dfn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,</span><span class="m">1</span><span class="o">↑⊢+⍉</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
<p>The third one is <code class="docutils literal notranslate"><span class="pre">(,⍉1∘↑⍤+⊢)</span></code>, which is pretty similar to the first one, except that the part “take the first row” was moved atop the addition of the matrix argument and its transpose.
This can be seen in the tree diagram of the train:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,⍉</span><span class="m">1</span><span class="na">∘</span><span class="o">↑</span><span class="na">⍤</span><span class="o">+⊢</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┴─┐
, ┌─┼─┐
  ⍉ ⍤ ⊢
   ┌┴┐
   ∘ +
  ┌┴┐
  1 ↑
</span></div></div>
</div>
<p>This means that, after we add the matrix argument with its transpose, we immediately <em>take</em> the first row.
Then, the function <em>ravel</em> that is atop the fork <code class="docutils literal notranslate"><span class="pre">(⍉1∘↑⍤+⊢)</span></code> turns that 1-row matrix into the result vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,⍉</span><span class="m">1</span><span class="na">∘</span><span class="o">↑</span><span class="na">⍤</span><span class="o">+⊢</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
<p>The fourth train is <code class="docutils literal notranslate"><span class="pre">(,1↑+∘⍉⍨)</span></code>, which is a 4-train:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,</span><span class="m">1</span><span class="o">↑+</span><span class="na">∘</span><span class="o">⍉</span><span class="na">⍨</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┴─┐
, ┌─┼─┐
  1 ↑ ⍨
    ┌─┘
    ∘
   ┌┴┐
   + ⍉
</span></div></div>
</div>
<p>What we need to do is understand the rightmost function in the train, which is <code class="docutils literal notranslate"><span class="pre">+∘⍉⍨</span></code>.
The train is called monadically, so the function <code class="docutils literal notranslate"><span class="pre">+∘⍉⍨</span></code> will also be called monadically, which means the operator <code class="docutils literal notranslate"><span class="pre">⍨</span></code> is the operator <em>selfie</em>: <code class="docutils literal notranslate"><span class="pre">+∘⍉⍨</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">+∘⍉</span> <span class="pre">⍵</span></code>.
Now, the usage of the operator <em>beside</em> means that we pre-process the right argument of <em>plus</em> with <em>transpose</em>, so we end up with <code class="docutils literal notranslate"><span class="pre">+∘⍉⍨</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">+∘⍉</span> <span class="pre">⍵</span> <span class="pre">←→</span> <span class="pre">⍵</span> <span class="pre">+</span> <span class="pre">⍉⍵</span></code>, which is exactly what we have in the dfn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,</span><span class="m">1</span><span class="o">↑+</span><span class="na">∘</span><span class="o">⍉</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
<p>The fifth and sixth trains, <code class="docutils literal notranslate"><span class="pre">((,1∘↑)⍉+⊢)</span></code> and <code class="docutils literal notranslate"><span class="pre">(,∘(1∘↑)⊢+⍉)</span></code>, differ in two things.
The first difference is in the first three functions: <code class="docutils literal notranslate"><span class="pre">(⍉+⊢)</span></code> versus <code class="docutils literal notranslate"><span class="pre">(⊢+⍉)</span></code>.
However, <em>plus</em> is a commutative function, so this difference in the definition of the train doe not affect the result.</p>
<p>The second difference is in the way the leftmost function is defined.
Notice how both trains are 4-trains.</p>
<p>In one, we have a nested 2-train <code class="docutils literal notranslate"><span class="pre">(,1∘↑)</span></code> atop the fork.
This atop applies the functions <em>take one</em> and <em>ravel</em> consecutively to the addition of the matrix argument with its transpose.</p>
<p>In the other, we have the derived function <code class="docutils literal notranslate"><span class="pre">,∘(1∘↑)</span></code> atop the fork.
This derived function uses parentheses to prevent <code class="docutils literal notranslate"><span class="pre">,∘1∘↑</span></code> to bind from the left, like in the second train.</p>
<p>In short, both trains are equivalent to the original dfn:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="o">,</span><span class="m">1</span><span class="na">∘</span><span class="o">↑</span><span class="p">)</span><span class="o">⍉+⊢</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">,</span><span class="na">∘</span><span class="p">(</span><span class="m">1</span><span class="na">∘</span><span class="o">↑</span><span class="p">)</span><span class="o">⊢+⍉</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
<p>The final train that we have to study is <code class="docutils literal notranslate"><span class="pre">(≢↑⍉,⍤+⊢)</span></code>.
This one looks more different from the original dfn because it uses primitive functions that are not present in the original dfn.</p>
<p>This train is a 5-train that starts with the fork <code class="docutils literal notranslate"><span class="pre">(⍉,⍤+⊢)</span></code>.
This fork starts by adding the argument matrix to its transpose and then ravels it, because of the function <em>ravel</em> atop the function <em>plus</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍉+⊢</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace"> 2  8 14 20 26
 8 14 20 26 32
14 20 26 32 38
20 26 32 38 44
26 32 38 44 50
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">⍉,</span><span class="na">⍤</span><span class="o">+⊢</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26 8 14 20 26 32 14 20 26 32 38 20 26 32 38 44 26 32 38 44 50
</span></div></div>
</div>
<p>Then, that ravel is going to be the right argument to the fork <code class="docutils literal notranslate"><span class="pre">(≢↑⊢)</span></code>.
The function <em>tally</em> takes the original matrix as argument, so the result of that will be the number of rows (or columns, because it is a square matrix) that the matrix has.
Thus, from the ravel of the matrix addition, we will <em>take</em> the number of elements of a single row, which corresponds to the first row of the matrix addition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">≢↑⍉,</span><span class="na">⍤</span><span class="o">+⊢</span><span class="p">)</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">25</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2 8 14 20 26
</span></div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog-kernel"
        },
        kernelOptions: {
            kernelName: "dyalog-kernel",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog-kernel'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Operators.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">11. </span>Operators</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Appendices.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">13. </span>Appendices</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Bernard Legrand, reworked by Rodrigo Girão Serrão.<br/>
  
    <div class="extra_footer">
      <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
</a></p>
<p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>